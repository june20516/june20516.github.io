<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="stylesheet" href="/_next/static/css/5624dea08047460b.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/ed65a566c9c7159d.css" data-precedence="next"/><link rel="preload" as="style" href="https://cdn.jsdelivr.net/gh/june20516/orbithall@widget/v1.1.1/static/embed.css"/><link rel="preload" as="script" href="https://www.googletagmanager.com/gtag/js?id=G-Q587R5F0YL"/><link rel="preload" as="script" href="https://cdn.jsdelivr.net/gh/june20516/orbithall@widget/v1.1.1/static/embed.js"/><title>mysql dockerize(1) - 도커로 mysql container 띄우기 - Bran&#x27;s codeverse</title><meta name="description" content="로컬 환경을 안전하게 보호하기 위해 MySQL을 도커로 격리하여 실행하는 과정을 기록한다."/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="mysql dockerize(1) - 도커로 mysql container 띄우기 - Bran&#x27;s codeverse"/><meta property="og:description" content="로컬 환경을 안전하게 보호하기 위해 MySQL을 도커로 격리하여 실행하는 과정을 기록한다."/><meta property="og:site_name" content="Bran&#x27;s codeverse"/><meta property="og:image" content="http://localhost:3000/assets/images/posts/thumbnails/mysql-dockerize.jpeg"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@codeverse"/><meta name="twitter:title" content="mysql dockerize(1) - 도커로 mysql container 띄우기 - Bran&#x27;s codeverse"/><meta name="twitter:description" content="로컬 환경을 안전하게 보호하기 위해 MySQL을 도커로 격리하여 실행하는 과정을 기록한다."/><meta name="twitter:image" content="http://localhost:3000/assets/images/posts/thumbnails/mysql-dockerize.jpeg"/><link rel="icon" href="/icon.svg?43070ac23468c58b" type="image/svg+xml" sizes="32x32"/><meta name="google-site-verification" content="i0Iq4sKjYlVS7Q9gq9KkCPl4hdoADOzOsTyFnCV24Os"/><style data-emotion="css-global 1mv6lxk">:root{--mui-palette-primary-main:#171717;--mui-palette-secondary-main:#737373;--mui-palette-info-main:#3b82f6;--mui-palette-error-main:#ef4444;--mui-palette-background-default:#ffffff;--mui-palette-action-active:#171717;--mui-palette-action-disabled:#d4d4d4;--mui-palette-text-primary:#171717;--mui-palette-text-secondary:#737373;--mui-palette-text-disabled:#d4d4d4;--mui-palette-divider:#e5e5e5;--mui-typography-fontFamily:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/june20516/orbithall@widget/v1.1.1/static/embed.css"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" noModule=""></script></head><style data-emotion="css k186h9">.css-k186h9{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background-color:#ffffff;}</style><body class="MuiBox-root css-k186h9"><style data-emotion="css 1vseziz">.css-1vseziz{position:-webkit-sticky;position:sticky;top:0;z-index:1000;border-bottom:1px solid #e5e5e5;background-color:#ffffff;overflow:hidden;}.css-1vseziz::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background-image:url(/assets/images/default-thumbnail.jpg);-webkit-background-size:120%;background-size:120%;-webkit-background-position:center;background-position:center;opacity:1;z-index:0;-webkit-animation:headerBackgroundFloat 300s ease-in-out infinite;animation:headerBackgroundFloat 300s ease-in-out infinite;}@-webkit-keyframes headerBackgroundFloat{0%,100%{-webkit-background-position:center top;background-position:center top;}50%{-webkit-background-position:center bottom;background-position:center bottom;}}@keyframes headerBackgroundFloat{0%,100%{-webkit-background-position:center top;background-position:center top;}50%{-webkit-background-position:center bottom;background-position:center bottom;}}.css-1vseziz::after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background-color:#ffffff;opacity:0.65;z-index:1;}</style><header class="MuiBox-root css-1vseziz"><style data-emotion="css cam08f">.css-cam08f{position:relative;z-index:2;max-width:1024px;margin-left:auto;margin-right:auto;padding-top:16px;padding-bottom:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;gap:32px;}@media (min-width:0px){.css-cam08f{padding-left:24px;padding-right:24px;}}@media (min-width:640px){.css-cam08f{padding-left:32px;padding-right:32px;}}@media (min-width:768px){.css-cam08f{padding-left:48px;padding-right:48px;}}</style><div class="MuiBox-root css-cam08f"><a style="text-decoration:none" href="/"><style data-emotion="css 120nera">.css-120nera{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:12px;}</style><div class="MuiBox-root css-120nera"><svg width="24" height="24" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="32" height="32" rx="6" fill="url(#gradient)"></rect><text x="16" y="22" font-family="system-ui, -apple-system, sans-serif" font-size="18" font-weight="700" fill="white" text-anchor="middle" letter-spacing="-0.02em">B</text><defs><linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse"><stop offset="0%" stop-color="#667eea"></stop><stop offset="100%" stop-color="#764ba2"></stop></linearGradient></defs></svg><style data-emotion="css 1bye4no">.css-1bye4no{margin:0;font-size:1.125rem;font-weight:600;line-height:1.5;font-family:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#171717;font-weight:600;letter-spacing:-0.01em;-webkit-transition:color 0.2s ease;transition:color 0.2s ease;}.css-1bye4no:hover{color:#737373;}</style><h6 class="MuiTypography-root MuiTypography-h6 css-1bye4no">Codeverse</h6></div></a><style data-emotion="css 1xiah1o">.css-1xiah1o{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (min-width:0px){.css-1xiah1o{gap:16px;}}@media (min-width:640px){.css-1xiah1o{gap:24px;}}</style><nav class="MuiBox-root css-1xiah1o"><a style="text-decoration:none" href="/posts"><style data-emotion="css 4nm0tw">.css-4nm0tw{margin:0;font-size:0.875rem;line-height:1.6;font-weight:400;font-family:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#171717;font-weight:500;font-size:0.875rem;-webkit-transition:color 0.2s ease;transition:color 0.2s ease;}.css-4nm0tw:hover{color:#171717;}</style><p class="MuiTypography-root MuiTypography-body2 css-4nm0tw">Posts</p></a><a style="text-decoration:none" href="/tags"><style data-emotion="css 1t5x1u">.css-1t5x1u{margin:0;font-size:0.875rem;line-height:1.6;font-weight:400;font-family:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#737373;font-weight:400;font-size:0.875rem;-webkit-transition:color 0.2s ease;transition:color 0.2s ease;}.css-1t5x1u:hover{color:#171717;}</style><p class="MuiTypography-root MuiTypography-body2 css-1t5x1u">Tags</p></a><a style="text-decoration:none" href="/lab"><p class="MuiTypography-root MuiTypography-body2 css-1t5x1u">Lab</p></a><a style="text-decoration:none" href="/about"><p class="MuiTypography-root MuiTypography-body2 css-1t5x1u">About</p></a></nav></div></header><style data-emotion="css 6rhssw">.css-6rhssw{-webkit-flex:1;-ms-flex:1;flex:1;width:100%;max-width:1024px;margin-left:auto;margin-right:auto;padding-top:48px;padding-bottom:48px;}@media (min-width:0px){.css-6rhssw{padding-left:24px;padding-right:24px;}}@media (min-width:640px){.css-6rhssw{padding-left:32px;padding-right:32px;}}@media (min-width:768px){.css-6rhssw{padding-left:48px;padding-right:48px;}}</style><main class="MuiBox-root css-6rhssw"><style data-emotion="css 6jdg17">.css-6jdg17{width:100%;max-width:720px;margin-left:auto;margin-right:auto;}</style><div class="MuiBox-root css-6jdg17"><article class="MuiBox-root css-0"><style data-emotion="css esqn0w">.css-esqn0w{width:100%;border-radius:24px;overflow:hidden;background-color:#f5f5f5;}@media (min-width:0px){.css-esqn0w{height:200px;margin-bottom:32px;}}@media (min-width:640px){.css-esqn0w{height:300px;margin-bottom:48px;}}@media (min-width:768px){.css-esqn0w{height:400px;}}</style><div class="MuiBox-root css-esqn0w"><img src="/assets/images/posts/thumbnails/mysql-dockerize.jpeg" alt="mysql dockerize(1) - 도커로 mysql container 띄우기" style="width:100%;height:100%;object-fit:cover"/></div><style data-emotion="css 1rtc9dx">.css-1rtc9dx{border-bottom:1px solid #e5e5e5;}@media (min-width:0px){.css-1rtc9dx{margin-bottom:48px;padding-bottom:24px;}}@media (min-width:640px){.css-1rtc9dx{margin-bottom:64px;padding-bottom:32px;}}</style><header class="MuiBox-root css-1rtc9dx"><style data-emotion="css yl1ub">.css-yl1ub{margin:0;font-size:3rem;font-weight:600;line-height:1.2;letter-spacing:-0.02em;font-family:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#171717;margin-bottom:24px;}@media (min-width:0px){.css-yl1ub{font-size:1.875rem;line-height:1.3;}}@media (min-width:640px){.css-yl1ub{font-size:2.25rem;line-height:1.2;}}@media (min-width:768px){.css-yl1ub{font-size:2.5rem;}}</style><h1 class="MuiTypography-root MuiTypography-h1 css-yl1ub">mysql dockerize(1) - 도커로 mysql container 띄우기</h1><style data-emotion="css hp6vas">.css-hp6vas{margin:0;font-size:1rem;line-height:1.7;font-weight:400;font-family:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#737373;margin-bottom:24px;}@media (min-width:0px){.css-hp6vas{line-height:1.7;font-size:0.9375rem;}}@media (min-width:640px){.css-hp6vas{line-height:1.8;font-size:1rem;}}</style><p class="MuiTypography-root MuiTypography-body1 css-hp6vas">로컬 환경을 안전하게 보호하기 위해 MySQL을 도커로 격리하여 실행하는 과정을 기록한다.</p><style data-emotion="css vih9y">.css-vih9y{margin:0;font-size:0.8125rem;line-height:1.5;font-weight:400;color:#a3a3a3;}</style><span class="MuiTypography-root MuiTypography-micro css-vih9y">2021/11/07</span></header><div class="markdown-body post MuiBox-root css-0"><p>최근 작업 중 DB 스키마 변경이 로컬 개발 환경에 영향을 미치는 일이 자주 발생했다. 이를 방지하기 위해 로컬에서 실행 중인 MySQL을 도커로 격리하여 실행하기로 했다.</p>
<h2 id="시작점" class="heading">시작점</h2>
<p>현재 사용 중인 DB는 MySQL이며, Ruby on Rails(RoR) 프로젝트를 진행 중이다. 로컬 환경에 MySQL 서버가 설치되어 있고, Docker는 이미 설치되어 있다.</p>
<h2 id="도커로-mysql-container-띄우기" class="heading">도커로 mysql container 띄우기</h2>
<h3 id="mysql-이미지-가져오기">mysql 이미지 가져오기</h3>
<p>먼저 MySQL 이미지를 가져온다.</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line">$ <span class="token function">docker</span> pull mysql
</span><span class="code-line">
</span><span class="code-line">Using default tag: latest
</span><span class="code-line">latest: Pulling from library/mysql
</span><span class="code-line"><span class="token punctuation">..</span>.
</span><span class="code-line"><span class="token punctuation">..</span>.
</span><span class="code-line">Digest: <span class="token punctuation">..</span>.
</span><span class="code-line">Status: Downloaded newer image <span class="token keyword">for</span> mysql:latest
</span><span class="code-line">docker.io/library/mysql:latest
</span></code></pre>
<p>LTS 버전의 MySQL 이미지가 로드된다.</p>
<h3 id="mysql-이미지를-컨테이너로-실행하기">mysql 이미지를 컨테이너로 실행하기</h3>
<p>로드한 이미지를 컨테이너로 실행해본다.</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line">$ <span class="token function">docker</span> run mysql
</span><span class="code-line">
</span><span class="code-line"><span class="token number">2021</span>-11-07 07:55:25+00:00 <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> <span class="token punctuation">[</span>Entrypoint<span class="token punctuation">]</span>: Entrypoint script <span class="token keyword">for</span> MySQL Server <span class="token number">8.0</span>.27-1debian10 started.
</span><span class="code-line"><span class="token number">2021</span>-11-07 07:55:25+00:00 <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> <span class="token punctuation">[</span>Entrypoint<span class="token punctuation">]</span>: Switching to dedicated user <span class="token string">'mysql'</span>
</span><span class="code-line"><span class="token number">2021</span>-11-07 07:55:25+00:00 <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> <span class="token punctuation">[</span>Entrypoint<span class="token punctuation">]</span>: Entrypoint script <span class="token keyword">for</span> MySQL Server <span class="token number">8.0</span>.27-1debian10 started.
</span><span class="code-line"><span class="token number">2021</span>-11-07 07:55:25+00:00 <span class="token punctuation">[</span>ERROR<span class="token punctuation">]</span> <span class="token punctuation">[</span>Entrypoint<span class="token punctuation">]</span>: Database is uninitialized and password option is not specified
</span><span class="code-line">    You need to specify one of the following:
</span><span class="code-line">    - MYSQL_ROOT_PASSWORD
</span><span class="code-line">    - MYSQL_ALLOW_EMPTY_PASSWORD
</span><span class="code-line">    - MYSQL_RANDOM_ROOT_PASSWORD
</span></code></pre>
<p>에러가 발생한다. MySQL 컨테이너는 루트 사용자의 비밀번호 설정 방법을 명시해야 한다. 아래 세 가지 옵션 중 하나를 선택해 컨테이너의 환경 변수로 전달한다.</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line">$ <span class="token function">docker</span> run mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">1234</span>
</span><span class="code-line"><span class="token comment"># 또는</span>
</span><span class="code-line">$ <span class="token function">docker</span> run mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ALLOW_EMPTY_PASSWORD</span><span class="token operator">=</span>abcd
</span><span class="code-line"><span class="token comment"># 또는</span>
</span><span class="code-line">$ <span class="token function">docker</span> run mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_RANDOM_ROOT_PASSWORD</span><span class="token operator">=</span>abcd
</span></code></pre>
<p>루트 비밀번호를 지정해주었다. 비밀번호를 설정하지 않는 MYSQL_ALLOW_EMPTY_PASSWORD나 MYSQL_RANDOM_ROOT_PASSWORD 옵션도 환경 변수에 값을 지정해줘야 동작한다. 실제로 해당 값이 영향을 미치지는 않는다.</p>
<p>랜덤 비밀번호 옵션을 사용하면 실행 로그에 비밀번호가 표시된다.</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line"><span class="token number">2021</span>-11-07 07:55:40+00:00 <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> <span class="token punctuation">[</span>Entrypoint<span class="token punctuation">]</span>: Entrypoint script <span class="token keyword">for</span> MySQL Server <span class="token number">8.0</span>.27-1debian10 started.
</span><span class="code-line"><span class="token number">2021</span>-11-07 07:55:40+00:00 <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> <span class="token punctuation">[</span>Entrypoint<span class="token punctuation">]</span>: Switching to dedicated user <span class="token string">'mysql'</span>
</span><span class="code-line"><span class="token punctuation">..</span>.
</span><span class="code-line"><span class="token punctuation">..</span>.
</span><span class="code-line"><span class="token number">2021</span>-11-07 07:55:48+00:00 <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> <span class="token punctuation">[</span>Entrypoint<span class="token punctuation">]</span>: GENERATED ROOT PASSWORD: ojai1toovee3jahC4ooh7on8ahjoo0ji
</span><span class="code-line"><span class="token punctuation">..</span>.
</span><span class="code-line"><span class="token number">2021</span>-11-07 07:55:50+00:00 <span class="token punctuation">[</span>Note<span class="token punctuation">]</span> <span class="token punctuation">[</span>Entrypoint<span class="token punctuation">]</span>: MySQL init process done. Ready <span class="token keyword">for</span> start up.
</span><span class="code-line"><span class="token punctuation">..</span>.
</span><span class="code-line"><span class="token number">2021</span>-11-07T07:55:51.690474Z <span class="token number">0</span> <span class="token punctuation">[</span>System<span class="token punctuation">]</span> <span class="token punctuation">[</span>MY-011323<span class="token punctuation">]</span> <span class="token punctuation">[</span>Server<span class="token punctuation">]</span> X Plugin ready <span class="token keyword">for</span> connections. Bind-address: <span class="token string">'::'</span> port: <span class="token number">33060</span>, socket: /var/run/mysqld/mysqlx.sock
</span><span class="code-line"><span class="token number">2021</span>-11-07T07:55:51.690582Z <span class="token number">0</span> <span class="token punctuation">[</span>System<span class="token punctuation">]</span> <span class="token punctuation">[</span>MY-010931<span class="token punctuation">]</span> <span class="token punctuation">[</span>Server<span class="token punctuation">]</span> /usr/sbin/mysqld: ready <span class="token keyword">for</span> connections. Version: <span class="token string">'8.0.27'</span>  socket: <span class="token string">'/var/run/mysqld/mysqld.sock'</span>  port: <span class="token number">3306</span>  MySQL Community Server - GPL.
</span></code></pre>
<p>컨테이너가 정상적으로 실행되었는지 확인한다.</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line">$ <span class="token function">docker</span> <span class="token function">ps</span>
</span><span class="code-line">
</span><span class="code-line">CONTAINER ID   IMAGE      COMMAND                  CREATED         STATUS          PORTS                    NAMES
</span><span class="code-line">ddb780457980   mysql      <span class="token string">"docker-entrypoint.s…"</span>   <span class="token number">4</span> minutes ago   Up <span class="token number">4</span> minutes    <span class="token number">3306</span>/tcp, <span class="token number">33060</span>/tcp      musing_dewdney
</span></code></pre>
<h3 id="컨테이너-실행-결과-확인하기">컨테이너 실행 결과 확인하기</h3>
<p>터미널을 하나 더 열어 방금 띄운 MySQL 컨테이너에 접속할 수 있다. 지정한 비밀번호로 MySQL 클라이언트에 접속해본다.</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line">$ <span class="token function">docker</span> <span class="token builtin class-name">exec</span> <span class="token parameter variable">-it</span> musing_dewdney <span class="token function">bash</span>
</span><span class="code-line">
</span><span class="code-line">root@ddb780457980:/<span class="token comment"># mysql -uroot -p1234</span>
</span><span class="code-line">
</span><span class="code-line">mysql: <span class="token punctuation">[</span>Warning<span class="token punctuation">]</span> Using a password on the <span class="token builtin class-name">command</span> line interface can be insecure.
</span><span class="code-line">Welcome to the MySQL monitor.  Commands end with <span class="token punctuation">;</span> or <span class="token punctuation">\</span>g.
</span><span class="code-line">Your MySQL connection <span class="token function">id</span> is <span class="token number">9</span>
</span><span class="code-line">Server version: <span class="token number">8.0</span>.27 MySQL Community Server - GPL
</span><span class="code-line">
</span><span class="code-line">Copyright <span class="token punctuation">(</span>c<span class="token punctuation">)</span> <span class="token number">2000</span>, <span class="token number">2021</span>, Oracle and/or its affiliates.
</span><span class="code-line">
</span><span class="code-line">Oracle is a registered trademark of Oracle Corporation and/or its
</span><span class="code-line">affiliates. Other names may be trademarks of their respective
</span><span class="code-line">owners.
</span><span class="code-line">
</span><span class="code-line">Type <span class="token string">'help;'</span> or <span class="token string">'\h'</span> <span class="token keyword">for</span> help. Type <span class="token string">'\c'</span> to <span class="token function">clear</span> the current input statement.
</span><span class="code-line">
</span><span class="code-line">mysql<span class="token operator">></span>
</span></code></pre>
<h3 id="옵션-추가">옵션 추가</h3>
<p>MySQL 서버는 항상 실행되어 있어야 하므로 데몬 모드로 실행하는 것이 일반적이다. 또한, 컨테이너에 접근하기 쉽게 이름을 지정할 수 있다.
이미 실행 중인 컨테이너를 정지하고 삭제한 후, 몇 가지 옵션을 추가하여 새로 띄운다.</p>
<pre class="language-shell"><code class="language-shell code-highlight"><span class="code-line">$ <span class="token function">docker</span> <span class="token function">kill</span> musing_dewdney
</span><span class="code-line">
</span><span class="code-line">$ <span class="token function">docker</span> <span class="token function">rm</span> musing_dewdney
</span><span class="code-line">
</span><span class="code-line">$ <span class="token function">docker</span> run <span class="token parameter variable">--name</span> mysql <span class="token parameter variable">-e</span> <span class="token assign-left variable">MYSQL_ROOT_PASSWORD</span><span class="token operator">=</span><span class="token number">1234</span> <span class="token parameter variable">-d</span> mysql
</span></code></pre>
<p>성공적으로 실행되었다면, 아까와 같이 컨테이너 내부에 접속하여 확인할 수 있다.</p>
<pre><code class="code-highlight"><span class="code-line">$ docker exec -it mysql bash
</span></code></pre></div><style data-emotion="css w48v5m">.css-w48v5m{margin-top:48px;padding-top:32px;border-top:1px solid #e5e5e5;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:8px;}</style><div class="MuiBox-root css-w48v5m"><style data-emotion="css ahjzb8">.css-ahjzb8{margin:0;font-size:0.8125rem;line-height:1.5;font-weight:400;color:#a3a3a3;vertical-align:middle;}</style><span class="MuiTypography-root MuiTypography-micro css-ahjzb8">Tags</span><style data-emotion="css 30jlqd">.css-30jlqd{padding-left:16px;padding-right:16px;margin-right:8px;border-radius:8px;background-color:whitesmoke;}</style><code class="MuiBox-root css-30jlqd"><style data-emotion="css 1iihwok">.css-1iihwok{margin:0;font-size:1rem;line-height:1.7;font-weight:400;font-family:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#171717;}</style><span class="MuiTypography-root MuiTypography-body1 css-1iihwok">MYSQL_ALLOW_EMPTY_PASSWORD</span></code><code class="MuiBox-root css-30jlqd"><span class="MuiTypography-root MuiTypography-body1 css-1iihwok">MYSQL_RANDOM_ROOT_PASSWORD</span></code><code class="MuiBox-root css-30jlqd"><span class="MuiTypography-root MuiTypography-body1 css-1iihwok">MYSQL_ROOT_PASSWORD</span></code><code class="MuiBox-root css-30jlqd"><span class="MuiTypography-root MuiTypography-body1 css-1iihwok">container</span></code><code class="MuiBox-root css-30jlqd"><span class="MuiTypography-root MuiTypography-body1 css-1iihwok">docker</span></code><code class="MuiBox-root css-30jlqd"><span class="MuiTypography-root MuiTypography-body1 css-1iihwok">mysql</span></code></div><style data-emotion="css 13hhewf">.css-13hhewf{margin-top:64px;padding-top:48px;border-top:1px solid #e5e5e5;}</style><div class="MuiBox-root css-13hhewf"><div data-orb-container="true" data-widget-type="comments" data-post-slug="mysql-dockerize"></div></div></article></div></main><!--$!--><template data-dgst="NEXT_DYNAMIC_NO_SSR_CODE"></template><!--/$--><script src="/_next/static/chunks/webpack-10e31400734e1857.js" async=""></script><script src="/_next/static/chunks/2443530c-0538301a504b83cf.js" async=""></script><script src="/_next/static/chunks/488-c0b34e96c35b33f7.js" async=""></script><script src="/_next/static/chunks/main-app-98d28d7655df5891.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/5624dea08047460b.css\",{\"as\":\"style\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/_next/static/css/ed65a566c9c7159d.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"4:I{\"id\":\"8827\",\"chunks\":[\"272:static/chunks/webpack-10e31400734e1857.js\",\"667:static/chunks/2443530c-0538301a504b83cf.js\",\"488:static/chunks/488-c0b34e96c35b33f7.js\"],\"name\":\"\",\"async\":false}\n6:I{\"id\":\"9126\",\"chunks\":[\"272:static/chunks/webpack-10e31400734e1857.js\",\"667:static/chunks/2443530c-0538301a504b83cf.js\",\"488:static/chunks/488-c0b34e96c35b33f7.js\"],\"name\":\"\",\"async\":false}\n7:I{\"id\":\"6886\",\"chunks\":[\"771:static/chunks/771-4a62562d40204820.js\",\"846:static/chunks/846-5374114718c3ba3f.js\",\"218:static/"])</script><script>self.__next_f.push([1,"chunks/218-24e2ed3a86df3181.js\",\"185:static/chunks/app/layout-e8c4c155fa8e4ac6.js\"],\"name\":\"\",\"async\":false}\n9:I{\"id\":\"4463\",\"chunks\":[\"272:static/chunks/webpack-10e31400734e1857.js\",\"667:static/chunks/2443530c-0538301a504b83cf.js\",\"488:static/chunks/488-c0b34e96c35b33f7.js\"],\"name\":\"\",\"async\":false}\na:I{\"id\":\"1010\",\"chunks\":[\"272:static/chunks/webpack-10e31400734e1857.js\",\"667:static/chunks/2443530c-0538301a504b83cf.js\",\"488:static/chunks/488-c0b34e96c35b33f7.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/5624dea08047460b.css\",\"precedence\":\"next\"}]],[\"$\",\"$L4\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/mysql-dockerize\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"mysql-dockerize\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"mysql-dockerize\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[\"$L5\",null],\"globalErrorComponent\":\"$6\",\"notFound\":[\"$\",\"$L7\",null,{\"params\":{},\"children\":[\"$L8\",\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}],\"asNotFound\":false,\"children\":[[\"$\",\"$L7\",null,{\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",[\"slug\",\"mysql-dockerize\",\"d\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$Lb\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":\\\"mysql-dockerize\\\"}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/ed65a566c9c7159d.css\",\"precedence\":\"next\"}]]}],null],\"segment\":[\"slug\",\"mysql-dockerize\",\"d\"]},\"styles\":[]}],\"segment\":\"posts\"},\"styles\":[]}],\"params\":{}}],null]}]]\n"])</script><script>self.__next_f.push([1,"c:I{\"id\":\"4970\",\"chunks\":[\"771:static/chunks/771-4a62562d40204820.js\",\"333:static/chunks/app/posts/[slug]/page-badc3e4118604748.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"b:[\"$\",\"$Lc\",null,{\"post\":{\"slug\":\"mysql-dockerize\",\"meta\":{\"title\":\"mysql dockerize(1) - 도커로 mysql container 띄우기\",\"date\":\"2021/11/07\",\"description\":\"로컬 환경을 안전하게 보호하기 위해 MySQL을 도커로 격리하여 실행하는 과정을 기록한다.\",\"tags\":[\"MYSQL_ALLOW_EMPTY_PASSWORD\",\"MYSQL_RANDOM_ROOT_PASSWORD\",\"MYSQL_ROOT_PASSWORD\",\"container\",\"docker\",\"mysql\"],\"thumbnail\":\"assets/images/posts/thumbnails/mysql-dockerize.jpeg\"},\"content\":\"\\n최근 작업 중 DB 스키마 변경이 로컬 개발 환경에 영향을 미치는 일이 자주 발생했다. 이를 방지하기 위해 로컬에서 실행 중인 MySQL을 도커로 격리하여 실행하기로 했다.\\n\\n## 시작점\\n\\n현재 사용 중인 DB는 MySQL이며, Ruby on Rails(RoR) 프로젝트를 진행 중이다. 로컬 환경에 MySQL 서버가 설치되어 있고, Docker는 이미 설치되어 있다.\\n\\n## 도커로 mysql container 띄우기\\n\\n### mysql 이미지 가져오기\\n\\n먼저 MySQL 이미지를 가져온다.\\n\\n```shell\\n$ docker pull mysql\\n\\nUsing default tag: latest\\nlatest: Pulling from library/mysql\\n...\\n...\\nDigest: ...\\nStatus: Downloaded newer image for mysql:latest\\ndocker.io/library/mysql:latest\\n```\\n\\nLTS 버전의 MySQL 이미지가 로드된다.\\n\\n### mysql 이미지를 컨테이너로 실행하기\\n\\n로드한 이미지를 컨테이너로 실행해본다.\\n\\n```shell\\n$ docker run mysql\\n\\n2021-11-07 07:55:25+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.27-1debian10 started.\\n2021-11-07 07:55:25+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'\\n2021-11-07 07:55:25+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.27-1debian10 started.\\n2021-11-07 07:55:25+00:00 [ERROR] [Entrypoint]: Database is uninitialized and password option is not specified\\n    You need to specify one of the following:\\n    - MYSQL_ROOT_PASSWORD\\n    - MYSQL_ALLOW_EMPTY_PASSWORD\\n    - MYSQL_RANDOM_ROOT_PASSWORD\\n```\\n\\n에러가 발생한다. MySQL 컨테이너는 루트 사용자의 비밀번호 설정 방법을 명시해야 한다. 아래 세 가지 옵션 중 하나를 선택해 컨테이너의 환경 변수로 전달한다.\\n\\n```shell\\n$ docker run mysql -e MYSQL_ROOT_PASSWORD=1234\\n# 또는\\n$ docker run mysql -e MYSQL_ALLOW_EMPTY_PASSWORD=abcd\\n# 또는\\n$ docker run mysql -e MYSQL_RANDOM_ROOT_PASSWORD=abcd\\n```\\n\\n루트 비밀번호를 지정해주었다. 비밀번호를 설정하지 않는 MYSQL_ALLOW_EMPTY_PASSWORD나 MYSQL_RANDOM_ROOT_PASSWORD 옵션도 환경 변수에 값을 지정해줘야 동작한다. 실제로 해당 값이 영향을 미치지는 않는다.\\n\\n랜덤 비밀번호 옵션을 사용하면 실행 로그에 비밀번호가 표시된다.\\n\\n```shell\\n2021-11-07 07:55:40+00:00 [Note] [Entrypoint]: Entrypoint script for MySQL Server 8.0.27-1debian10 started.\\n2021-11-07 07:55:40+00:00 [Note] [Entrypoint]: Switching to dedicated user 'mysql'\\n...\\n...\\n2021-11-07 07:55:48+00:00 [Note] [Entrypoint]: GENERATED ROOT PASSWORD: ojai1toovee3jahC4ooh7on8ahjoo0ji\\n...\\n2021-11-07 07:55:50+00:00 [Note] [Entrypoint]: MySQL init process done. Ready for start up.\\n...\\n2021-11-07T07:55:51.690474Z 0 [System] [MY-011323] [Server] X Plugin ready for connections. Bind-address: '::' port: 33060, socket: /var/run/mysqld/mysqlx.sock\\n2021-11-07T07:55:51.690582Z 0 [System] [MY-010931] [Server] /usr/sbin/mysqld: ready for connections. Version: '8.0.27'  socket: '/var/run/mysqld/mysqld.sock'  port: 3306  MySQL Community Server - GPL.\\n```\\n\\n컨테이너가 정상적으로 실행되었는지 확인한다.\\n\\n```shell\\n$ docker ps\\n\\nCONTAINER ID   IMAGE      COMMAND                  CREATED         STATUS          PORTS                    NAMES\\nddb780457980   mysql      \\\"docker-entrypoint.s…\\\"   4 minutes ago   Up 4 minutes    3306/tcp, 33060/tcp      musing_dewdney\\n```\\n\\n### 컨테이너 실행 결과 확인하기\\n\\n터미널을 하나 더 열어 방금 띄운 MySQL 컨테이너에 접속할 수 있다. 지정한 비밀번호로 MySQL 클라이언트에 접속해본다.\\n\\n```shell\\n$ docker exec -it musing_dewdney bash\\n\\nroot@ddb780457980:/# mysql -uroot -p1234\\n\\nmysql: [Warning] Using a password on the command line interface can be insecure.\\nWelcome to the MySQL monitor.  Commands end with ; or \\\\g.\\nYour MySQL connection id is 9\\nServer version: 8.0.27 MySQL Community Server - GPL\\n\\nCopyright (c) 2000, 2021, Oracle and/or its affiliates.\\n\\nOracle is a registered trademark of Oracle Corporation and/or its\\naffiliates. Other names may be trademarks of their respective\\nowners.\\n\\nType 'help;' or '\\\\h' for help. Type '\\\\c' to clear the current input statement.\\n\\nmysql\u003e\\n```\\n\\n### 옵션 추가\\n\\nMySQL 서버는 항상 실행되어 있어야 하므로 데몬 모드로 실행하는 것이 일반적이다. 또한, 컨테이너에 접근하기 쉽게 이름을 지정할 수 있다.\\n이미 실행 중인 컨테이너를 정지하고 삭제한 후, 몇 가지 옵션을 추가하여 새로 띄운다.\\n\\n```shell\\n$ docker kill musing_dewdney\\n\\n$ docker rm musing_dewdney\\n\\n$ docker run --name mysql -e MYSQL_ROOT_PASSWORD=1234 -d mysql\\n```\\n\\n성공적으로 실행되었다면, 아까와 같이 컨테이너 내부에 접속하여 확인할 수 있다.\\n\\n```\\n$ docker exec -it mysql bash\\n```\\n\"},\"meta\":{\"title\":\"mysql dockerize(1) - 도커로 mysql container 띄우기\",\"date\":\"2021/11/07\",\"description\":\"로컬 환경을 안전하게 보호하기 위해 MySQL을 도커로 격리하여 실행하는 과정을 기록한다.\",\"tags\":[\"MYSQL_ALLOW_EMPTY_PASSWORD\",\"MYSQL_RANDOM_ROOT_PASSWORD\",\"MYSQL_ROOT_PASSWORD\",\"container\",\"docker\",\"mysql\"],\"thumbnail\":\"assets/images/posts/thumbnails/mysql-dockerize.jpeg\"},\"content\":\"\u003cp\u003e최근 작업 중 DB 스키마 변경이 로컬 개발 환경에 영향을 미치는 일이 자주 발생했다. 이를 방지하기 위해 로컬에서 실행 중인 MySQL을 도커로 격리하여 실행하기로 했다.\u003c/p\u003e\\n\u003ch2 id=\\\"시작점\\\" class=\\\"heading\\\"\u003e시작점\u003c/h2\u003e\\n\u003cp\u003e현재 사용 중인 DB는 MySQL이며, Ruby on Rails(RoR) 프로젝트를 진행 중이다. 로컬 환경에 MySQL 서버가 설치되어 있고, Docker는 이미 설치되어 있다.\u003c/p\u003e\\n\u003ch2 id=\\\"도커로-mysql-container-띄우기\\\" class=\\\"heading\\\"\u003e도커로 mysql container 띄우기\u003c/h2\u003e\\n\u003ch3 id=\\\"mysql-이미지-가져오기\\\"\u003emysql 이미지 가져오기\u003c/h3\u003e\\n\u003cp\u003e먼저 MySQL 이미지를 가져온다.\u003c/p\u003e\\n\u003cpre class=\\\"language-shell\\\"\u003e\u003ccode class=\\\"language-shell code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e$ \u003cspan class=\\\"token function\\\"\u003edocker\u003c/span\u003e pull mysql\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eUsing default tag: latest\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003elatest: Pulling from library/mysql\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e..\u003c/span\u003e.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e..\u003c/span\u003e.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eDigest: \u003cspan class=\\\"token punctuation\\\"\u003e..\u003c/span\u003e.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eStatus: Downloaded newer image \u003cspan class=\\\"token keyword\\\"\u003efor\u003c/span\u003e mysql:latest\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003edocker.io/library/mysql:latest\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003eLTS 버전의 MySQL 이미지가 로드된다.\u003c/p\u003e\\n\u003ch3 id=\\\"mysql-이미지를-컨테이너로-실행하기\\\"\u003emysql 이미지를 컨테이너로 실행하기\u003c/h3\u003e\\n\u003cp\u003e로드한 이미지를 컨테이너로 실행해본다.\u003c/p\u003e\\n\u003cpre class=\\\"language-shell\\\"\u003e\u003ccode class=\\\"language-shell code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e$ \u003cspan class=\\\"token function\\\"\u003edocker\u003c/span\u003e run mysql\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token number\\\"\u003e2021\u003c/span\u003e-11-07 07:55:25+00:00 \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eNote\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eEntrypoint\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e: Entrypoint script \u003cspan class=\\\"token keyword\\\"\u003efor\u003c/span\u003e MySQL Server \u003cspan class=\\\"token number\\\"\u003e8.0\u003c/span\u003e.27-1debian10 started.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token number\\\"\u003e2021\u003c/span\u003e-11-07 07:55:25+00:00 \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eNote\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eEntrypoint\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e: Switching to dedicated user \u003cspan class=\\\"token string\\\"\u003e'mysql'\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token number\\\"\u003e2021\u003c/span\u003e-11-07 07:55:25+00:00 \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eNote\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eEntrypoint\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e: Entrypoint script \u003cspan class=\\\"token keyword\\\"\u003efor\u003c/span\u003e MySQL Server \u003cspan class=\\\"token number\\\"\u003e8.0\u003c/span\u003e.27-1debian10 started.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token number\\\"\u003e2021\u003c/span\u003e-11-07 07:55:25+00:00 \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eERROR\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eEntrypoint\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e: Database is uninitialized and password option is not specified\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    You need to specify one of the following:\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    - MYSQL_ROOT_PASSWORD\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    - MYSQL_ALLOW_EMPTY_PASSWORD\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    - MYSQL_RANDOM_ROOT_PASSWORD\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e에러가 발생한다. MySQL 컨테이너는 루트 사용자의 비밀번호 설정 방법을 명시해야 한다. 아래 세 가지 옵션 중 하나를 선택해 컨테이너의 환경 변수로 전달한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-shell\\\"\u003e\u003ccode class=\\\"language-shell code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e$ \u003cspan class=\\\"token function\\\"\u003edocker\u003c/span\u003e run mysql \u003cspan class=\\\"token parameter variable\\\"\u003e-e\u003c/span\u003e \u003cspan class=\\\"token assign-left variable\\\"\u003eMYSQL_ROOT_PASSWORD\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e\u003cspan class=\\\"token number\\\"\u003e1234\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e# 또는\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e$ \u003cspan class=\\\"token function\\\"\u003edocker\u003c/span\u003e run mysql \u003cspan class=\\\"token parameter variable\\\"\u003e-e\u003c/span\u003e \u003cspan class=\\\"token assign-left variable\\\"\u003eMYSQL_ALLOW_EMPTY_PASSWORD\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003eabcd\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e# 또는\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e$ \u003cspan class=\\\"token function\\\"\u003edocker\u003c/span\u003e run mysql \u003cspan class=\\\"token parameter variable\\\"\u003e-e\u003c/span\u003e \u003cspan class=\\\"token assign-left variable\\\"\u003eMYSQL_RANDOM_ROOT_PASSWORD\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003eabcd\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e루트 비밀번호를 지정해주었다. 비밀번호를 설정하지 않는 MYSQL_ALLOW_EMPTY_PASSWORD나 MYSQL_RANDOM_ROOT_PASSWORD 옵션도 환경 변수에 값을 지정해줘야 동작한다. 실제로 해당 값이 영향을 미치지는 않는다.\u003c/p\u003e\\n\u003cp\u003e랜덤 비밀번호 옵션을 사용하면 실행 로그에 비밀번호가 표시된다.\u003c/p\u003e\\n\u003cpre class=\\\"language-shell\\\"\u003e\u003ccode class=\\\"language-shell code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token number\\\"\u003e2021\u003c/span\u003e-11-07 07:55:40+00:00 \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eNote\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eEntrypoint\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e: Entrypoint script \u003cspan class=\\\"token keyword\\\"\u003efor\u003c/span\u003e MySQL Server \u003cspan class=\\\"token number\\\"\u003e8.0\u003c/span\u003e.27-1debian10 started.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token number\\\"\u003e2021\u003c/span\u003e-11-07 07:55:40+00:00 \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eNote\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eEntrypoint\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e: Switching to dedicated user \u003cspan class=\\\"token string\\\"\u003e'mysql'\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e..\u003c/span\u003e.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e..\u003c/span\u003e.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token number\\\"\u003e2021\u003c/span\u003e-11-07 07:55:48+00:00 \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eNote\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eEntrypoint\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e: GENERATED ROOT PASSWORD: ojai1toovee3jahC4ooh7on8ahjoo0ji\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e..\u003c/span\u003e.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token number\\\"\u003e2021\u003c/span\u003e-11-07 07:55:50+00:00 \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eNote\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eEntrypoint\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e: MySQL init process done. Ready \u003cspan class=\\\"token keyword\\\"\u003efor\u003c/span\u003e start up.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e..\u003c/span\u003e.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token number\\\"\u003e2021\u003c/span\u003e-11-07T07:55:51.690474Z \u003cspan class=\\\"token number\\\"\u003e0\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eSystem\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eMY-011323\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eServer\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e X Plugin ready \u003cspan class=\\\"token keyword\\\"\u003efor\u003c/span\u003e connections. Bind-address: \u003cspan class=\\\"token string\\\"\u003e'::'\u003c/span\u003e port: \u003cspan class=\\\"token number\\\"\u003e33060\u003c/span\u003e, socket: /var/run/mysqld/mysqlx.sock\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token number\\\"\u003e2021\u003c/span\u003e-11-07T07:55:51.690582Z \u003cspan class=\\\"token number\\\"\u003e0\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eSystem\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eMY-010931\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eServer\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e /usr/sbin/mysqld: ready \u003cspan class=\\\"token keyword\\\"\u003efor\u003c/span\u003e connections. Version: \u003cspan class=\\\"token string\\\"\u003e'8.0.27'\u003c/span\u003e  socket: \u003cspan class=\\\"token string\\\"\u003e'/var/run/mysqld/mysqld.sock'\u003c/span\u003e  port: \u003cspan class=\\\"token number\\\"\u003e3306\u003c/span\u003e  MySQL Community Server - GPL.\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e컨테이너가 정상적으로 실행되었는지 확인한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-shell\\\"\u003e\u003ccode class=\\\"language-shell code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e$ \u003cspan class=\\\"token function\\\"\u003edocker\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003eps\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eCONTAINER ID   IMAGE      COMMAND                  CREATED         STATUS          PORTS                    NAMES\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eddb780457980   mysql      \u003cspan class=\\\"token string\\\"\u003e\\\"docker-entrypoint.s…\\\"\u003c/span\u003e   \u003cspan class=\\\"token number\\\"\u003e4\u003c/span\u003e minutes ago   Up \u003cspan class=\\\"token number\\\"\u003e4\u003c/span\u003e minutes    \u003cspan class=\\\"token number\\\"\u003e3306\u003c/span\u003e/tcp, \u003cspan class=\\\"token number\\\"\u003e33060\u003c/span\u003e/tcp      musing_dewdney\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003ch3 id=\\\"컨테이너-실행-결과-확인하기\\\"\u003e컨테이너 실행 결과 확인하기\u003c/h3\u003e\\n\u003cp\u003e터미널을 하나 더 열어 방금 띄운 MySQL 컨테이너에 접속할 수 있다. 지정한 비밀번호로 MySQL 클라이언트에 접속해본다.\u003c/p\u003e\\n\u003cpre class=\\\"language-shell\\\"\u003e\u003ccode class=\\\"language-shell code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e$ \u003cspan class=\\\"token function\\\"\u003edocker\u003c/span\u003e \u003cspan class=\\\"token builtin class-name\\\"\u003eexec\u003c/span\u003e \u003cspan class=\\\"token parameter variable\\\"\u003e-it\u003c/span\u003e musing_dewdney \u003cspan class=\\\"token function\\\"\u003ebash\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eroot@ddb780457980:/\u003cspan class=\\\"token comment\\\"\u003e# mysql -uroot -p1234\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003emysql: \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003eWarning\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e Using a password on the \u003cspan class=\\\"token builtin class-name\\\"\u003ecommand\u003c/span\u003e line interface can be insecure.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eWelcome to the MySQL monitor.  Commands end with \u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e or \u003cspan class=\\\"token punctuation\\\"\u003e\\\\\u003c/span\u003eg.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eYour MySQL connection \u003cspan class=\\\"token function\\\"\u003eid\u003c/span\u003e is \u003cspan class=\\\"token number\\\"\u003e9\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eServer version: \u003cspan class=\\\"token number\\\"\u003e8.0\u003c/span\u003e.27 MySQL Community Server - GPL\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eCopyright \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ec\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e2000\u003c/span\u003e, \u003cspan class=\\\"token number\\\"\u003e2021\u003c/span\u003e, Oracle and/or its affiliates.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eOracle is a registered trademark of Oracle Corporation and/or its\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eaffiliates. Other names may be trademarks of their respective\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eowners.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eType \u003cspan class=\\\"token string\\\"\u003e'help;'\u003c/span\u003e or \u003cspan class=\\\"token string\\\"\u003e'\\\\h'\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efor\u003c/span\u003e help. Type \u003cspan class=\\\"token string\\\"\u003e'\\\\c'\u003c/span\u003e to \u003cspan class=\\\"token function\\\"\u003eclear\u003c/span\u003e the current input statement.\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003emysql\u003cspan class=\\\"token operator\\\"\u003e\u003e\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003ch3 id=\\\"옵션-추가\\\"\u003e옵션 추가\u003c/h3\u003e\\n\u003cp\u003eMySQL 서버는 항상 실행되어 있어야 하므로 데몬 모드로 실행하는 것이 일반적이다. 또한, 컨테이너에 접근하기 쉽게 이름을 지정할 수 있다.\\n이미 실행 중인 컨테이너를 정지하고 삭제한 후, 몇 가지 옵션을 추가하여 새로 띄운다.\u003c/p\u003e\\n\u003cpre class=\\\"language-shell\\\"\u003e\u003ccode class=\\\"language-shell code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e$ \u003cspan class=\\\"token function\\\"\u003edocker\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003ekill\u003c/span\u003e musing_dewdney\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e$ \u003cspan class=\\\"token function\\\"\u003edocker\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003erm\u003c/span\u003e musing_dewdney\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e$ \u003cspan class=\\\"token function\\\"\u003edocker\u003c/span\u003e run \u003cspan class=\\\"token parameter variable\\\"\u003e--name\u003c/span\u003e mysql \u003cspan class=\\\"token parameter variable\\\"\u003e-e\u003c/span\u003e \u003cspan class=\\\"token assign-left variable\\\"\u003eMYSQL_ROOT_PASSWORD\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e\u003cspan class=\\\"token number\\\"\u003e1234\u003c/span\u003e \u003cspan class=\\\"token parameter variable\\\"\u003e-d\u003c/span\u003e mysql\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e성공적으로 실행되었다면, 아까와 같이 컨테이너 내부에 접속하여 확인할 수 있다.\u003c/p\u003e\\n\u003cpre\u003e\u003ccode class=\\\"code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e$ docker exec -it mysql bash\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\"}]\n"])</script><script>self.__next_f.push([1,"8:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],null,null,null,null,null,null,null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,null]\n"])</script><script>self.__next_f.push([1,"5:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"mysql dockerize(1) - 도커로 mysql container 띄우기 - Bran's codeverse\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"로컬 환경을 안전하게 보호하기 위해 MySQL을 도커로 격리하여 실행하는 과정을 기록한다.\"}],null,null,null,null,null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,[null,[\"$\",\"meta\",null,{\"property\":\"og:title\",\"content\":\"mysql dockerize(1) - 도커로 mysql container 띄우기 - Bran's codeverse\"}],[\"$\",\"meta\",null,{\"property\":\"og:description\",\"content\":\"로컬 환경을 안전하게 보호하기 위해 MySQL을 도커로 격리하여 실행하는 과정을 기록한다.\"}],null,[\"$\",\"meta\",null,{\"property\":\"og:site_name\",\"content\":\"Bran's codeverse\"}],null,null,null,[[[\"$\",\"meta\",null,{\"property\":\"og:image\",\"content\":\"http://localhost:3000/assets/images/posts/thumbnails/mysql-dockerize.jpeg\"}]]],null,null,null,null,null,null,[[\"$\",\"meta\",null,{\"property\":\"og:type\",\"content\":\"article\"}],null,null,null,null,null,null]],[[\"$\",\"meta\",null,{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:site\",\"content\":\"@codeverse\"}],null,null,null,[\"$\",\"meta\",null,{\"name\":\"twitter:title\",\"content\":\"mysql dockerize(1) - 도커로 mysql container 띄우기 - Bran's codeverse\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:description\",\"content\":\"로컬 환경을 안전하게 보호하기 위해 MySQL을 도커로 격리하여 실행하는 과정을 기록한다.\"}],[[[\"$\",\"meta\",null,{\"name\":\"twitter:image\",\"content\":\"http://localhost:3000/assets/images/posts/thumbnails/mysql-dockerize.jpeg\"}]]],null,null],null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/icon.svg?43070ac23468c58b\",\"type\":\"image/svg+xml\",\"sizes\":\"32x32\"}]],[],null]]\n"])</script></body></html>