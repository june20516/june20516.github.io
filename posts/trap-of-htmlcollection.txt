1:HL["/_next/static/css/0ad9df217a839d7d.css",{"as":"style"}]
0:[[["",{"children":["posts",{"children":[["slug","trap-of-htmlcollection","d"],{"children":["__PAGE__?{\"slug\":\"trap-of-htmlcollection\"}",{}]}]}]},"$undefined","$undefined",true],"$L2",[[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/0ad9df217a839d7d.css","precedence":"next"}]],["$L3",null]]]]
4:HL["/_next/static/css/a99ce192272c1300.css",{"as":"style"}]
5:I{"id":"6886","chunks":["771:static/chunks/771-437baa63a3bc2c51.js","846:static/chunks/846-5374114718c3ba3f.js","218:static/chunks/218-24e2ed3a86df3181.js","185:static/chunks/app/layout-1a9b501ae2e54936.js"],"name":"","async":false}
6:I{"id":"4463","chunks":["272:static/chunks/webpack-932dee968bc237b7.js","667:static/chunks/2443530c-0538301a504b83cf.js","488:static/chunks/488-c0b34e96c35b33f7.js"],"name":"","async":false}
7:I{"id":"1010","chunks":["272:static/chunks/webpack-932dee968bc237b7.js","667:static/chunks/2443530c-0538301a504b83cf.js","488:static/chunks/488-c0b34e96c35b33f7.js"],"name":"","async":false}
2:[["$","$L5",null,{"children":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":[["$","$L6",null,{"parallelRouterKey":"children","segmentPath":["children","posts","children",["slug","trap-of-htmlcollection","d"],"children"],"error":"$undefined","errorStyles":"$undefined","loading":"$undefined","loadingStyles":"$undefined","hasLoading":false,"template":["$","$L7",null,{}],"templateStyles":"$undefined","notFound":"$undefined","notFoundStyles":"$undefined","childProp":{"current":["$L8",null],"segment":"__PAGE__?{\"slug\":\"trap-of-htmlcollection\"}"},"styles":[["$","link","0",{"rel":"stylesheet","href":"/_next/static/css/a99ce192272c1300.css","precedence":"next"}]]}],null],"segment":["slug","trap-of-htmlcollection","d"]},"styles":[]}],"segment":"posts"},"styles":[]}],"params":{}}],null]
3:[[["$","meta",null,{"charSet":"utf-8"}],["$","title",null,{"children":"HTMLCollection의 함정 - Bran's codeverse"}],["$","meta",null,{"name":"description","content":"클래스를 기준으로 스크립트를 작성하다가 맞닥트린 예상치 못한 문제"}],null,null,null,null,null,null,null,null,["$","meta",null,{"name":"viewport","content":"width=device-width, initial-scale=1"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,[null,["$","meta",null,{"property":"og:title","content":"HTMLCollection의 함정 - Bran's codeverse"}],["$","meta",null,{"property":"og:description","content":"클래스를 기준으로 스크립트를 작성하다가 맞닥트린 예상치 못한 문제"}],null,["$","meta",null,{"property":"og:site_name","content":"Bran's codeverse"}],null,null,null,[[["$","meta",null,{"property":"og:image","content":"http://localhost:3000/assets/images/posts/thumbnails/trap-of-htmlcollection.jpeg"}]]],null,null,null,null,null,null,[["$","meta",null,{"property":"og:type","content":"article"}],null,null,null,null,null,null]],[["$","meta",null,{"name":"twitter:card","content":"summary_large_image"}],["$","meta",null,{"name":"twitter:site","content":"@codeverse"}],null,null,null,["$","meta",null,{"name":"twitter:title","content":"HTMLCollection의 함정 - Bran's codeverse"}],["$","meta",null,{"name":"twitter:description","content":"클래스를 기준으로 스크립트를 작성하다가 맞닥트린 예상치 못한 문제"}],[[["$","meta",null,{"name":"twitter:image","content":"http://localhost:3000/assets/images/posts/thumbnails/trap-of-htmlcollection.jpeg"}]]],null,null],null,[null,[["$","link",null,{"rel":"icon","href":"/icon.svg?43070ac23468c58b","type":"image/svg+xml","sizes":"32x32"}]],[],null]]
9:I{"id":"4970","chunks":["771:static/chunks/771-437baa63a3bc2c51.js","755:static/chunks/app/drafts/[slug]/page-bc349ef1a3e09d03.js"],"name":"","async":false}
8:["$","$L9",null,{"post":{"slug":"trap-of-htmlcollection","meta":{"title":"HTMLCollection의 함정","description":"클래스를 기준으로 스크립트를 작성하다가 맞닥트린 예상치 못한 문제","date":"2021/09/07","tags":["HTMLCollection","getElementsByClassName","nodeList","querySelectorAll()"],"categories":["dev","web"],"thumbnail":"assets/images/posts/thumbnails/trap-of-htmlcollection.jpeg"},"content":"\n```html\n<div class=\"wrapper lunchtime-template\">\n  <p class=\"title\">\n    <span class=\"text-primary name-slot\">OOO</span>\n    의 점심시간\n  </p>\n  <ul>\n    <li class=\"text-info history-slot\"></li>\n    <li class=\"text-info history-slot\"></li>\n    <li class=\"text-info history-slot\"></li>\n    <li class=\"text-info history-slot\"></li>\n  </ul>\n</div>\n```\n\n위와 같은 형태의 HTML 템플릿에 데이터를 넣는 작업이었다. 스크립트를 작성하면서, 먼저 알맞은 태그 요소를 찾아 데이터를 넣고, 템플릿으로 활용했던 클래스 이름들을 제거하려고 했다.\n\n```javascript\nconst data = {\n  bran: ['철판 볶음밥을 먹었다', '커피를 주문했다', '쿠키도 구매했다', '양치를 했다'],\n};\n\nlet lunchTimeDiv = document.querySelector('.lunchtime-template').cloneNode(true);\nlunchTimeDiv.classList.remove('lunchtime-template');\n\nlet name = Object.keys(data)[0];\nlet nameSlot = lunchTimeDiv.querySelector('.name-slot');\nnameSlot.innerHTML = name;\nnameSlot.classList.remove('name-slot');\n```\n\n여기까지는 별 문제 없었지만, 이후에 문제가 발생했다.\n\n```javascript\nconst histories = data[name];\nlet historySlots = lunchTimeDiv.getElementsByClassName('history-slot');\nfor (let idx = 0; idx < historySlots.length; idx++) {\n  slot = historySlots[idx];\n  slot.innerText = histories[idx];\n  slot.classList.remove('history-slot');\n}\n```\n\n스크립트로 처리된 결과는 기대와 달랐다.\n\n```html\n<div class=\"wrapper\">\n  <p class=\"title\">\n    <span class=\"text-primary\">bran</span>\n    의 점심시간\n  </p>\n  <ul>\n    <li class=\"text-info\">철판 볶음밥을 먹었다</li>\n    <li class=\"text-info history-slot\"></li>\n    <li class=\"text-info\">커피를 주문했다</li>\n    <li class=\"text-info history-slot\"></li>\n  </ul>\n</div>\n```\n\n코드가 기대한 대로 작동하지 않아 어리둥절했다. 간단한 코드에서 문제가 발생하리라 예상하지 못했지만, 분명히 어디선가 잘못된 부분이 있었다.\n고민 끝에, 루프 안에서 인덱스를 조절해야 했던 알고리즘 문제를 떠올리고 코드를 수정해 보았다.\n\n```javascript\nfor (let idx = 0; idx < histories.length; idx++) {\n  slot = historySlots[idx];\n  slot.innerText = histories[idx];\n  slot.classList.remove('history-slot');\n  idx -= 1;\n}\n```\n\n결과는 나왔지만, 뭔가 이상했다.\n\n```html\n<div class=\"wrapper\">\n  <p class=\"title\">\n    <span class=\"text-primary\">bran</span>\n    의 점심시간\n  </p>\n  <ul>\n    <li class=\"text-info\">철판 볶음밥을 먹었다</li>\n    <li class=\"text-info\">철판 볶음밥을 먹었다</li>\n    <li class=\"text-info\">철판 볶음밥을 먹었다</li>\n    <li class=\"text-info\">철판 볶음밥을 먹었다</li>\n  </ul>\n</div>\n```\n\n포문에서 발생한 문제는 어느 정도 해결됐지만, 데이터를 인덱스와 같이 순환해야 하므로 복잡성만 더 커졌을 뿐, 이 방식은 적절하지 않았다.\n근본적인 문제를 고민해보니, `historySlots`가 루프가 진행됨에 따라 변하고 있었다. 그래서 `historySlots`를 잡는 방식을 `getElementsByClassName`에서 `querySelectorAll`로 바꿔보기로 했다.\n\n```html\n<div class=\"wrapper lunchtime-template\">\n  <p class=\"title\">\n    <span class=\"text-primary name-slot\">OOO</span>\n    의 점심시간\n  </p>\n  <ul>\n    <li class=\"text-info history-slot\"></li>\n    <li class=\"text-info history-slot\"></li>\n    <li class=\"text-info history-slot\"></li>\n    <li class=\"text-info history-slot\"></li>\n  </ul>\n</div>\n\n<script>\n  const data = {\n    bran: ['철판 볶음밥을 먹었다', '커피를 주문했다', '쿠키도 구매했다', '양치를 했다'],\n  };\n  let lunchTimeDiv = document.querySelector('.lunchtime-template').cloneNode(true);\n  lunchTimeDiv.classList.remove('lunchtime-template');\n\n  let name = Object.keys(data)[0];\n  let nameSlot = lunchTimeDiv.querySelector('.name-slot');\n  nameSlot.innerHTML = name;\n  nameSlot.classList.remove('name-slot');\n  const histories = data[name];\n\n  // 이곳을 변경\n  let historySlots = lunchTimeDiv.querySelectorAll('.history-slot');\n\n  for (let idx = 0; idx < historySlots.length; idx++) {\n    slot = historySlots[idx];\n    slot.innerText = histories[idx];\n    slot.classList.remove('history-slot');\n  }\n</script>\n```\n\n드디어 의도대로 동작했다.\n\n```html\n<div class=\"wrapper\">\n  <p class=\"title\">\n    <span class=\"text-primary\">bran</span>\n    의 점심시간\n  </p>\n  <ul>\n    <li class=\"text-info\">철판 볶음밥을 먹었다</li>\n    <li class=\"text-info\">커피를 주문했다</li>\n    <li class=\"text-info\">쿠키도 구매했다</li>\n    <li class=\"text-info\">양치를 했다</li>\n  </ul>\n</div>\n```\n\n---\n\n`getElementsByClassName`은 `HTMLCollection`을 반환하고, `querySelectorAll`은 `NodeList`를 반환한다.\n\n```javascript\nlet historySlots1 = lunchTimeDiv.getElementsByClassName('history-slot');\nlet historySlots2 = lunchTimeDiv.querySelectorAll('.history-slot');\nconsole.log(historySlots1.toString()); // '[object HTMLCollection]'\nconsole.log(historySlots2.toString()); //  '[object NodeList]'\n```\n\n[HTMLCollection과 NodeList](https://dev.to/theoluyi/queryselector-vs-getelementsbyclassname-nodelist-vs-htmlcollection-30gg) 의 차이를 설명하는 좀 더 자세한 글을 첨부한다.\n\n간단하게 말하자면, HTMLCollection은 항상 현재 상황을 반영한다. 즉, 클래스 이름을 기준으로 요소들이 담기는데, 내가 클래스 이름을 지우면서 해당 컬렉션에서 제외된 것이다. 포문이 제대로 작동하지 않은 이유는 바로 이 때문이었다.\n\n더 나아가 HTMLCollection은 배열이 아닌 유사 배열이기 때문에 forEach 같은 배열 메서드를 사용할 수 없다. 하지만 객체 속성에 접근하듯이 .속성명 형식으로 접근이 가능하다. <sup>[ref](https://devsoyoung.github.io/posts/js-htmlcollection-nodelist)</sup>\n\n앞으로는 상황에 맞는 선택을 더 신중히 해야겠다.\n"},"meta":{"title":"HTMLCollection의 함정","description":"클래스를 기준으로 스크립트를 작성하다가 맞닥트린 예상치 못한 문제","date":"2021/09/07","tags":["HTMLCollection","getElementsByClassName","nodeList","querySelectorAll()"],"categories":["dev","web"],"thumbnail":"assets/images/posts/thumbnails/trap-of-htmlcollection.jpeg"},"content":"<pre class=\"language-html\"><code class=\"language-html code-highlight\"><span class=\"code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrapper lunchtime-template<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-primary name-slot<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>OOO<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    의 점심시간\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>p</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>ul</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info history-slot<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info history-slot<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info history-slot<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info history-slot<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>ul</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n</span></code></pre>\n<p>위와 같은 형태의 HTML 템플릿에 데이터를 넣는 작업이었다. 스크립트를 작성하면서, 먼저 알맞은 태그 요소를 찾아 데이터를 넣고, 템플릿으로 활용했던 클래스 이름들을 제거하려고 했다.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript code-highlight\"><span class=\"code-line\"><span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line\">  <span class=\"token literal-property property\">bran</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'철판 볶음밥을 먹었다'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'커피를 주문했다'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'쿠키도 구매했다'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'양치를 했다'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span><span class=\"code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">\n</span><span class=\"code-line\"><span class=\"token keyword\">let</span> lunchTimeDiv <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.lunchtime-template'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">cloneNode</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">lunchTimeDiv<span class=\"token punctuation\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'lunchtime-template'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">\n</span><span class=\"code-line\"><span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">keys</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\"><span class=\"token keyword\">let</span> nameSlot <span class=\"token operator\">=</span> lunchTimeDiv<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.name-slot'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">nameSlot<span class=\"token punctuation\">.</span><span class=\"token property-access\">innerHTML</span> <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">nameSlot<span class=\"token punctuation\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name-slot'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></code></pre>\n<p>여기까지는 별 문제 없었지만, 이후에 문제가 발생했다.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript code-highlight\"><span class=\"code-line\"><span class=\"token keyword\">const</span> histories <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\"><span class=\"token keyword\">let</span> historySlots <span class=\"token operator\">=</span> lunchTimeDiv<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getElementsByClassName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'history-slot'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\"><span class=\"token keyword control-flow\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> idx <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> idx <span class=\"token operator\">&#x3C;</span> historySlots<span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span><span class=\"token punctuation\">;</span> idx<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line\">  slot <span class=\"token operator\">=</span> historySlots<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">  slot<span class=\"token punctuation\">.</span><span class=\"token property-access\">innerText</span> <span class=\"token operator\">=</span> histories<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">  slot<span class=\"token punctuation\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'history-slot'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\"><span class=\"token punctuation\">}</span>\n</span></code></pre>\n<p>스크립트로 처리된 결과는 기대와 달랐다.</p>\n<pre class=\"language-html\"><code class=\"language-html code-highlight\"><span class=\"code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-primary<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>bran<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    의 점심시간\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>p</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>ul</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>철판 볶음밥을 먹었다<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info history-slot<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>커피를 주문했다<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info history-slot<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>ul</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n</span></code></pre>\n<p>코드가 기대한 대로 작동하지 않아 어리둥절했다. 간단한 코드에서 문제가 발생하리라 예상하지 못했지만, 분명히 어디선가 잘못된 부분이 있었다.\n고민 끝에, 루프 안에서 인덱스를 조절해야 했던 알고리즘 문제를 떠올리고 코드를 수정해 보았다.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript code-highlight\"><span class=\"code-line\"><span class=\"token keyword control-flow\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> idx <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> idx <span class=\"token operator\">&#x3C;</span> histories<span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span><span class=\"token punctuation\">;</span> idx<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span><span class=\"code-line\">  slot <span class=\"token operator\">=</span> historySlots<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">  slot<span class=\"token punctuation\">.</span><span class=\"token property-access\">innerText</span> <span class=\"token operator\">=</span> histories<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">  slot<span class=\"token punctuation\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'history-slot'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\">  idx <span class=\"token operator\">-=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\"><span class=\"token punctuation\">}</span>\n</span></code></pre>\n<p>결과는 나왔지만, 뭔가 이상했다.</p>\n<pre class=\"language-html\"><code class=\"language-html code-highlight\"><span class=\"code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-primary<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>bran<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    의 점심시간\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>p</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>ul</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>철판 볶음밥을 먹었다<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>철판 볶음밥을 먹었다<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>철판 볶음밥을 먹었다<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>철판 볶음밥을 먹었다<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>ul</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n</span></code></pre>\n<p>포문에서 발생한 문제는 어느 정도 해결됐지만, 데이터를 인덱스와 같이 순환해야 하므로 복잡성만 더 커졌을 뿐, 이 방식은 적절하지 않았다.\n근본적인 문제를 고민해보니, <code>historySlots</code>가 루프가 진행됨에 따라 변하고 있었다. 그래서 <code>historySlots</code>를 잡는 방식을 <code>getElementsByClassName</code>에서 <code>querySelectorAll</code>로 바꿔보기로 했다.</p>\n<pre class=\"language-html\"><code class=\"language-html code-highlight\"><span class=\"code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrapper lunchtime-template<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-primary name-slot<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>OOO<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    의 점심시간\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>p</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>ul</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info history-slot<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info history-slot<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info history-slot<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info history-slot<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>ul</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">\n</span><span class=\"code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>script</span><span class=\"token punctuation\">></span></span><span class=\"token script\"><span class=\"token language-javascript\">\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">  <span class=\"token keyword\">const</span> data <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">    <span class=\"token literal-property property\">bran</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">'철판 볶음밥을 먹었다'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'커피를 주문했다'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'쿠키도 구매했다'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'양치를 했다'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">  <span class=\"token keyword\">let</span> lunchTimeDiv <span class=\"token operator\">=</span> <span class=\"token dom variable\">document</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.lunchtime-template'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">cloneNode</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">  lunchTimeDiv<span class=\"token punctuation\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'lunchtime-template'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">  <span class=\"token keyword\">let</span> name <span class=\"token operator\">=</span> <span class=\"token known-class-name class-name\">Object</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">keys</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">  <span class=\"token keyword\">let</span> nameSlot <span class=\"token operator\">=</span> lunchTimeDiv<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelector</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.name-slot'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">  nameSlot<span class=\"token punctuation\">.</span><span class=\"token property-access\">innerHTML</span> <span class=\"token operator\">=</span> name<span class=\"token punctuation\">;</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">  nameSlot<span class=\"token punctuation\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'name-slot'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">  <span class=\"token keyword\">const</span> histories <span class=\"token operator\">=</span> data<span class=\"token punctuation\">[</span>name<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">  <span class=\"token comment\">// 이곳을 변경</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">  <span class=\"token keyword\">let</span> historySlots <span class=\"token operator\">=</span> lunchTimeDiv<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.history-slot'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">  <span class=\"token keyword control-flow\">for</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">let</span> idx <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span> idx <span class=\"token operator\">&#x3C;</span> historySlots<span class=\"token punctuation\">.</span><span class=\"token property-access\">length</span><span class=\"token punctuation\">;</span> idx<span class=\"token operator\">++</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">    slot <span class=\"token operator\">=</span> historySlots<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">    slot<span class=\"token punctuation\">.</span><span class=\"token property-access\">innerText</span> <span class=\"token operator\">=</span> histories<span class=\"token punctuation\">[</span>idx<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">    slot<span class=\"token punctuation\">.</span><span class=\"token property-access\">classList</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">'history-slot'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\">  <span class=\"token punctuation\">}</span>\n</span></span></span><span class=\"code-line\"><span class=\"token script\"><span class=\"token language-javascript\"></span></span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>script</span><span class=\"token punctuation\">></span></span>\n</span></code></pre>\n<p>드디어 의도대로 동작했다.</p>\n<pre class=\"language-html\"><code class=\"language-html code-highlight\"><span class=\"code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>div</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>wrapper<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>p</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>title<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>span</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-primary<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>bran<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>span</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    의 점심시간\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>p</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>ul</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>철판 볶음밥을 먹었다<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>커피를 주문했다<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>쿠키도 구매했다<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;</span>li</span> <span class=\"token attr-name\">class</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>text-info<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span>양치를 했다<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>li</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\">  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>ul</span><span class=\"token punctuation\">></span></span>\n</span><span class=\"code-line\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&#x3C;/</span>div</span><span class=\"token punctuation\">></span></span>\n</span></code></pre>\n<hr>\n<p><code>getElementsByClassName</code>은 <code>HTMLCollection</code>을 반환하고, <code>querySelectorAll</code>은 <code>NodeList</code>를 반환한다.</p>\n<pre class=\"language-javascript\"><code class=\"language-javascript code-highlight\"><span class=\"code-line\"><span class=\"token keyword\">let</span> historySlots1 <span class=\"token operator\">=</span> lunchTimeDiv<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">getElementsByClassName</span><span class=\"token punctuation\">(</span><span class=\"token string\">'history-slot'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\"><span class=\"token keyword\">let</span> historySlots2 <span class=\"token operator\">=</span> lunchTimeDiv<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">'.history-slot'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</span><span class=\"code-line\"><span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>historySlots1<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// '[object HTMLCollection]'</span>\n</span><span class=\"code-line\"><span class=\"token console class-name\">console</span><span class=\"token punctuation\">.</span><span class=\"token method function property-access\">log</span><span class=\"token punctuation\">(</span>historySlots2<span class=\"token punctuation\">.</span><span class=\"token method function property-access\">toString</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//  '[object NodeList]'</span>\n</span></code></pre>\n<p><a href=\"https://dev.to/theoluyi/queryselector-vs-getelementsbyclassname-nodelist-vs-htmlcollection-30gg\" target=\"_blank\" rel=\"noopener noreferer\">HTMLCollection과 NodeList</a> 의 차이를 설명하는 좀 더 자세한 글을 첨부한다.</p>\n<p>간단하게 말하자면, HTMLCollection은 항상 현재 상황을 반영한다. 즉, 클래스 이름을 기준으로 요소들이 담기는데, 내가 클래스 이름을 지우면서 해당 컬렉션에서 제외된 것이다. 포문이 제대로 작동하지 않은 이유는 바로 이 때문이었다.</p>\n<p>더 나아가 HTMLCollection은 배열이 아닌 유사 배열이기 때문에 forEach 같은 배열 메서드를 사용할 수 없다. 하지만 객체 속성에 접근하듯이 .속성명 형식으로 접근이 가능하다. <sup><a href=\"https://devsoyoung.github.io/posts/js-htmlcollection-nodelist\" target=\"_blank\" rel=\"noopener noreferer\">ref</a></sup></p>\n<p>앞으로는 상황에 맞는 선택을 더 신중히 해야겠다.</p>"}]
