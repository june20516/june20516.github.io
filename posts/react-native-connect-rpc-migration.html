<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><link rel="stylesheet" href="/_next/static/css/0ad9df217a839d7d.css" data-precedence="next"/><link rel="stylesheet" href="/_next/static/css/a99ce192272c1300.css" data-precedence="next"/><link rel="preload" as="style" href="https://cdn.jsdelivr.net/gh/june20516/orbithall@widget/v1.1.1/static/embed.css"/><link rel="preload" as="script" href="https://www.googletagmanager.com/gtag/js?id=G-Q587R5F0YL"/><link rel="preload" as="script" href="https://cdn.jsdelivr.net/gh/june20516/orbithall@widget/v1.1.1/static/embed.js"/><title>React Native에서 REST API를 Connect RPC로 마이그레이션하기 - Bran&#x27;s codeverse</title><meta name="description" content="axios를 버리고 타입 안전한 gRPC 세상으로"/><meta name="viewport" content="width=device-width, initial-scale=1"/><meta property="og:title" content="React Native에서 REST API를 Connect RPC로 마이그레이션하기 - Bran&#x27;s codeverse"/><meta property="og:description" content="axios를 버리고 타입 안전한 gRPC 세상으로"/><meta property="og:site_name" content="Bran&#x27;s codeverse"/><meta property="og:image" content="http://localhost:3000/assets/images/posts/thumbnails/react-native-connect-rpc-migration.png"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="@codeverse"/><meta name="twitter:title" content="React Native에서 REST API를 Connect RPC로 마이그레이션하기 - Bran&#x27;s codeverse"/><meta name="twitter:description" content="axios를 버리고 타입 안전한 gRPC 세상으로"/><meta name="twitter:image" content="http://localhost:3000/assets/images/posts/thumbnails/react-native-connect-rpc-migration.png"/><link rel="icon" href="/icon.svg?43070ac23468c58b" type="image/svg+xml" sizes="32x32"/><meta name="google-site-verification" content="i0Iq4sKjYlVS7Q9gq9KkCPl4hdoADOzOsTyFnCV24Os"/><style data-emotion="css-global 1mv6lxk">:root{--mui-palette-primary-main:#171717;--mui-palette-secondary-main:#737373;--mui-palette-info-main:#3b82f6;--mui-palette-error-main:#ef4444;--mui-palette-background-default:#ffffff;--mui-palette-action-active:#171717;--mui-palette-action-disabled:#d4d4d4;--mui-palette-text-primary:#171717;--mui-palette-text-secondary:#737373;--mui-palette-text-disabled:#d4d4d4;--mui-palette-divider:#e5e5e5;--mui-typography-fontFamily:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;}</style><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/june20516/orbithall@widget/v1.1.1/static/embed.css"/><script src="/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js" noModule=""></script></head><style data-emotion="css k186h9">.css-k186h9{min-height:100vh;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;background-color:#ffffff;}</style><body class="MuiBox-root css-k186h9"><style data-emotion="css 1vseziz">.css-1vseziz{position:-webkit-sticky;position:sticky;top:0;z-index:1000;border-bottom:1px solid #e5e5e5;background-color:#ffffff;overflow:hidden;}.css-1vseziz::before{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background-image:url(/assets/images/default-thumbnail.jpg);-webkit-background-size:120%;background-size:120%;-webkit-background-position:center;background-position:center;opacity:1;z-index:0;-webkit-animation:headerBackgroundFloat 300s ease-in-out infinite;animation:headerBackgroundFloat 300s ease-in-out infinite;}@-webkit-keyframes headerBackgroundFloat{0%,100%{-webkit-background-position:center top;background-position:center top;}50%{-webkit-background-position:center bottom;background-position:center bottom;}}@keyframes headerBackgroundFloat{0%,100%{-webkit-background-position:center top;background-position:center top;}50%{-webkit-background-position:center bottom;background-position:center bottom;}}.css-1vseziz::after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;background-color:#ffffff;opacity:0.65;z-index:1;}</style><header class="MuiBox-root css-1vseziz"><style data-emotion="css cam08f">.css-cam08f{position:relative;z-index:2;max-width:1024px;margin-left:auto;margin-right:auto;padding-top:16px;padding-bottom:16px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;gap:32px;}@media (min-width:0px){.css-cam08f{padding-left:24px;padding-right:24px;}}@media (min-width:640px){.css-cam08f{padding-left:32px;padding-right:32px;}}@media (min-width:768px){.css-cam08f{padding-left:48px;padding-right:48px;}}</style><div class="MuiBox-root css-cam08f"><a style="text-decoration:none" href="/"><style data-emotion="css 120nera">.css-120nera{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;gap:12px;}</style><div class="MuiBox-root css-120nera"><svg width="24" height="24" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="32" height="32" rx="6" fill="url(#gradient)"></rect><text x="16" y="22" font-family="system-ui, -apple-system, sans-serif" font-size="18" font-weight="700" fill="white" text-anchor="middle" letter-spacing="-0.02em">B</text><defs><linearGradient id="gradient" x1="0" y1="0" x2="32" y2="32" gradientUnits="userSpaceOnUse"><stop offset="0%" stop-color="#667eea"></stop><stop offset="100%" stop-color="#764ba2"></stop></linearGradient></defs></svg><style data-emotion="css 1bye4no">.css-1bye4no{margin:0;font-size:1.125rem;font-weight:600;line-height:1.5;font-family:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#171717;font-weight:600;letter-spacing:-0.01em;-webkit-transition:color 0.2s ease;transition:color 0.2s ease;}.css-1bye4no:hover{color:#737373;}</style><h6 class="MuiTypography-root MuiTypography-h6 css-1bye4no">Codeverse</h6></div></a><style data-emotion="css 1xiah1o">.css-1xiah1o{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}@media (min-width:0px){.css-1xiah1o{gap:16px;}}@media (min-width:640px){.css-1xiah1o{gap:24px;}}</style><nav class="MuiBox-root css-1xiah1o"><a style="text-decoration:none" href="/posts"><style data-emotion="css 4nm0tw">.css-4nm0tw{margin:0;font-size:0.875rem;line-height:1.6;font-weight:400;font-family:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#171717;font-weight:500;font-size:0.875rem;-webkit-transition:color 0.2s ease;transition:color 0.2s ease;}.css-4nm0tw:hover{color:#171717;}</style><p class="MuiTypography-root MuiTypography-body2 css-4nm0tw">Posts</p></a><a style="text-decoration:none" href="/tags"><style data-emotion="css 1t5x1u">.css-1t5x1u{margin:0;font-size:0.875rem;line-height:1.6;font-weight:400;font-family:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#737373;font-weight:400;font-size:0.875rem;-webkit-transition:color 0.2s ease;transition:color 0.2s ease;}.css-1t5x1u:hover{color:#171717;}</style><p class="MuiTypography-root MuiTypography-body2 css-1t5x1u">Tags</p></a><a style="text-decoration:none" href="/lab"><p class="MuiTypography-root MuiTypography-body2 css-1t5x1u">Lab</p></a><a style="text-decoration:none" href="/about"><p class="MuiTypography-root MuiTypography-body2 css-1t5x1u">About</p></a></nav></div></header><style data-emotion="css 6rhssw">.css-6rhssw{-webkit-flex:1;-ms-flex:1;flex:1;width:100%;max-width:1024px;margin-left:auto;margin-right:auto;padding-top:48px;padding-bottom:48px;}@media (min-width:0px){.css-6rhssw{padding-left:24px;padding-right:24px;}}@media (min-width:640px){.css-6rhssw{padding-left:32px;padding-right:32px;}}@media (min-width:768px){.css-6rhssw{padding-left:48px;padding-right:48px;}}</style><main class="MuiBox-root css-6rhssw"><style data-emotion="css 6jdg17">.css-6jdg17{width:100%;max-width:720px;margin-left:auto;margin-right:auto;}</style><div class="MuiBox-root css-6jdg17"><article class="MuiBox-root css-0"><style data-emotion="css esqn0w">.css-esqn0w{width:100%;border-radius:24px;overflow:hidden;background-color:#f5f5f5;}@media (min-width:0px){.css-esqn0w{height:200px;margin-bottom:32px;}}@media (min-width:640px){.css-esqn0w{height:300px;margin-bottom:48px;}}@media (min-width:768px){.css-esqn0w{height:400px;}}</style><div class="MuiBox-root css-esqn0w"><img src="/assets/images/posts/thumbnails/react-native-connect-rpc-migration.png" alt="React Native에서 REST API를 Connect RPC로 마이그레이션하기" style="width:100%;height:100%;object-fit:cover"/></div><style data-emotion="css 1rtc9dx">.css-1rtc9dx{border-bottom:1px solid #e5e5e5;}@media (min-width:0px){.css-1rtc9dx{margin-bottom:48px;padding-bottom:24px;}}@media (min-width:640px){.css-1rtc9dx{margin-bottom:64px;padding-bottom:32px;}}</style><header class="MuiBox-root css-1rtc9dx"><style data-emotion="css yl1ub">.css-yl1ub{margin:0;font-size:3rem;font-weight:600;line-height:1.2;letter-spacing:-0.02em;font-family:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#171717;margin-bottom:24px;}@media (min-width:0px){.css-yl1ub{font-size:1.875rem;line-height:1.3;}}@media (min-width:640px){.css-yl1ub{font-size:2.25rem;line-height:1.2;}}@media (min-width:768px){.css-yl1ub{font-size:2.5rem;}}</style><h1 class="MuiTypography-root MuiTypography-h1 css-yl1ub">React Native에서 REST API를 Connect RPC로 마이그레이션하기</h1><style data-emotion="css hp6vas">.css-hp6vas{margin:0;font-size:1rem;line-height:1.7;font-weight:400;font-family:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#737373;margin-bottom:24px;}@media (min-width:0px){.css-hp6vas{line-height:1.7;font-size:0.9375rem;}}@media (min-width:640px){.css-hp6vas{line-height:1.8;font-size:1rem;}}</style><p class="MuiTypography-root MuiTypography-body1 css-hp6vas">axios를 버리고 타입 안전한 gRPC 세상으로</p><style data-emotion="css vih9y">.css-vih9y{margin:0;font-size:0.8125rem;line-height:1.5;font-weight:400;color:#a3a3a3;}</style><span class="MuiTypography-root MuiTypography-micro css-vih9y">2026/01/05</span></header><div class="markdown-body post MuiBox-root css-0"><h1 id="react-native에서-rest-api를-connect-rpc로-마이그레이션하기" class="heading">React Native에서 REST API를 Connect RPC로 마이그레이션하기</h1>
<p>API 문서의 중요함은 웹 개발자들 사이에서 말하면 입아플 정도로 널리 공감되는 주제이다. 이를 위해 많은 도구들이 존재하고 다양한 노력들이 이루어졌다.
나는 최근에 프로젝트를 진행하며 백엔드 입장에서 문서를 제공해야 했었고, 가져가기로 한 기술 스택에서 이 문서화 도구의 지원이 빈약함을 알게 되었다. 그래서 조금 더 많은 수작업이 필요해졌는데, 갑자기 회의감이 들었다. 코드와 코드의 대화 사이에 들어가는 사람의 손길, 이 헐거움이 어색하게 느껴졌다.
이 문제를 근본적으로 해결하기 위해 REST API를 버리고 <a href="https://connectrpc.com/" target="_blank" rel="noopener noreferer">Connect RPC</a>로 전환하기로 결정했다. Connect RPC는 <a href="https://grpc.io/" target="_blank" rel="noopener noreferer">gRPC</a>의 장점(타입 안전성, 코드 생성)을 가져오면서도 HTTP/1.1을 지원해 React Native에서도 사용할 수 있다.</p>
<h2 id="왜-connect-rpc인가" class="heading">왜 Connect RPC인가?</h2>
<h3 id="rest-api의-문제점">REST API의 문제점</h3>
<p>기존에는 <a href="https://axios-http.com/" target="_blank" rel="noopener noreferer">axios</a>로 REST API를 호출하고, 응답 타입을 수동으로 정의했다.</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// 수동으로 작성한 타입</span>
</span><span class="code-line"><span class="token keyword">interface</span> <span class="token class-name">ProfileResponse</span> <span class="token punctuation">{</span>
</span><span class="code-line">  profile<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    userId<span class="token operator">:</span> <span class="token builtin">number</span><span class="token punctuation">;</span>
</span><span class="code-line">    nickname<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token comment">// ... 30개 이상의 필드</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// API 호출</span>
</span><span class="code-line"><span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> axios<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">get</span><span class="token generic class-name"><span class="token operator">&#x3C;</span>ProfileResponse<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">'/profiles/me'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<p>이 방식은 종종 이런 문제를 야기할 수 있다.</p>
<ol>
<li><strong>(그럴 일은 절대 없어야 하지만)백엔드가 API를 일방적으로 변경하면 프론트엔드는 런타임 에러가 나서야 안다</strong></li>
<li><strong>타입 정의가 실제 API와 달라져도 TypeScript는 모른다</strong></li>
<li><strong>필드 하나 추가될 때마다 타입 정의를 찾아서 수정해야 한다</strong></li>
</ol>
<h3 id="connect-rpc의-장점">Connect RPC의 장점</h3>
<p>Connect RPC는 <a href="https://protobuf.dev/" target="_blank" rel="noopener noreferer">Protobuf</a> 스키마를 공유하고 코드를 자동 생성한다.</p>
<pre class="language-protobuf"><code class="language-protobuf code-highlight"><span class="code-line"><span class="token comment">// proto 파일 (백엔드와 공유)</span>
</span><span class="code-line"><span class="token keyword">message</span> <span class="token class-name">Profile</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token builtin">int64</span> user_id <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">optional</span> <span class="token builtin">string</span> nickname <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token comment">// ...</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">service</span> <span class="token class-name">ProfileService</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">rpc</span> <span class="token function">GetMyProfile</span><span class="token punctuation">(</span><span class="token class-name">GetMyProfileRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">GetMyProfileResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>이 스키마에서 TypeScript 타입과 클라이언트 코드가 자동 생성되므로 아래와 같은 효과를 볼 수 있다.</p>
<ol>
<li><strong>백엔드가 스키마를 바꾸면 프론트엔드의 타입이 컴파일 타임에 깨진다</strong></li>
<li><strong>타입 정의가 항상 실제 API와 일치한다</strong></li>
<li><strong>proto 파일만 받으면 코드 생성으로 모든 게 업데이트된다</strong></li>
</ol>
<h2 id="1-protobuf-repository-추가" class="heading">1. Protobuf Repository 추가</h2>
<p>백엔드와 proto 파일을 공유하기 위해 별도 저장소를 만들고 <a href="https://git-scm.com/book/en/v2/Git-Tools-Submodules" target="_blank" rel="noopener noreferer">git submodule</a>로 관리하기로 했다.</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># proto repository를 submodule로 추가</span>
</span><span class="code-line"><span class="token function">git</span> submodule <span class="token function">add</span> git@github.com:your-org/myapp-proto.git proto
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 폴더 구조</span>
</span><span class="code-line">proto/
</span><span class="code-line">  ├── myapp/
</span><span class="code-line">  │   └── v1/
</span><span class="code-line">  │       ├── auth.proto
</span><span class="code-line">  │       ├── profile.proto
</span><span class="code-line">  │       └── interest.proto
</span><span class="code-line">  └── buf.yaml
</span></code></pre>
<p>proto 파일 예시</p>
<pre class="language-protobuf"><code class="language-protobuf code-highlight"><span class="code-line"><span class="token comment">// myapp/v1/auth.proto</span>
</span><span class="code-line"><span class="token keyword">syntax</span> <span class="token operator">=</span> <span class="token string">"proto3"</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">package</span> myapp<span class="token punctuation">.</span>v1<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">service</span> <span class="token class-name">AuthService</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">rpc</span> <span class="token function">RequestSignup</span><span class="token punctuation">(</span><span class="token class-name">RequestSignupRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">RequestSignupResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">rpc</span> <span class="token function">VerifySignup</span><span class="token punctuation">(</span><span class="token class-name">VerifySignupRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">VerifySignupResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">rpc</span> <span class="token function">GetMe</span><span class="token punctuation">(</span><span class="token class-name">GetMeRequest</span><span class="token punctuation">)</span> <span class="token keyword">returns</span> <span class="token punctuation">(</span><span class="token class-name">GetMeResponse</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">message</span> <span class="token class-name">RequestSignupRequest</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token builtin">string</span> email <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">message</span> <span class="token class-name">RequestSignupResponse</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token builtin">string</span> message <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">message</span> <span class="token class-name">VerifySignupRequest</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token builtin">string</span> email <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token builtin">string</span> code <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">message</span> <span class="token class-name">VerifySignupResponse</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token builtin">string</span> access_token <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token builtin">string</span> refresh_token <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h2 id="2-패키지-설치" class="heading">2. 패키지 설치</h2>
<p>Connect RPC와 Protobuf 관련 패키지를 설치한다.</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># 런타임 라이브러리</span>
</span><span class="code-line"><span class="token function">yarn</span> <span class="token function">add</span> @connectrpc/connect @connectrpc/connect-web @bufbuild/protobuf
</span><span class="code-line">
</span><span class="code-line"><span class="token comment"># 코드 생성 도구 (dev dependencies)</span>
</span><span class="code-line"><span class="token function">yarn</span> <span class="token function">add</span> <span class="token parameter variable">-D</span> @bufbuild/buf @bufbuild/protoc-gen-es @connectrpc/protoc-gen-connect-es
</span></code></pre>
<p>각 패키지의 역할</p>
<ul>
<li><code>@connectrpc/connect</code>: Connect RPC 핵심 라이브러리</li>
<li><code>@connectrpc/connect-web</code>: HTTP/1.1 기반 transport (React Native 호환)</li>
<li><code>@bufbuild/protobuf</code>: Protobuf 메시지 런타임</li>
<li><a href="https://buf.build/docs/introduction" target="_blank" rel="noopener noreferer"><code>@bufbuild/buf</code></a>: 코드 생성 CLI</li>
<li><code>@bufbuild/protoc-gen-es</code>: TypeScript 타입 생성 플러그인</li>
<li><code>@connectrpc/protoc-gen-connect-es</code>: Connect 서비스 클라이언트 생성 플러그인</li>
</ul>
<h2 id="3-buf-설정-및-코드-생성" class="heading">3. buf 설정 및 코드 생성</h2>
<p><code>buf.gen.yaml</code> 파일을 만들어 코드 생성 설정을 작성한다.</p>
<pre class="language-yaml"><code class="language-yaml code-highlight"><span class="code-line"><span class="token comment"># buf.gen.yaml</span>
</span><span class="code-line"><span class="token key atrule">version</span><span class="token punctuation">:</span> v2
</span><span class="code-line"><span class="token key atrule">inputs</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token key atrule">directory</span><span class="token punctuation">:</span> proto
</span><span class="code-line"><span class="token key atrule">plugins</span><span class="token punctuation">:</span>
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token key atrule">local</span><span class="token punctuation">:</span> protoc<span class="token punctuation">-</span>gen<span class="token punctuation">-</span>es
</span><span class="code-line">    <span class="token key atrule">out</span><span class="token punctuation">:</span> gen
</span><span class="code-line">    <span class="token key atrule">opt</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> target=ts
</span><span class="code-line">  <span class="token punctuation">-</span> <span class="token key atrule">local</span><span class="token punctuation">:</span> protoc<span class="token punctuation">-</span>gen<span class="token punctuation">-</span>connect<span class="token punctuation">-</span>es
</span><span class="code-line">    <span class="token key atrule">out</span><span class="token punctuation">:</span> gen
</span><span class="code-line">    <span class="token key atrule">opt</span><span class="token punctuation">:</span>
</span><span class="code-line">      <span class="token punctuation">-</span> target=ts
</span></code></pre>
<p>package.json에 코드 생성 스크립트를 추가한다.</p>
<pre class="language-json"><code class="language-json code-highlight"><span class="code-line"><span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token property">"scripts"</span><span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token property">"generate"</span><span class="token operator">:</span> <span class="token string">"buf generate"</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>코드를 생성한다.</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">yarn</span> generate
</span></code></pre>
<p>이제 <code>gen/</code> 폴더에 TypeScript 코드가 자동 생성된다.</p>
<pre><code class="code-highlight"><span class="code-line">gen/
</span><span class="code-line">  └── myapp/
</span><span class="code-line">      └── v1/
</span><span class="code-line">          ├── auth_pb.ts        # 메시지 타입
</span><span class="code-line">          ├── auth_connect.ts   # 서비스 정의
</span><span class="code-line">          ├── profile_pb.ts
</span><span class="code-line">          ├── profile_connect.ts
</span><span class="code-line">          └── ...
</span></code></pre>
<p>생성된 코드 예시</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// gen/myapp/v1/auth_pb.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">VerifySignupRequest</span> <span class="token operator">=</span> Message<span class="token operator">&#x3C;</span><span class="token string">'myapp.v1.VerifySignupRequest'</span><span class="token operator">></span> <span class="token operator">&#x26;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  email<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line">  code<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">type</span> <span class="token class-name">VerifySignupResponse</span> <span class="token operator">=</span> Message<span class="token operator">&#x3C;</span><span class="token string">'myapp.v1.VerifySignupResponse'</span><span class="token operator">></span> <span class="token operator">&#x26;</span> <span class="token punctuation">{</span>
</span><span class="code-line">  accessToken<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line">  refreshToken<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<h2 id="4-metro-설정-중요" class="heading">4. Metro 설정 (중요!)</h2>
<p>React Native의 <a href="https://metrobundler.dev/" target="_blank" rel="noopener noreferer">Metro bundler</a>가 Connect 패키지의 <a href="https://nodejs.org/api/packages.html#exports" target="_blank" rel="noopener noreferer">package exports</a>를 인식하도록 설정해야 한다. 이 설정이 없으면 런타임 에러가 발생한다.</p>
<pre class="language-javascript"><code class="language-javascript code-highlight"><span class="code-line"><span class="token comment">// metro.config.js</span>
</span><span class="code-line"><span class="token keyword">const</span> <span class="token punctuation">{</span> getDefaultConfig <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'expo/metro-config'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> config <span class="token operator">=</span> <span class="token function">getDefaultConfig</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">// package exports 활성화 (필수!)</span>
</span><span class="code-line">config<span class="token punctuation">.</span><span class="token property-access">resolver</span><span class="token punctuation">.</span><span class="token property-access">unstable_enablePackageExports</span> <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">module<span class="token punctuation">.</span><span class="token property-access">exports</span> <span class="token operator">=</span> config<span class="token punctuation">;</span>
</span></code></pre>
<p>Connect 패키지는 Node.js 스타일의 package exports를 사용하는데, React Native의 Metro bundler는 기본적으로 이를 지원하지 않기 때문이다.</p>
<h2 id="5-transport-및-클라이언트-설정" class="heading">5. Transport 및 클라이언트 설정</h2>
<p>Connect 클라이언트를 설정한다.</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// api/transport.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@connectrpc/connect'</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createConnectTransport <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@connectrpc/connect-web'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> AuthService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/gen/myapp/v1/auth_pb'</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ProfileService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/gen/myapp/v1/profile_pb'</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> InterestService <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/gen/myapp/v1/interest_pb'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> createAuthInterceptor<span class="token punctuation">,</span> createLoggingInterceptor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./interceptors'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> <span class="token constant">API_URL</span> <span class="token operator">=</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">EXPO_PUBLIC_SERVER_URL</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span><span class="token constant">API_URL</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">'EXPO_PUBLIC_SERVER_URL is not defined'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">const</span> transport <span class="token operator">=</span> <span class="token function">createConnectTransport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  baseUrl<span class="token operator">:</span> <span class="token constant">API_URL</span><span class="token punctuation">,</span>
</span><span class="code-line">  interceptors<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token function">createLoggingInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token function">createAuthInterceptor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> authClient <span class="token operator">=</span> <span class="token function">createClient</span><span class="token punctuation">(</span>AuthService<span class="token punctuation">,</span> transport<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> profileClient <span class="token operator">=</span> <span class="token function">createClient</span><span class="token punctuation">(</span>ProfileService<span class="token punctuation">,</span> transport<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> interestClient <span class="token operator">=</span> <span class="token function">createClient</span><span class="token punctuation">(</span>InterestService<span class="token punctuation">,</span> transport<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<h2 id="6-인터셉터-구현" class="heading">6. 인터셉터 구현</h2>
<p>인증 토큰 주입과 에러 핸들링을 위한 인터셉터를 구현한다.</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// api/interceptors.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token keyword">type</span> <span class="token punctuation">{</span> Interceptor <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@connectrpc/connect'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> useAuthStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/stores/authStore'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> createAuthInterceptor <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Interceptor <span class="token operator">=></span> next <span class="token operator">=></span> <span class="token keyword">async</span> req <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> token <span class="token operator">=</span> useAuthStore<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>accessToken<span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    req<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Authorization'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> createLoggingInterceptor <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Interceptor <span class="token operator">=></span> next <span class="token operator">=></span> <span class="token keyword">async</span> req <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[Connect] </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>method<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> req<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">[Connect] </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>req<span class="token punctuation">.</span>method<span class="token punctuation">.</span>name<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> response</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">,</span> response<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> response<span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<p>Connect의 인터셉터는 axios의 인터셉터와 비슷하지만 더 type-safe하다. 요청과 응답에 대한 모든 정보가 타입으로 보장된다.</p>
<h2 id="7-에러-핸들링" class="heading">7. 에러 핸들링</h2>
<p>Connect RPC에서는 두 가지 에러 처리 방식이 있다.</p>
<ol>
<li><strong>Network/Protocol 에러</strong> - Connect의 기본 <code>ConnectError</code> (네트워크 장애, 인증 실패 등)</li>
<li><strong>비즈니스 로직 에러</strong> - Protobuf로 정의된 <code>Error</code> 메시지</li>
</ol>
<p>먼저 proto에 Error 메시지를 정의한다.</p>
<pre class="language-protobuf"><code class="language-protobuf code-highlight"><span class="code-line"><span class="token comment">// proto/myapp/v1/common.proto</span>
</span><span class="code-line"><span class="token keyword">message</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token positional-class-name class-name">ErrorCode</span> code <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token builtin">string</span> message <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token map class-name">map<span class="token punctuation">&#x3C;</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token builtin">string</span><span class="token punctuation">></span></span> details <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">enum</span> <span class="token class-name">ErrorCode</span> <span class="token punctuation">{</span>
</span><span class="code-line">  ERROR_CODE_UNSPECIFIED <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
</span><span class="code-line">  ERROR_CODE_PROFILE_NOT_FOUND <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</span><span class="code-line">  ERROR_CODE_AUTH_ERROR <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</span><span class="code-line">  ERROR_CODE_INVALID_TOKEN <span class="token operator">=</span> <span class="token number">3</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token comment">// ...</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>모든 응답은 <code>oneof result</code> 패턴을 사용한다.</p>
<pre class="language-protobuf"><code class="language-protobuf code-highlight"><span class="code-line"><span class="token keyword">message</span> <span class="token class-name">VerifySignupResponse</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">oneof</span> result <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token positional-class-name class-name">VerifySignupSuccess</span> success <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token positional-class-name class-name">Error</span> error <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">message</span> <span class="token class-name">VerifySignupSuccess</span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token builtin">string</span> access_token <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token builtin">string</span> refresh_token <span class="token operator">=</span> <span class="token number">2</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<p>이 패턴을 처리하기 위해 <code>unwrap()</code> 함수와 <code>ApplicationError</code> 클래스를 만든다.</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// api/connectError.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> ConnectError <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@connectrpc/connect'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> Error <span class="token keyword">as</span> ProtoError<span class="token punctuation">,</span> ErrorCode <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/gen/myapp/v1/common_pb'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">/**
</span></span><span class="code-line"><span class="token comment"> * 비즈니스 로직 에러
</span></span><span class="code-line"><span class="token comment"> * Proto에 정의된 Error 메시지를 래핑함
</span></span><span class="code-line"><span class="token comment"> */</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">class</span> <span class="token class-name">ApplicationError</span> <span class="token keyword">extends</span> <span class="token class-name">Error</span> <span class="token punctuation">{</span>
</span><span class="code-line">  code<span class="token operator">:</span> ErrorCode<span class="token punctuation">;</span>
</span><span class="code-line">  details<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token function">constructor</span><span class="token punctuation">(</span>code<span class="token operator">:</span> ErrorCode<span class="token punctuation">,</span> message<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> details<span class="token operator">:</span> <span class="token punctuation">{</span> <span class="token punctuation">[</span>key<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">]</span><span class="token operator">:</span> <span class="token builtin">string</span> <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">super</span><span class="token punctuation">(</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>code <span class="token operator">=</span> code<span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">this</span><span class="token punctuation">.</span>details <span class="token operator">=</span> details<span class="token punctuation">;</span>
</span><span class="code-line">    Object<span class="token punctuation">.</span><span class="token function">setPrototypeOf</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">,</span> ApplicationError<span class="token punctuation">.</span>prototype<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">static</span> <span class="token function">fromProto</span><span class="token punctuation">(</span>error<span class="token operator">:</span> ProtoError<span class="token punctuation">)</span><span class="token operator">:</span> ApplicationError <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationError</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>code<span class="token punctuation">,</span> error<span class="token punctuation">.</span>message<span class="token punctuation">,</span> error<span class="token punctuation">.</span>details<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">/**
</span></span><span class="code-line"><span class="token comment"> * oneof result에서 성공값을 추출하거나 에러를 throw
</span></span><span class="code-line"><span class="token comment"> */</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">function</span> <span class="token generic-function"><span class="token function">unwrap</span><span class="token generic class-name"><span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span></span></span><span class="token punctuation">(</span>response<span class="token operator">:</span> <span class="token punctuation">{</span>
</span><span class="code-line">  result<span class="token operator">:</span>
</span><span class="code-line">    <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token keyword">case</span><span class="token operator">:</span> <span class="token string">'success'</span><span class="token punctuation">;</span> value<span class="token operator">:</span> <span class="token constant">T</span> <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token keyword">case</span><span class="token operator">:</span> <span class="token string">'error'</span><span class="token punctuation">;</span> value<span class="token operator">:</span> ProtoError <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token operator">|</span> <span class="token punctuation">{</span> <span class="token keyword">case</span><span class="token operator">:</span> <span class="token keyword">undefined</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token operator">:</span> NonNullable<span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>result<span class="token punctuation">.</span>case <span class="token operator">===</span> <span class="token string">'error'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">throw</span> ApplicationError<span class="token punctuation">.</span><span class="token function">fromProto</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>result<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>result<span class="token punctuation">.</span>case <span class="token operator">===</span> <span class="token string">'success'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> response<span class="token punctuation">.</span>result<span class="token punctuation">.</span>value <span class="token keyword">as</span> NonNullable<span class="token operator">&#x3C;</span><span class="token constant">T</span><span class="token operator">></span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationError</span><span class="token punctuation">(</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">INTERNAL</span><span class="token punctuation">,</span> <span class="token string">'Unknown response result'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token comment">/**
</span></span><span class="code-line"><span class="token comment"> * ConnectError를 ApplicationError로 변환
</span></span><span class="code-line"><span class="token comment"> */</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> handleConnectError <span class="token operator">=</span> <span class="token punctuation">(</span>error<span class="token operator">:</span> <span class="token builtin">unknown</span><span class="token punctuation">)</span><span class="token operator">:</span> ApplicationError <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">instanceof</span> <span class="token class-name">ApplicationError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> error<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">instanceof</span> <span class="token class-name">ConnectError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token comment">// 네트워크 에러 등을 SYSTEM_ERROR로 매핑</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationError</span><span class="token punctuation">(</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">SYSTEM_ERROR</span><span class="token punctuation">,</span> error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">instanceof</span> <span class="token class-name">Error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationError</span><span class="token punctuation">(</span>
</span><span class="code-line">      ErrorCode<span class="token punctuation">.</span><span class="token constant">INTERNAL</span><span class="token punctuation">,</span>
</span><span class="code-line">      error<span class="token punctuation">.</span>message <span class="token operator">||</span> <span class="token string">'알 수 없는 오류가 발생했습니다'</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">ApplicationError</span><span class="token punctuation">(</span>ErrorCode<span class="token punctuation">.</span><span class="token constant">UNSPECIFIED</span><span class="token punctuation">,</span> <span class="token string">'알 수 없는 오류가 발생했습니다'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<h3 id="백엔드-구현">백엔드 구현</h3>
<p>백엔드는 비즈니스 로직 에러를 Protobuf <code>Error</code> 메시지로 만든다. 이 방식을 사용하면 에러 코드가 proto enum으로 정의되어 백엔드-프론트엔드 간 타입 일치가 보장된다.</p>
<pre class="language-go"><code class="language-go code-highlight"><span class="code-line"><span class="token comment">// internal/response/errors.go</span>
</span><span class="code-line"><span class="token keyword">func</span> <span class="token function">NewConnectError</span><span class="token punctuation">(</span>code domain<span class="token punctuation">.</span>ErrorCode<span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token operator">*</span>connect<span class="token punctuation">.</span>Error <span class="token punctuation">{</span>
</span><span class="code-line">  connectErr <span class="token operator">:=</span> connect<span class="token punctuation">.</span><span class="token function">NewError</span><span class="token punctuation">(</span><span class="token function">toConnectCode</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">,</span> err<span class="token punctuation">)</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// Protobuf Error 메시지 생성</span>
</span><span class="code-line">  protoErr <span class="token operator">:=</span> <span class="token operator">&#x26;</span>duologuev1<span class="token punctuation">.</span>Error<span class="token punctuation">{</span>
</span><span class="code-line">    Code<span class="token punctuation">:</span>    domain<span class="token punctuation">.</span><span class="token function">ToProtoErrorCode</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    Message<span class="token punctuation">:</span> err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    Details<span class="token punctuation">:</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token comment">// Error를 Connect error detail로 추가</span>
</span><span class="code-line">  <span class="token keyword">if</span> detail<span class="token punctuation">,</span> detailErr <span class="token operator">:=</span> connect<span class="token punctuation">.</span><span class="token function">NewErrorDetail</span><span class="token punctuation">(</span>protoErr<span class="token punctuation">)</span><span class="token punctuation">;</span> detailErr <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
</span><span class="code-line">    connectErr<span class="token punctuation">.</span><span class="token function">AddDetail</span><span class="token punctuation">(</span>detail<span class="token punctuation">)</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">return</span> connectErr
</span><span class="code-line"><span class="token punctuation">}</span>
</span></code></pre>
<h3 id="인터셉터에서-에러-코드별-처리">인터셉터에서 에러 코드별 처리</h3>
<p>인터셉터에서 특정 에러 코드에 대한 공통 처리를 할 수 있다.</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// api/interceptors.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> createAuthInterceptor <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> Interceptor <span class="token operator">=></span> next <span class="token operator">=></span> <span class="token keyword">async</span> req <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">const</span> token <span class="token operator">=</span> useAuthStore<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>accessToken<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token keyword">if</span> <span class="token punctuation">(</span>token<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    req<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Authorization'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>token<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">  <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token keyword">instanceof</span> <span class="token class-name">ApplicationError</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token comment">// 프로필 없음 → 로그아웃 처리</span>
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>code <span class="token operator">===</span> ErrorCode<span class="token punctuation">.</span><span class="token constant">PROFILE_NOT_FOUND</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        useAuthStore<span class="token punctuation">.</span><span class="token function">getState</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">clearAuth</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        router<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">'/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token comment">// 인증 에러 → 토큰 갱신 시도</span>
</span><span class="code-line">      <span class="token keyword">if</span> <span class="token punctuation">(</span>
</span><span class="code-line">        error<span class="token punctuation">.</span>code <span class="token operator">===</span> ErrorCode<span class="token punctuation">.</span><span class="token constant">AUTH_ERROR</span> <span class="token operator">||</span>
</span><span class="code-line">        error<span class="token punctuation">.</span>code <span class="token operator">===</span> ErrorCode<span class="token punctuation">.</span><span class="token constant">AUTH_REQUIRED</span> <span class="token operator">||</span>
</span><span class="code-line">        error<span class="token punctuation">.</span>code <span class="token operator">===</span> ErrorCode<span class="token punctuation">.</span><span class="token constant">INVALID_TOKEN</span>
</span><span class="code-line">      <span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">        <span class="token keyword">const</span> newToken <span class="token operator">=</span> <span class="token keyword">await</span> tokenRefreshManager<span class="token punctuation">.</span><span class="token function">refresh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        req<span class="token punctuation">.</span>header<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string">'Authorization'</span><span class="token punctuation">,</span> <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Bearer </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>newToken<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">        <span class="token keyword">return</span> <span class="token keyword">await</span> <span class="token function">next</span><span class="token punctuation">(</span>req<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 재시도</span>
</span><span class="code-line">      <span class="token punctuation">}</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line">    <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<p>이렇게 함으로써 이제 에러를 보다 편하게 다룰 수 있다.</p>
<ol>
<li><strong>타입 안전한 에러 처리</strong> - ErrorCode enum으로 가능한 에러를 컴파일 타임에 알 수 있음</li>
<li><strong>중앙화된 에러 처리</strong> - 인터셉터에서 공통 에러 로직 처리</li>
<li><strong>명시적인 에러 흐름</strong> - oneof를 통해 성공/실패가 proto 레벨에서 명확히 구분됨</li>
</ol>
<h2 id="8-api-레이어-마이그레이션" class="heading">8. API 레이어 마이그레이션</h2>
<p>이제 기존 axios 기반 API를 Connect로 교체한다.</p>
<h3 id="before-axios">Before (axios)</h3>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// api/auth.ts (before)</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> apiClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./client'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">interface</span> <span class="token class-name">VerifySignupRequest</span> <span class="token punctuation">{</span>
</span><span class="code-line">  email<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line">  code<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">interface</span> <span class="token class-name">TokenResponse</span> <span class="token punctuation">{</span>
</span><span class="code-line">  access_token<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line">  refresh_token<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> authApi <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  verifySignup<span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>email<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> code<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&#x3C;</span>TokenResponse<span class="token operator">></span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> apiClient<span class="token punctuation">.</span><span class="token generic-function"><span class="token function">post</span><span class="token generic class-name"><span class="token operator">&#x3C;</span>TokenResponse<span class="token operator">></span></span></span><span class="token punctuation">(</span><span class="token string">'/auth/verify-signup'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">      email<span class="token punctuation">,</span>
</span><span class="code-line">      code<span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token keyword">return</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<h3 id="after-connect">After (Connect)</h3>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// api/auth.ts (after)</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> create <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@bufbuild/protobuf'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> VerifySignupRequestSchema <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/gen/myapp/v1/auth_pb'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> handleConnectError <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./connectError'</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> authClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./transport'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">interface</span> <span class="token class-name">TokenResponse</span> <span class="token punctuation">{</span>
</span><span class="code-line">  accessToken<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line">  refreshToken<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> authApi <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  verifySignup<span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>email<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">,</span> code<span class="token operator">:</span> <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&#x3C;</span>TokenResponse<span class="token operator">></span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span>VerifySignupRequestSchema<span class="token punctuation">,</span> <span class="token punctuation">{</span> email<span class="token punctuation">,</span> code <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> authClient<span class="token punctuation">.</span><span class="token function">verifySignup</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">unwrap</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// oneof result 처리</span>
</span><span class="code-line">      <span class="token keyword">return</span> <span class="token punctuation">{</span>
</span><span class="code-line">        accessToken<span class="token operator">:</span> result<span class="token punctuation">.</span>accessToken<span class="token punctuation">,</span>
</span><span class="code-line">        refreshToken<span class="token operator">:</span> result<span class="token punctuation">.</span>refreshToken<span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">throw</span> <span class="token function">handleConnectError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<p>변경된 점은 다음과 같다.</p>
<ol>
<li><strong>타입을 수동으로 정의하지 않는다</strong> - proto에서 자동 생성됨</li>
<li><strong>URL 경로를 하드코딩하지 않는다</strong> - 서비스 정의에 포함됨</li>
<li><strong>create()로 요청 메시지를 생성한다</strong> - 타입 안전성 보장</li>
</ol>
<h3 id="profile-api-예시">Profile API 예시</h3>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// api/profile.ts</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> create <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@bufbuild/protobuf'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> GetMyProfileRequestSchema<span class="token punctuation">,</span> UpdateMyProfileRequestSchema <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@/gen/myapp/v1/profile_pb'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> handleConnectError <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./connectError'</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token keyword">import</span> <span class="token punctuation">{</span> profileClient <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'./transport'</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> profileApi <span class="token operator">=</span> <span class="token punctuation">{</span>
</span><span class="code-line">  getMe<span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&#x3C;</span>ProfileMe<span class="token operator">></span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span>GetMyProfileRequestSchema<span class="token punctuation">,</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> profileClient<span class="token punctuation">.</span><span class="token function">getMyProfile</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">unwrap</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// oneof result 처리</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token keyword">return</span> <span class="token function">mapProfile</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>profile<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">throw</span> <span class="token function">handleConnectError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">
</span><span class="code-line">  updateMe<span class="token operator">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span>data<span class="token operator">:</span> UpdateProfileData<span class="token punctuation">)</span><span class="token operator">:</span> <span class="token builtin">Promise</span><span class="token operator">&#x3C;</span>ProfileMe<span class="token operator">></span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token keyword">try</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">const</span> request <span class="token operator">=</span> <span class="token function">create</span><span class="token punctuation">(</span>UpdateMyProfileRequestSchema<span class="token punctuation">,</span> <span class="token punctuation">{</span>
</span><span class="code-line">        nickname<span class="token operator">:</span> data<span class="token punctuation">.</span>nickname<span class="token punctuation">,</span>
</span><span class="code-line">        gender<span class="token operator">:</span> data<span class="token punctuation">.</span>gender<span class="token punctuation">,</span>
</span><span class="code-line">        region<span class="token operator">:</span> data<span class="token punctuation">.</span>region<span class="token punctuation">,</span>
</span><span class="code-line">        shortBio<span class="token operator">:</span> data<span class="token punctuation">.</span>shortBio<span class="token punctuation">,</span>
</span><span class="code-line">        profileImageUrl<span class="token operator">:</span> data<span class="token punctuation">.</span>profileImageUrl<span class="token punctuation">,</span>
</span><span class="code-line">        interestIds<span class="token operator">:</span> data<span class="token punctuation">.</span>interestIds<span class="token operator">?.</span><span class="token function">map</span><span class="token punctuation">(</span>id <span class="token operator">=></span> <span class="token function">BigInt</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token operator">??</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
</span><span class="code-line">      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> profileClient<span class="token punctuation">.</span><span class="token function">updateMyProfile</span><span class="token punctuation">(</span>request<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">      <span class="token keyword">const</span> result <span class="token operator">=</span> <span class="token function">unwrap</span><span class="token punctuation">(</span>response<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// oneof result 처리</span>
</span><span class="code-line">
</span><span class="code-line">      <span class="token keyword">return</span> <span class="token function">mapProfile</span><span class="token punctuation">(</span>result<span class="token punctuation">.</span>profile<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token keyword">throw</span> <span class="token function">handleConnectError</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<h2 id="9-react-query-훅은-그대로" class="heading">9. React Query 훅은 그대로</h2>
<p><a href="https://tanstack.com/query/latest" target="_blank" rel="noopener noreferer">React Query</a> 훅은 API 함수만 호출하므로 수정할 필요가 없다.</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// queries/useMutationAuth.ts</span>
</span><span class="code-line"><span class="token keyword">export</span> <span class="token keyword">const</span> <span class="token function-variable function">useVerifySignup</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">  <span class="token keyword">return</span> <span class="token function">useMutation</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">    <span class="token function-variable function">mutationFn</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> email<span class="token punctuation">,</span> code <span class="token punctuation">}</span><span class="token operator">:</span> VerifySignupParams<span class="token punctuation">)</span> <span class="token operator">=></span> authApi<span class="token punctuation">.</span><span class="token function">verifySignup</span><span class="token punctuation">(</span>email<span class="token punctuation">,</span> code<span class="token punctuation">)</span><span class="token punctuation">,</span>
</span><span class="code-line">    <span class="token function-variable function">onSuccess</span><span class="token operator">:</span> data <span class="token operator">=></span> <span class="token punctuation">{</span>
</span><span class="code-line">      <span class="token function">setTokens</span><span class="token punctuation">(</span>data<span class="token punctuation">.</span>accessToken<span class="token punctuation">,</span> data<span class="token punctuation">.</span>refreshToken<span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line">    <span class="token punctuation">}</span><span class="token punctuation">,</span>
</span><span class="code-line">  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">;</span>
</span></code></pre>
<p>API 레이어만 교체했으므로 컴포넌트 코드는 전혀 수정하지 않아도 된다.</p>
<h2 id="10-axios-제거" class="heading">10. axios 제거</h2>
<p>마이그레이션이 완료되면 axios를 제거한다.</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">yarn</span> remove axios
</span></code></pre>
<p>기존에 axios를 사용하던 파일들도 삭제한다.</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token function">rm</span> api/client.ts  <span class="token comment"># axios 클라이언트</span>
</span></code></pre>
<h2 id="결과" class="heading">결과</h2>
<h3 id="타입-안전성-확보">타입 안전성 확보</h3>
<p>이제 백엔드가 API를 변경하면 프론트엔드가 <strong>컴파일 타임에</strong> 에러가 발생한다.</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token comment">// proto에서 nickname 필드가 제거되면</span>
</span><span class="code-line"><span class="token keyword">const</span> profile <span class="token operator">=</span> <span class="token keyword">await</span> profileApi<span class="token punctuation">.</span><span class="token function">getMe</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span><span class="code-line"><span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>profile<span class="token punctuation">.</span>nickname<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// ❌ TypeScript 에러: 'nickname' does not exist</span>
</span></code></pre>
<h3 id="개발-경험-개선">개발 경험 개선</h3>
<ol>
<li><strong>자동 완성이 정확하다</strong> - proto에 정의된 필드만 자동 완성됨</li>
<li><strong>리팩토링이 안전하다</strong> - 필드명을 바꾸면 사용하는 모든 곳에서 에러 발생</li>
<li><strong>문서가 필요 없다</strong> - proto 파일이 곧 API 명세서</li>
</ol>
<h3 id="유지보수-비용-감소">유지보수 비용 감소</h3>
<ul>
<li>타입 정의를 수동으로 관리할 필요 없음</li>
<li>snake_case ↔ camelCase 변환 코드 불필요</li>
<li>API 변경 시 영향받는 코드를 TypeScript가 알려줌</li>
</ul>
<h2 id="binary-vs-json" class="heading">Binary vs JSON</h2>
<p>Connect RPC는 binary(Protobuf)와 JSON 두 가지 포맷을 지원한다. <code>createConnectTransport</code>는 기본적으로 binary 포맷을 사용하므로, 별도 설정 없이도 binary의 이점을 누릴 수 있다.</p>
<ul>
<li><strong>Binary (기본값)</strong> - 더 작은 페이로드, 더 빠른 직렬화/역직렬화</li>
<li><strong>JSON</strong> - 디버깅이 쉬움 (네트워크 탭에서 내용 확인 가능)</li>
</ul>
<p>Proto 스키마의 타입 안전성을 유지하면서 실제 통신 데이터 포맷은 선택할 수 있다는 것이 Connect RPC의 큰 장점이다. 개발 환경에서 디버깅이 필요하다면 JSON으로, 프로덕션에서는 Binary로 전환하는 것도 가능하다.</p>
<pre class="language-typescript"><code class="language-typescript code-highlight"><span class="code-line"><span class="token keyword">const</span> transport <span class="token operator">=</span> <span class="token function">createConnectTransport</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
</span><span class="code-line">  baseUrl<span class="token operator">:</span> <span class="token constant">API_URL</span><span class="token punctuation">,</span>
</span><span class="code-line">  useBinaryFormat<span class="token operator">:</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token comment">// JSON 사용 (디버깅 시 편리)</span>
</span><span class="code-line">  <span class="token comment">// useBinaryFormat을 생략하면 기본값인 true(binary)가 적용됨</span>
</span><span class="code-line"><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</span></code></pre>
<h2 id="주의사항" class="heading">주의사항</h2>
<h3 id="1-metro-설정-필수">1. Metro 설정 필수</h3>
<p><code>unstable_enablePackageExports</code>를 활성화하지 않으면 런타임 에러가 발생한다. 이 설정을 빠뜨리면 앱이 제대로 실행되지 않는다.</p>
<h3 id="2-streaming은-미지원">2. Streaming은 미지원</h3>
<p>Connect RPC는 <a href="https://grpc.io/docs/what-is-grpc/core-concepts/#unary-rpc" target="_blank" rel="noopener noreferer">Unary RPC</a>만 지원한다. <a href="https://grpc.io/docs/what-is-grpc/core-concepts/#server-streaming-rpc" target="_blank" rel="noopener noreferer">Server Streaming</a>이나 <a href="https://grpc.io/docs/what-is-grpc/core-concepts/#bidirectional-streaming-rpc" target="_blank" rel="noopener noreferer">Bidirectional Streaming</a>은 React Native에서 작동하지 않는다.</p>
<h3 id="3-코드-생성-타이밍">3. 코드 생성 타이밍</h3>
<p>proto 파일이 변경되면 <code>yarn generate</code>를 다시 실행해야 한다. submodule을 업데이트할 때마다 실행하는 것을 잊지 말자.</p>
<pre class="language-bash"><code class="language-bash code-highlight"><span class="code-line"><span class="token comment"># proto submodule 업데이트 후</span>
</span><span class="code-line"><span class="token function">git</span> submodule update <span class="token parameter variable">--remote</span> proto
</span><span class="code-line"><span class="token function">yarn</span> generate
</span></code></pre>
<p>proto 파일은 Protobuf의 네이밍 규칙에 따라 snake_case를 사용하지만, Connect는 코드 생성 시 자동으로 TypeScript의 camelCase로 변환해준다.</p>
<h2 id="마무리" class="heading">마무리</h2>
<p>REST API에서 Connect RPC로 마이그레이션하면서 가장 만족스러운 점은 <strong>타입 안전성</strong>이다. 백엔드가 API를 변경하면 프론트엔드가 런타임이 아닌 컴파일 타임에 깨지므로, 배포 전에 문제를 발견할 수 있다.</p>
<p>수동으로 타입을 정의하던 시간을 아낄 수 있고, proto 파일만 보면 API 명세를 정확히 알 수 있어 문서를 별도로 관리할 필요도 없어졌다.</p>
<p>백엔드와 프론트엔드가 상호완결성을 가지는 서비스 프로덕트라면 gRPC 도입을 고려 해보는 것도 나쁘지 않은 것 같다.</p></div><style data-emotion="css w48v5m">.css-w48v5m{margin-top:48px;padding-top:32px;border-top:1px solid #e5e5e5;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-flex-wrap:wrap;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;gap:8px;}</style><div class="MuiBox-root css-w48v5m"><style data-emotion="css ahjzb8">.css-ahjzb8{margin:0;font-size:0.8125rem;line-height:1.5;font-weight:400;color:#a3a3a3;vertical-align:middle;}</style><span class="MuiTypography-root MuiTypography-micro css-ahjzb8">Tags</span><style data-emotion="css 1np7pws">.css-1np7pws{-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:var(--Link-underlineColor);--Link-underlineColor:rgba(23, 23, 23, 0.4);}.css-1np7pws:hover{text-decoration-color:inherit;}</style><style data-emotion="css 1d0basj">.css-1d0basj{margin:0;font:inherit;line-height:inherit;letter-spacing:inherit;color:#171717;-webkit-text-decoration:underline;text-decoration:underline;text-decoration-color:var(--Link-underlineColor);--Link-underlineColor:rgba(23, 23, 23, 0.4);}.css-1d0basj:hover{text-decoration-color:inherit;}</style><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-1d0basj" href="/tags/react native"><style data-emotion="css 30jlqd">.css-30jlqd{padding-left:16px;padding-right:16px;margin-right:8px;border-radius:8px;background-color:whitesmoke;}</style><code class="MuiBox-root css-30jlqd"><style data-emotion="css 1iihwok">.css-1iihwok{margin:0;font-size:1rem;line-height:1.7;font-weight:400;font-family:Pretendard,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,sans-serif;color:#171717;}</style><span class="MuiTypography-root MuiTypography-body1 css-1iihwok">React Native</span></code></a><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-1d0basj" href="/tags/connect rpc"><code class="MuiBox-root css-30jlqd"><span class="MuiTypography-root MuiTypography-body1 css-1iihwok">Connect RPC</span></code></a><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-1d0basj" href="/tags/protobuf"><code class="MuiBox-root css-30jlqd"><span class="MuiTypography-root MuiTypography-body1 css-1iihwok">Protobuf</span></code></a><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-1d0basj" href="/tags/grpc"><code class="MuiBox-root css-30jlqd"><span class="MuiTypography-root MuiTypography-body1 css-1iihwok">gRPC</span></code></a><a class="MuiTypography-root MuiTypography-inherit MuiLink-root MuiLink-underlineAlways css-1d0basj" href="/tags/typescript"><code class="MuiBox-root css-30jlqd"><span class="MuiTypography-root MuiTypography-body1 css-1iihwok">typescript</span></code></a></div><style data-emotion="css 13hhewf">.css-13hhewf{margin-top:64px;padding-top:48px;border-top:1px solid #e5e5e5;}</style><div class="MuiBox-root css-13hhewf"><div data-orb-container="true" data-widget-type="comments" data-post-slug="react-native-connect-rpc-migration"></div></div></article></div></main><!--$!--><template data-dgst="NEXT_DYNAMIC_NO_SSR_CODE"></template><!--/$--><script src="/_next/static/chunks/webpack-932dee968bc237b7.js" async=""></script><script src="/_next/static/chunks/2443530c-0538301a504b83cf.js" async=""></script><script src="/_next/static/chunks/488-c0b34e96c35b33f7.js" async=""></script><script src="/_next/static/chunks/main-app-98d28d7655df5891.js" async=""></script><script>(self.__next_f=self.__next_f||[]).push([0])</script><script>self.__next_f.push([1,"1:HL[\"/_next/static/css/0ad9df217a839d7d.css\",{\"as\":\"style\"}]\n0:\"$L2\"\n"])</script><script>self.__next_f.push([1,"3:HL[\"/_next/static/css/a99ce192272c1300.css\",{\"as\":\"style\"}]\n"])</script><script>self.__next_f.push([1,"4:I{\"id\":\"8827\",\"chunks\":[\"272:static/chunks/webpack-932dee968bc237b7.js\",\"667:static/chunks/2443530c-0538301a504b83cf.js\",\"488:static/chunks/488-c0b34e96c35b33f7.js\"],\"name\":\"\",\"async\":false}\n6:I{\"id\":\"9126\",\"chunks\":[\"272:static/chunks/webpack-932dee968bc237b7.js\",\"667:static/chunks/2443530c-0538301a504b83cf.js\",\"488:static/chunks/488-c0b34e96c35b33f7.js\"],\"name\":\"\",\"async\":false}\n7:I{\"id\":\"6886\",\"chunks\":[\"771:static/chunks/771-437baa63a3bc2c51.js\",\"846:static/chunks/846-5374114718c3ba3f.js\",\"218:static/"])</script><script>self.__next_f.push([1,"chunks/218-24e2ed3a86df3181.js\",\"185:static/chunks/app/layout-1a9b501ae2e54936.js\"],\"name\":\"\",\"async\":false}\n9:I{\"id\":\"4463\",\"chunks\":[\"272:static/chunks/webpack-932dee968bc237b7.js\",\"667:static/chunks/2443530c-0538301a504b83cf.js\",\"488:static/chunks/488-c0b34e96c35b33f7.js\"],\"name\":\"\",\"async\":false}\na:I{\"id\":\"1010\",\"chunks\":[\"272:static/chunks/webpack-932dee968bc237b7.js\",\"667:static/chunks/2443530c-0538301a504b83cf.js\",\"488:static/chunks/488-c0b34e96c35b33f7.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"2:[[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/0ad9df217a839d7d.css\",\"precedence\":\"next\"}]],[\"$\",\"$L4\",null,{\"assetPrefix\":\"\",\"initialCanonicalUrl\":\"/posts/react-native-connect-rpc-migration\",\"initialTree\":[\"\",{\"children\":[\"posts\",{\"children\":[[\"slug\",\"react-native-connect-rpc-migration\",\"d\"],{\"children\":[\"__PAGE__?{\\\"slug\\\":\\\"react-native-connect-rpc-migration\\\"}\",{}]}]}]},\"$undefined\",\"$undefined\",true],\"initialHead\":[\"$L5\",null],\"globalErrorComponent\":\"$6\",\"notFound\":[\"$\",\"$L7\",null,{\"params\":{},\"children\":[\"$L8\",\"$undefined\",[[\"$\",\"title\",null,{\"children\":\"404: This page could not be found.\"}],[\"$\",\"div\",null,{\"style\":{\"fontFamily\":\"system-ui,\\\"Segoe UI\\\",Roboto,Helvetica,Arial,sans-serif,\\\"Apple Color Emoji\\\",\\\"Segoe UI Emoji\\\"\",\"height\":\"100vh\",\"textAlign\":\"center\",\"display\":\"flex\",\"flexDirection\":\"column\",\"alignItems\":\"center\",\"justifyContent\":\"center\"},\"children\":[\"$\",\"div\",null,{\"children\":[[\"$\",\"style\",null,{\"dangerouslySetInnerHTML\":{\"__html\":\"body{color:#000;background:#fff;margin:0}.next-error-h1{border-right:1px solid rgba(0,0,0,.3)}@media (prefers-color-scheme:dark){body{color:#fff;background:#000}.next-error-h1{border-right:1px solid rgba(255,255,255,.3)}}\"}}],[\"$\",\"h1\",null,{\"className\":\"next-error-h1\",\"style\":{\"display\":\"inline-block\",\"margin\":\"0 20px 0 0\",\"padding\":\"0 23px 0 0\",\"fontSize\":24,\"fontWeight\":500,\"verticalAlign\":\"top\",\"lineHeight\":\"49px\"},\"children\":\"404\"}],[\"$\",\"div\",null,{\"style\":{\"display\":\"inline-block\"},\"children\":[\"$\",\"h2\",null,{\"style\":{\"fontSize\":14,\"fontWeight\":400,\"lineHeight\":\"49px\",\"margin\":0},\"children\":\"This page could not be found.\"}]}]]}]}]]]}],\"asNotFound\":false,\"children\":[[\"$\",\"$L7\",null,{\"children\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[[\"$\",\"$L9\",null,{\"parallelRouterKey\":\"children\",\"segmentPath\":[\"children\",\"posts\",\"children\",[\"slug\",\"react-native-connect-rpc-migration\",\"d\"],\"children\"],\"error\":\"$undefined\",\"errorStyles\":\"$undefined\",\"loading\":\"$undefined\",\"loadingStyles\":\"$undefined\",\"hasLoading\":false,\"template\":[\"$\",\"$La\",null,{}],\"templateStyles\":\"$undefined\",\"notFound\":\"$undefined\",\"notFoundStyles\":\"$undefined\",\"childProp\":{\"current\":[\"$Lb\",null],\"segment\":\"__PAGE__?{\\\"slug\\\":\\\"react-native-connect-rpc-migration\\\"}\"},\"styles\":[[\"$\",\"link\",\"0\",{\"rel\":\"stylesheet\",\"href\":\"/_next/static/css/a99ce192272c1300.css\",\"precedence\":\"next\"}]]}],null],\"segment\":[\"slug\",\"react-native-connect-rpc-migration\",\"d\"]},\"styles\":[]}],\"segment\":\"posts\"},\"styles\":[]}],\"params\":{}}],null]}]]\n"])</script><script>self.__next_f.push([1,"c:I{\"id\":\"4970\",\"chunks\":[\"771:static/chunks/771-437baa63a3bc2c51.js\",\"755:static/chunks/app/drafts/[slug]/page-430a150247a39314.js\"],\"name\":\"\",\"async\":false}\n"])</script><script>self.__next_f.push([1,"b:[\"$\",\"$Lc\",null,{\"post\":{\"slug\":\"react-native-connect-rpc-migration\",\"meta\":{\"title\":\"React Native에서 REST API를 Connect RPC로 마이그레이션하기\",\"description\":\"axios를 버리고 타입 안전한 gRPC 세상으로\",\"date\":\"2026/01/05\",\"tags\":[\"React Native\",\"Connect RPC\",\"Protobuf\",\"gRPC\",\"typescript\"],\"categories\":[\"dev\",\"architecture\"],\"thumbnail\":\"assets/images/posts/thumbnails/react-native-connect-rpc-migration.png\"},\"content\":\"\\n# React Native에서 REST API를 Connect RPC로 마이그레이션하기\\n\\nAPI 문서의 중요함은 웹 개발자들 사이에서 말하면 입아플 정도로 널리 공감되는 주제이다. 이를 위해 많은 도구들이 존재하고 다양한 노력들이 이루어졌다.\\n나는 최근에 프로젝트를 진행하며 백엔드 입장에서 문서를 제공해야 했었고, 가져가기로 한 기술 스택에서 이 문서화 도구의 지원이 빈약함을 알게 되었다. 그래서 조금 더 많은 수작업이 필요해졌는데, 갑자기 회의감이 들었다. 코드와 코드의 대화 사이에 들어가는 사람의 손길, 이 헐거움이 어색하게 느껴졌다.\\n이 문제를 근본적으로 해결하기 위해 REST API를 버리고 [Connect RPC](https://connectrpc.com/)로 전환하기로 결정했다. Connect RPC는 [gRPC](https://grpc.io/)의 장점(타입 안전성, 코드 생성)을 가져오면서도 HTTP/1.1을 지원해 React Native에서도 사용할 수 있다.\\n\\n## 왜 Connect RPC인가?\\n\\n### REST API의 문제점\\n\\n기존에는 [axios](https://axios-http.com/)로 REST API를 호출하고, 응답 타입을 수동으로 정의했다.\\n\\n```typescript\\n// 수동으로 작성한 타입\\ninterface ProfileResponse {\\n  profile: {\\n    userId: number;\\n    nickname: string;\\n    // ... 30개 이상의 필드\\n  };\\n}\\n\\n// API 호출\\nconst response = await axios.get\u003cProfileResponse\u003e('/profiles/me');\\n```\\n\\n이 방식은 종종 이런 문제를 야기할 수 있다.\\n\\n1. **(그럴 일은 절대 없어야 하지만)백엔드가 API를 일방적으로 변경하면 프론트엔드는 런타임 에러가 나서야 안다**\\n2. **타입 정의가 실제 API와 달라져도 TypeScript는 모른다**\\n3. **필드 하나 추가될 때마다 타입 정의를 찾아서 수정해야 한다**\\n\\n### Connect RPC의 장점\\n\\nConnect RPC는 [Protobuf](https://protobuf.dev/) 스키마를 공유하고 코드를 자동 생성한다.\\n\\n```protobuf\\n// proto 파일 (백엔드와 공유)\\nmessage Profile {\\n  int64 user_id = 1;\\n  optional string nickname = 2;\\n  // ...\\n}\\n\\nservice ProfileService {\\n  rpc GetMyProfile(GetMyProfileRequest) returns (GetMyProfileResponse);\\n}\\n```\\n\\n이 스키마에서 TypeScript 타입과 클라이언트 코드가 자동 생성되므로 아래와 같은 효과를 볼 수 있다.\\n\\n1. **백엔드가 스키마를 바꾸면 프론트엔드의 타입이 컴파일 타임에 깨진다**\\n2. **타입 정의가 항상 실제 API와 일치한다**\\n3. **proto 파일만 받으면 코드 생성으로 모든 게 업데이트된다**\\n\\n## 1. Protobuf Repository 추가\\n\\n백엔드와 proto 파일을 공유하기 위해 별도 저장소를 만들고 [git submodule](https://git-scm.com/book/en/v2/Git-Tools-Submodules)로 관리하기로 했다.\\n\\n```bash\\n# proto repository를 submodule로 추가\\ngit submodule add git@github.com:your-org/myapp-proto.git proto\\n\\n# 폴더 구조\\nproto/\\n  ├── myapp/\\n  │   └── v1/\\n  │       ├── auth.proto\\n  │       ├── profile.proto\\n  │       └── interest.proto\\n  └── buf.yaml\\n```\\n\\nproto 파일 예시\\n\\n```protobuf\\n// myapp/v1/auth.proto\\nsyntax = \\\"proto3\\\";\\n\\npackage myapp.v1;\\n\\nservice AuthService {\\n  rpc RequestSignup(RequestSignupRequest) returns (RequestSignupResponse);\\n  rpc VerifySignup(VerifySignupRequest) returns (VerifySignupResponse);\\n  rpc GetMe(GetMeRequest) returns (GetMeResponse);\\n}\\n\\nmessage RequestSignupRequest {\\n  string email = 1;\\n}\\n\\nmessage RequestSignupResponse {\\n  string message = 1;\\n}\\n\\nmessage VerifySignupRequest {\\n  string email = 1;\\n  string code = 2;\\n}\\n\\nmessage VerifySignupResponse {\\n  string access_token = 1;\\n  string refresh_token = 2;\\n}\\n```\\n\\n## 2. 패키지 설치\\n\\nConnect RPC와 Protobuf 관련 패키지를 설치한다.\\n\\n```bash\\n# 런타임 라이브러리\\nyarn add @connectrpc/connect @connectrpc/connect-web @bufbuild/protobuf\\n\\n# 코드 생성 도구 (dev dependencies)\\nyarn add -D @bufbuild/buf @bufbuild/protoc-gen-es @connectrpc/protoc-gen-connect-es\\n```\\n\\n각 패키지의 역할\\n\\n- `@connectrpc/connect`: Connect RPC 핵심 라이브러리\\n- `@connectrpc/connect-web`: HTTP/1.1 기반 transport (React Native 호환)\\n- `@bufbuild/protobuf`: Protobuf 메시지 런타임\\n- [`@bufbuild/buf`](https://buf.build/docs/introduction): 코드 생성 CLI\\n- `@bufbuild/protoc-gen-es`: TypeScript 타입 생성 플러그인\\n- `@connectrpc/protoc-gen-connect-es`: Connect 서비스 클라이언트 생성 플러그인\\n\\n## 3. buf 설정 및 코드 생성\\n\\n`buf.gen.yaml` 파일을 만들어 코드 생성 설정을 작성한다.\\n\\n```yaml\\n# buf.gen.yaml\\nversion: v2\\ninputs:\\n  - directory: proto\\nplugins:\\n  - local: protoc-gen-es\\n    out: gen\\n    opt:\\n      - target=ts\\n  - local: protoc-gen-connect-es\\n    out: gen\\n    opt:\\n      - target=ts\\n```\\n\\npackage.json에 코드 생성 스크립트를 추가한다.\\n\\n```json\\n{\\n  \\\"scripts\\\": {\\n    \\\"generate\\\": \\\"buf generate\\\"\\n  }\\n}\\n```\\n\\n코드를 생성한다.\\n\\n```bash\\nyarn generate\\n```\\n\\n이제 `gen/` 폴더에 TypeScript 코드가 자동 생성된다.\\n\\n```\\ngen/\\n  └── myapp/\\n      └── v1/\\n          ├── auth_pb.ts        # 메시지 타입\\n          ├── auth_connect.ts   # 서비스 정의\\n          ├── profile_pb.ts\\n          ├── profile_connect.ts\\n          └── ...\\n```\\n\\n생성된 코드 예시\\n\\n```typescript\\n// gen/myapp/v1/auth_pb.ts\\nexport type VerifySignupRequest = Message\u003c'myapp.v1.VerifySignupRequest'\u003e \u0026 {\\n  email: string;\\n  code: string;\\n};\\n\\nexport type VerifySignupResponse = Message\u003c'myapp.v1.VerifySignupResponse'\u003e \u0026 {\\n  accessToken: string;\\n  refreshToken: string;\\n};\\n```\\n\\n## 4. Metro 설정 (중요!)\\n\\nReact Native의 [Metro bundler](https://metrobundler.dev/)가 Connect 패키지의 [package exports](https://nodejs.org/api/packages.html#exports)를 인식하도록 설정해야 한다. 이 설정이 없으면 런타임 에러가 발생한다.\\n\\n```javascript\\n// metro.config.js\\nconst { getDefaultConfig } = require('expo/metro-config');\\n\\nconst config = getDefaultConfig(__dirname);\\n\\n// package exports 활성화 (필수!)\\nconfig.resolver.unstable_enablePackageExports = true;\\n\\nmodule.exports = config;\\n```\\n\\nConnect 패키지는 Node.js 스타일의 package exports를 사용하는데, React Native의 Metro bundler는 기본적으로 이를 지원하지 않기 때문이다.\\n\\n## 5. Transport 및 클라이언트 설정\\n\\nConnect 클라이언트를 설정한다.\\n\\n```typescript\\n// api/transport.ts\\nimport { createClient } from '@connectrpc/connect';\\nimport { createConnectTransport } from '@connectrpc/connect-web';\\n\\nimport { AuthService } from '@/gen/myapp/v1/auth_pb';\\nimport { ProfileService } from '@/gen/myapp/v1/profile_pb';\\nimport { InterestService } from '@/gen/myapp/v1/interest_pb';\\n\\nimport { createAuthInterceptor, createLoggingInterceptor } from './interceptors';\\n\\nconst API_URL = process.env.EXPO_PUBLIC_SERVER_URL;\\n\\nif (!API_URL) {\\n  throw new Error('EXPO_PUBLIC_SERVER_URL is not defined');\\n}\\n\\nconst transport = createConnectTransport({\\n  baseUrl: API_URL,\\n  interceptors: [createLoggingInterceptor(), createAuthInterceptor()],\\n});\\n\\nexport const authClient = createClient(AuthService, transport);\\nexport const profileClient = createClient(ProfileService, transport);\\nexport const interestClient = createClient(InterestService, transport);\\n```\\n\\n## 6. 인터셉터 구현\\n\\n인증 토큰 주입과 에러 핸들링을 위한 인터셉터를 구현한다.\\n\\n```typescript\\n// api/interceptors.ts\\nimport type { Interceptor } from '@connectrpc/connect';\\n\\nimport { useAuthStore } from '@/stores/authStore';\\n\\nexport const createAuthInterceptor = (): Interceptor =\u003e next =\u003e async req =\u003e {\\n  const token = useAuthStore.getState().accessToken;\\n\\n  if (token) {\\n    req.header.set('Authorization', `Bearer ${token}`);\\n  }\\n\\n  return await next(req);\\n};\\n\\nexport const createLoggingInterceptor = (): Interceptor =\u003e next =\u003e async req =\u003e {\\n  console.log(`[Connect] ${req.method.name}`, req.message);\\n\\n  const response = await next(req);\\n\\n  console.log(`[Connect] ${req.method.name} response`, response.message);\\n\\n  return response;\\n};\\n```\\n\\nConnect의 인터셉터는 axios의 인터셉터와 비슷하지만 더 type-safe하다. 요청과 응답에 대한 모든 정보가 타입으로 보장된다.\\n\\n## 7. 에러 핸들링\\n\\nConnect RPC에서는 두 가지 에러 처리 방식이 있다.\\n\\n1. **Network/Protocol 에러** - Connect의 기본 `ConnectError` (네트워크 장애, 인증 실패 등)\\n2. **비즈니스 로직 에러** - Protobuf로 정의된 `Error` 메시지\\n\\n먼저 proto에 Error 메시지를 정의한다.\\n\\n```protobuf\\n// proto/myapp/v1/common.proto\\nmessage Error {\\n  ErrorCode code = 1;\\n  string message = 2;\\n  map\u003cstring, string\u003e details = 3;\\n}\\n\\nenum ErrorCode {\\n  ERROR_CODE_UNSPECIFIED = 0;\\n  ERROR_CODE_PROFILE_NOT_FOUND = 1;\\n  ERROR_CODE_AUTH_ERROR = 2;\\n  ERROR_CODE_INVALID_TOKEN = 3;\\n  // ...\\n}\\n```\\n\\n모든 응답은 `oneof result` 패턴을 사용한다.\\n\\n```protobuf\\nmessage VerifySignupResponse {\\n  oneof result {\\n    VerifySignupSuccess success = 1;\\n    Error error = 2;\\n  }\\n}\\n\\nmessage VerifySignupSuccess {\\n  string access_token = 1;\\n  string refresh_token = 2;\\n}\\n```\\n\\n이 패턴을 처리하기 위해 `unwrap()` 함수와 `ApplicationError` 클래스를 만든다.\\n\\n```typescript\\n// api/connectError.ts\\nimport { ConnectError } from '@connectrpc/connect';\\n\\nimport { Error as ProtoError, ErrorCode } from '@/gen/myapp/v1/common_pb';\\n\\n/**\\n * 비즈니스 로직 에러\\n * Proto에 정의된 Error 메시지를 래핑함\\n */\\nexport class ApplicationError extends Error {\\n  code: ErrorCode;\\n  details: { [key: string]: string };\\n\\n  constructor(code: ErrorCode, message: string, details: { [key: string]: string } = {}) {\\n    super(message);\\n    this.code = code;\\n    this.details = details;\\n    Object.setPrototypeOf(this, ApplicationError.prototype);\\n  }\\n\\n  static fromProto(error: ProtoError): ApplicationError {\\n    return new ApplicationError(error.code, error.message, error.details);\\n  }\\n}\\n\\n/**\\n * oneof result에서 성공값을 추출하거나 에러를 throw\\n */\\nexport function unwrap\u003cT\u003e(response: {\\n  result:\\n    | { case: 'success'; value: T }\\n    | { case: 'error'; value: ProtoError }\\n    | { case: undefined };\\n}): NonNullable\u003cT\u003e {\\n  if (response.result.case === 'error') {\\n    throw ApplicationError.fromProto(response.result.value);\\n  }\\n  if (response.result.case === 'success') {\\n    return response.result.value as NonNullable\u003cT\u003e;\\n  }\\n  throw new ApplicationError(ErrorCode.INTERNAL, 'Unknown response result');\\n}\\n\\n/**\\n * ConnectError를 ApplicationError로 변환\\n */\\nexport const handleConnectError = (error: unknown): ApplicationError =\u003e {\\n  if (error instanceof ApplicationError) {\\n    return error;\\n  }\\n\\n  if (error instanceof ConnectError) {\\n    // 네트워크 에러 등을 SYSTEM_ERROR로 매핑\\n    return new ApplicationError(ErrorCode.SYSTEM_ERROR, error.message);\\n  }\\n\\n  if (error instanceof Error) {\\n    return new ApplicationError(\\n      ErrorCode.INTERNAL,\\n      error.message || '알 수 없는 오류가 발생했습니다',\\n    );\\n  }\\n\\n  return new ApplicationError(ErrorCode.UNSPECIFIED, '알 수 없는 오류가 발생했습니다');\\n};\\n```\\n\\n### 백엔드 구현\\n\\n백엔드는 비즈니스 로직 에러를 Protobuf `Error` 메시지로 만든다. 이 방식을 사용하면 에러 코드가 proto enum으로 정의되어 백엔드-프론트엔드 간 타입 일치가 보장된다.\\n\\n```go\\n// internal/response/errors.go\\nfunc NewConnectError(code domain.ErrorCode, err error) *connect.Error {\\n  connectErr := connect.NewError(toConnectCode(code), err)\\n\\n  // Protobuf Error 메시지 생성\\n  protoErr := \u0026duologuev1.Error{\\n    Code:    domain.ToProtoErrorCode(code),\\n    Message: err.Error(),\\n    Details: make(map[string]string),\\n  }\\n\\n  // Error를 Connect error detail로 추가\\n  if detail, detailErr := connect.NewErrorDetail(protoErr); detailErr == nil {\\n    connectErr.AddDetail(detail)\\n  }\\n\\n  return connectErr\\n}\\n```\\n\\n### 인터셉터에서 에러 코드별 처리\\n\\n인터셉터에서 특정 에러 코드에 대한 공통 처리를 할 수 있다.\\n\\n```typescript\\n// api/interceptors.ts\\nexport const createAuthInterceptor = (): Interceptor =\u003e next =\u003e async req =\u003e {\\n  const token = useAuthStore.getState().accessToken;\\n  if (token) {\\n    req.header.set('Authorization', `Bearer ${token}`);\\n  }\\n\\n  try {\\n    return await next(req);\\n  } catch (error) {\\n    if (error instanceof ApplicationError) {\\n      // 프로필 없음 → 로그아웃 처리\\n      if (error.code === ErrorCode.PROFILE_NOT_FOUND) {\\n        useAuthStore.getState().clearAuth();\\n        router.replace('/');\\n        throw error;\\n      }\\n\\n      // 인증 에러 → 토큰 갱신 시도\\n      if (\\n        error.code === ErrorCode.AUTH_ERROR ||\\n        error.code === ErrorCode.AUTH_REQUIRED ||\\n        error.code === ErrorCode.INVALID_TOKEN\\n      ) {\\n        const newToken = await tokenRefreshManager.refresh();\\n        req.header.set('Authorization', `Bearer ${newToken}`);\\n        return await next(req); // 재시도\\n      }\\n    }\\n\\n    throw error;\\n  }\\n};\\n```\\n\\n이렇게 함으로써 이제 에러를 보다 편하게 다룰 수 있다.\\n\\n1. **타입 안전한 에러 처리** - ErrorCode enum으로 가능한 에러를 컴파일 타임에 알 수 있음\\n2. **중앙화된 에러 처리** - 인터셉터에서 공통 에러 로직 처리\\n3. **명시적인 에러 흐름** - oneof를 통해 성공/실패가 proto 레벨에서 명확히 구분됨\\n\\n## 8. API 레이어 마이그레이션\\n\\n이제 기존 axios 기반 API를 Connect로 교체한다.\\n\\n### Before (axios)\\n\\n```typescript\\n// api/auth.ts (before)\\nimport { apiClient } from './client';\\n\\ninterface VerifySignupRequest {\\n  email: string;\\n  code: string;\\n}\\n\\ninterface TokenResponse {\\n  access_token: string;\\n  refresh_token: string;\\n}\\n\\nexport const authApi = {\\n  verifySignup: async (email: string, code: string): Promise\u003cTokenResponse\u003e =\u003e {\\n    const response = await apiClient.post\u003cTokenResponse\u003e('/auth/verify-signup', {\\n      email,\\n      code,\\n    });\\n    return response.data;\\n  },\\n};\\n```\\n\\n### After (Connect)\\n\\n```typescript\\n// api/auth.ts (after)\\nimport { create } from '@bufbuild/protobuf';\\n\\nimport { VerifySignupRequestSchema } from '@/gen/myapp/v1/auth_pb';\\n\\nimport { handleConnectError } from './connectError';\\nimport { authClient } from './transport';\\n\\ninterface TokenResponse {\\n  accessToken: string;\\n  refreshToken: string;\\n}\\n\\nexport const authApi = {\\n  verifySignup: async (email: string, code: string): Promise\u003cTokenResponse\u003e =\u003e {\\n    try {\\n      const request = create(VerifySignupRequestSchema, { email, code });\\n      const response = await authClient.verifySignup(request);\\n      const result = unwrap(response); // oneof result 처리\\n      return {\\n        accessToken: result.accessToken,\\n        refreshToken: result.refreshToken,\\n      };\\n    } catch (error) {\\n      throw handleConnectError(error);\\n    }\\n  },\\n};\\n```\\n\\n변경된 점은 다음과 같다.\\n\\n1. **타입을 수동으로 정의하지 않는다** - proto에서 자동 생성됨\\n2. **URL 경로를 하드코딩하지 않는다** - 서비스 정의에 포함됨\\n3. **create()로 요청 메시지를 생성한다** - 타입 안전성 보장\\n\\n### Profile API 예시\\n\\n```typescript\\n// api/profile.ts\\nimport { create } from '@bufbuild/protobuf';\\n\\nimport { GetMyProfileRequestSchema, UpdateMyProfileRequestSchema } from '@/gen/myapp/v1/profile_pb';\\n\\nimport { handleConnectError } from './connectError';\\nimport { profileClient } from './transport';\\n\\nexport const profileApi = {\\n  getMe: async (): Promise\u003cProfileMe\u003e =\u003e {\\n    try {\\n      const request = create(GetMyProfileRequestSchema, {});\\n      const response = await profileClient.getMyProfile(request);\\n      const result = unwrap(response); // oneof result 처리\\n\\n      return mapProfile(result.profile);\\n    } catch (error) {\\n      throw handleConnectError(error);\\n    }\\n  },\\n\\n  updateMe: async (data: UpdateProfileData): Promise\u003cProfileMe\u003e =\u003e {\\n    try {\\n      const request = create(UpdateMyProfileRequestSchema, {\\n        nickname: data.nickname,\\n        gender: data.gender,\\n        region: data.region,\\n        shortBio: data.shortBio,\\n        profileImageUrl: data.profileImageUrl,\\n        interestIds: data.interestIds?.map(id =\u003e BigInt(id)) ?? [],\\n      });\\n\\n      const response = await profileClient.updateMyProfile(request);\\n      const result = unwrap(response); // oneof result 처리\\n\\n      return mapProfile(result.profile);\\n    } catch (error) {\\n      throw handleConnectError(error);\\n    }\\n  },\\n};\\n```\\n\\n## 9. React Query 훅은 그대로\\n\\n[React Query](https://tanstack.com/query/latest) 훅은 API 함수만 호출하므로 수정할 필요가 없다.\\n\\n```typescript\\n// queries/useMutationAuth.ts\\nexport const useVerifySignup = () =\u003e {\\n  return useMutation({\\n    mutationFn: ({ email, code }: VerifySignupParams) =\u003e authApi.verifySignup(email, code),\\n    onSuccess: data =\u003e {\\n      setTokens(data.accessToken, data.refreshToken);\\n    },\\n  });\\n};\\n```\\n\\nAPI 레이어만 교체했으므로 컴포넌트 코드는 전혀 수정하지 않아도 된다.\\n\\n## 10. axios 제거\\n\\n마이그레이션이 완료되면 axios를 제거한다.\\n\\n```bash\\nyarn remove axios\\n```\\n\\n기존에 axios를 사용하던 파일들도 삭제한다.\\n\\n```bash\\nrm api/client.ts  # axios 클라이언트\\n```\\n\\n## 결과\\n\\n### 타입 안전성 확보\\n\\n이제 백엔드가 API를 변경하면 프론트엔드가 **컴파일 타임에** 에러가 발생한다.\\n\\n```typescript\\n// proto에서 nickname 필드가 제거되면\\nconst profile = await profileApi.getMe();\\nconsole.log(profile.nickname); // ❌ TypeScript 에러: 'nickname' does not exist\\n```\\n\\n### 개발 경험 개선\\n\\n1. **자동 완성이 정확하다** - proto에 정의된 필드만 자동 완성됨\\n2. **리팩토링이 안전하다** - 필드명을 바꾸면 사용하는 모든 곳에서 에러 발생\\n3. **문서가 필요 없다** - proto 파일이 곧 API 명세서\\n\\n### 유지보수 비용 감소\\n\\n- 타입 정의를 수동으로 관리할 필요 없음\\n- snake_case ↔ camelCase 변환 코드 불필요\\n- API 변경 시 영향받는 코드를 TypeScript가 알려줌\\n\\n## Binary vs JSON\\n\\nConnect RPC는 binary(Protobuf)와 JSON 두 가지 포맷을 지원한다. `createConnectTransport`는 기본적으로 binary 포맷을 사용하므로, 별도 설정 없이도 binary의 이점을 누릴 수 있다.\\n\\n- **Binary (기본값)** - 더 작은 페이로드, 더 빠른 직렬화/역직렬화\\n- **JSON** - 디버깅이 쉬움 (네트워크 탭에서 내용 확인 가능)\\n\\nProto 스키마의 타입 안전성을 유지하면서 실제 통신 데이터 포맷은 선택할 수 있다는 것이 Connect RPC의 큰 장점이다. 개발 환경에서 디버깅이 필요하다면 JSON으로, 프로덕션에서는 Binary로 전환하는 것도 가능하다.\\n\\n```typescript\\nconst transport = createConnectTransport({\\n  baseUrl: API_URL,\\n  useBinaryFormat: false, // JSON 사용 (디버깅 시 편리)\\n  // useBinaryFormat을 생략하면 기본값인 true(binary)가 적용됨\\n});\\n```\\n\\n## 주의사항\\n\\n### 1. Metro 설정 필수\\n\\n`unstable_enablePackageExports`를 활성화하지 않으면 런타임 에러가 발생한다. 이 설정을 빠뜨리면 앱이 제대로 실행되지 않는다.\\n\\n### 2. Streaming은 미지원\\n\\nConnect RPC는 [Unary RPC](https://grpc.io/docs/what-is-grpc/core-concepts/#unary-rpc)만 지원한다. [Server Streaming](https://grpc.io/docs/what-is-grpc/core-concepts/#server-streaming-rpc)이나 [Bidirectional Streaming](https://grpc.io/docs/what-is-grpc/core-concepts/#bidirectional-streaming-rpc)은 React Native에서 작동하지 않는다.\\n\\n### 3. 코드 생성 타이밍\\n\\nproto 파일이 변경되면 `yarn generate`를 다시 실행해야 한다. submodule을 업데이트할 때마다 실행하는 것을 잊지 말자.\\n\\n```bash\\n# proto submodule 업데이트 후\\ngit submodule update --remote proto\\nyarn generate\\n```\\n\\nproto 파일은 Protobuf의 네이밍 규칙에 따라 snake_case를 사용하지만, Connect는 코드 생성 시 자동으로 TypeScript의 camelCase로 변환해준다.\\n\\n## 마무리\\n\\nREST API에서 Connect RPC로 마이그레이션하면서 가장 만족스러운 점은 **타입 안전성**이다. 백엔드가 API를 변경하면 프론트엔드가 런타임이 아닌 컴파일 타임에 깨지므로, 배포 전에 문제를 발견할 수 있다.\\n\\n수동으로 타입을 정의하던 시간을 아낄 수 있고, proto 파일만 보면 API 명세를 정확히 알 수 있어 문서를 별도로 관리할 필요도 없어졌다.\\n\\n백엔드와 프론트엔드가 상호완결성을 가지는 서비스 프로덕트라면 gRPC 도입을 고려 해보는 것도 나쁘지 않은 것 같다.\\n\"},\"meta\":{\"title\":\"React Native에서 REST API를 Connect RPC로 마이그레이션하기\",\"description\":\"axios를 버리고 타입 안전한 gRPC 세상으로\",\"date\":\"2026/01/05\",\"tags\":[\"React Native\",\"Connect RPC\",\"Protobuf\",\"gRPC\",\"typescript\"],\"categories\":[\"dev\",\"architecture\"],\"thumbnail\":\"assets/images/posts/thumbnails/react-native-connect-rpc-migration.png\"},\"content\":\"\u003ch1 id=\\\"react-native에서-rest-api를-connect-rpc로-마이그레이션하기\\\" class=\\\"heading\\\"\u003eReact Native에서 REST API를 Connect RPC로 마이그레이션하기\u003c/h1\u003e\\n\u003cp\u003eAPI 문서의 중요함은 웹 개발자들 사이에서 말하면 입아플 정도로 널리 공감되는 주제이다. 이를 위해 많은 도구들이 존재하고 다양한 노력들이 이루어졌다.\\n나는 최근에 프로젝트를 진행하며 백엔드 입장에서 문서를 제공해야 했었고, 가져가기로 한 기술 스택에서 이 문서화 도구의 지원이 빈약함을 알게 되었다. 그래서 조금 더 많은 수작업이 필요해졌는데, 갑자기 회의감이 들었다. 코드와 코드의 대화 사이에 들어가는 사람의 손길, 이 헐거움이 어색하게 느껴졌다.\\n이 문제를 근본적으로 해결하기 위해 REST API를 버리고 \u003ca href=\\\"https://connectrpc.com/\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferer\\\"\u003eConnect RPC\u003c/a\u003e로 전환하기로 결정했다. Connect RPC는 \u003ca href=\\\"https://grpc.io/\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferer\\\"\u003egRPC\u003c/a\u003e의 장점(타입 안전성, 코드 생성)을 가져오면서도 HTTP/1.1을 지원해 React Native에서도 사용할 수 있다.\u003c/p\u003e\\n\u003ch2 id=\\\"왜-connect-rpc인가\\\" class=\\\"heading\\\"\u003e왜 Connect RPC인가?\u003c/h2\u003e\\n\u003ch3 id=\\\"rest-api의-문제점\\\"\u003eREST API의 문제점\u003c/h3\u003e\\n\u003cp\u003e기존에는 \u003ca href=\\\"https://axios-http.com/\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferer\\\"\u003eaxios\u003c/a\u003e로 REST API를 호출하고, 응답 타입을 수동으로 정의했다.\u003c/p\u003e\\n\u003cpre class=\\\"language-typescript\\\"\u003e\u003ccode class=\\\"language-typescript code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// 수동으로 작성한 타입\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003einterface\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eProfileResponse\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  profile\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    userId\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003enumber\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    nickname\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token comment\\\"\u003e// ... 30개 이상의 필드\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// API 호출\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e response \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eawait\u003c/span\u003e axios\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token generic-function\\\"\u003e\u003cspan class=\\\"token function\\\"\u003eget\u003c/span\u003e\u003cspan class=\\\"token generic class-name\\\"\u003e\u003cspan class=\\\"token operator\\\"\u003e\u0026#x3C;\u003c/span\u003eProfileResponse\u003cspan class=\\\"token operator\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e'/profiles/me'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e이 방식은 종종 이런 문제를 야기할 수 있다.\u003c/p\u003e\\n\u003col\u003e\\n\u003cli\u003e\u003cstrong\u003e(그럴 일은 절대 없어야 하지만)백엔드가 API를 일방적으로 변경하면 프론트엔드는 런타임 에러가 나서야 안다\u003c/strong\u003e\u003c/li\u003e\\n\u003cli\u003e\u003cstrong\u003e타입 정의가 실제 API와 달라져도 TypeScript는 모른다\u003c/strong\u003e\u003c/li\u003e\\n\u003cli\u003e\u003cstrong\u003e필드 하나 추가될 때마다 타입 정의를 찾아서 수정해야 한다\u003c/strong\u003e\u003c/li\u003e\\n\u003c/ol\u003e\\n\u003ch3 id=\\\"connect-rpc의-장점\\\"\u003eConnect RPC의 장점\u003c/h3\u003e\\n\u003cp\u003eConnect RPC는 \u003ca href=\\\"https://protobuf.dev/\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferer\\\"\u003eProtobuf\u003c/a\u003e 스키마를 공유하고 코드를 자동 생성한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-protobuf\\\"\u003e\u003ccode class=\\\"language-protobuf code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// proto 파일 (백엔드와 공유)\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003emessage\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eProfile\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token builtin\\\"\u003eint64\u003c/span\u003e user_id \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003eoptional\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e nickname \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e2\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token comment\\\"\u003e// ...\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eservice\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eProfileService\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003erpc\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003eGetMyProfile\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token class-name\\\"\u003eGetMyProfileRequest\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003ereturns\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token class-name\\\"\u003eGetMyProfileResponse\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e이 스키마에서 TypeScript 타입과 클라이언트 코드가 자동 생성되므로 아래와 같은 효과를 볼 수 있다.\u003c/p\u003e\\n\u003col\u003e\\n\u003cli\u003e\u003cstrong\u003e백엔드가 스키마를 바꾸면 프론트엔드의 타입이 컴파일 타임에 깨진다\u003c/strong\u003e\u003c/li\u003e\\n\u003cli\u003e\u003cstrong\u003e타입 정의가 항상 실제 API와 일치한다\u003c/strong\u003e\u003c/li\u003e\\n\u003cli\u003e\u003cstrong\u003eproto 파일만 받으면 코드 생성으로 모든 게 업데이트된다\u003c/strong\u003e\u003c/li\u003e\\n\u003c/ol\u003e\\n\u003ch2 id=\\\"1-protobuf-repository-추가\\\" class=\\\"heading\\\"\u003e1. Protobuf Repository 추가\u003c/h2\u003e\\n\u003cp\u003e백엔드와 proto 파일을 공유하기 위해 별도 저장소를 만들고 \u003ca href=\\\"https://git-scm.com/book/en/v2/Git-Tools-Submodules\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferer\\\"\u003egit submodule\u003c/a\u003e로 관리하기로 했다.\u003c/p\u003e\\n\u003cpre class=\\\"language-bash\\\"\u003e\u003ccode class=\\\"language-bash code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e# proto repository를 submodule로 추가\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token function\\\"\u003egit\u003c/span\u003e submodule \u003cspan class=\\\"token function\\\"\u003eadd\u003c/span\u003e git@github.com:your-org/myapp-proto.git proto\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e# 폴더 구조\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003eproto/\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  ├── myapp/\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  │   └── v1/\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  │       ├── auth.proto\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  │       ├── profile.proto\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  │       └── interest.proto\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  └── buf.yaml\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003eproto 파일 예시\u003c/p\u003e\\n\u003cpre class=\\\"language-protobuf\\\"\u003e\u003ccode class=\\\"language-protobuf code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// myapp/v1/auth.proto\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003esyntax\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e\\\"proto3\\\"\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003epackage\u003c/span\u003e myapp\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003ev1\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eservice\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eAuthService\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003erpc\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003eRequestSignup\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token class-name\\\"\u003eRequestSignupRequest\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003ereturns\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token class-name\\\"\u003eRequestSignupResponse\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003erpc\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003eVerifySignup\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token class-name\\\"\u003eVerifySignupRequest\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003ereturns\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token class-name\\\"\u003eVerifySignupResponse\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003erpc\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003eGetMe\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token class-name\\\"\u003eGetMeRequest\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003ereturns\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token class-name\\\"\u003eGetMeResponse\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003emessage\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eRequestSignupRequest\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e email \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003emessage\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eRequestSignupResponse\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e message \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003emessage\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eVerifySignupRequest\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e email \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e code \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e2\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003emessage\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eVerifySignupResponse\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e access_token \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e refresh_token \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e2\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003ch2 id=\\\"2-패키지-설치\\\" class=\\\"heading\\\"\u003e2. 패키지 설치\u003c/h2\u003e\\n\u003cp\u003eConnect RPC와 Protobuf 관련 패키지를 설치한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-bash\\\"\u003e\u003ccode class=\\\"language-bash code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e# 런타임 라이브러리\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token function\\\"\u003eyarn\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003eadd\u003c/span\u003e @connectrpc/connect @connectrpc/connect-web @bufbuild/protobuf\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e# 코드 생성 도구 (dev dependencies)\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token function\\\"\u003eyarn\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003eadd\u003c/span\u003e \u003cspan class=\\\"token parameter variable\\\"\u003e-D\u003c/span\u003e @bufbuild/buf @bufbuild/protoc-gen-es @connectrpc/protoc-gen-connect-es\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e각 패키지의 역할\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003e\u003ccode\u003e@connectrpc/connect\u003c/code\u003e: Connect RPC 핵심 라이브러리\u003c/li\u003e\\n\u003cli\u003e\u003ccode\u003e@connectrpc/connect-web\u003c/code\u003e: HTTP/1.1 기반 transport (React Native 호환)\u003c/li\u003e\\n\u003cli\u003e\u003ccode\u003e@bufbuild/protobuf\u003c/code\u003e: Protobuf 메시지 런타임\u003c/li\u003e\\n\u003cli\u003e\u003ca href=\\\"https://buf.build/docs/introduction\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferer\\\"\u003e\u003ccode\u003e@bufbuild/buf\u003c/code\u003e\u003c/a\u003e: 코드 생성 CLI\u003c/li\u003e\\n\u003cli\u003e\u003ccode\u003e@bufbuild/protoc-gen-es\u003c/code\u003e: TypeScript 타입 생성 플러그인\u003c/li\u003e\\n\u003cli\u003e\u003ccode\u003e@connectrpc/protoc-gen-connect-es\u003c/code\u003e: Connect 서비스 클라이언트 생성 플러그인\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003ch2 id=\\\"3-buf-설정-및-코드-생성\\\" class=\\\"heading\\\"\u003e3. buf 설정 및 코드 생성\u003c/h2\u003e\\n\u003cp\u003e\u003ccode\u003ebuf.gen.yaml\u003c/code\u003e 파일을 만들어 코드 생성 설정을 작성한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-yaml\\\"\u003e\u003ccode class=\\\"language-yaml code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e# buf.gen.yaml\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token key atrule\\\"\u003eversion\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e v2\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token key atrule\\\"\u003einputs\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e-\u003c/span\u003e \u003cspan class=\\\"token key atrule\\\"\u003edirectory\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e proto\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token key atrule\\\"\u003eplugins\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e-\u003c/span\u003e \u003cspan class=\\\"token key atrule\\\"\u003elocal\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e protoc\u003cspan class=\\\"token punctuation\\\"\u003e-\u003c/span\u003egen\u003cspan class=\\\"token punctuation\\\"\u003e-\u003c/span\u003ees\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token key atrule\\\"\u003eout\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e gen\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token key atrule\\\"\u003eopt\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token punctuation\\\"\u003e-\u003c/span\u003e target=ts\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e-\u003c/span\u003e \u003cspan class=\\\"token key atrule\\\"\u003elocal\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e protoc\u003cspan class=\\\"token punctuation\\\"\u003e-\u003c/span\u003egen\u003cspan class=\\\"token punctuation\\\"\u003e-\u003c/span\u003econnect\u003cspan class=\\\"token punctuation\\\"\u003e-\u003c/span\u003ees\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token key atrule\\\"\u003eout\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e gen\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token key atrule\\\"\u003eopt\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token punctuation\\\"\u003e-\u003c/span\u003e target=ts\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003epackage.json에 코드 생성 스크립트를 추가한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-json\\\"\u003e\u003ccode class=\\\"language-json code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token property\\\"\u003e\\\"scripts\\\"\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token property\\\"\u003e\\\"generate\\\"\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e\\\"buf generate\\\"\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e코드를 생성한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-bash\\\"\u003e\u003ccode class=\\\"language-bash code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token function\\\"\u003eyarn\u003c/span\u003e generate\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e이제 \u003ccode\u003egen/\u003c/code\u003e 폴더에 TypeScript 코드가 자동 생성된다.\u003c/p\u003e\\n\u003cpre\u003e\u003ccode class=\\\"code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003egen/\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  └── myapp/\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      └── v1/\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e          ├── auth_pb.ts        # 메시지 타입\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e          ├── auth_connect.ts   # 서비스 정의\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e          ├── profile_pb.ts\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e          ├── profile_connect.ts\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e          └── ...\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e생성된 코드 예시\u003c/p\u003e\\n\u003cpre class=\\\"language-typescript\\\"\u003e\u003ccode class=\\\"language-typescript code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// gen/myapp/v1/auth_pb.ts\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003etype\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eVerifySignupRequest\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e Message\u003cspan class=\\\"token operator\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e'myapp.v1.VerifySignupRequest'\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e\u003e\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e\u0026#x26;\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  email\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  code\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003etype\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eVerifySignupResponse\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e Message\u003cspan class=\\\"token operator\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e'myapp.v1.VerifySignupResponse'\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e\u003e\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e\u0026#x26;\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  accessToken\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  refreshToken\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003ch2 id=\\\"4-metro-설정-중요\\\" class=\\\"heading\\\"\u003e4. Metro 설정 (중요!)\u003c/h2\u003e\\n\u003cp\u003eReact Native의 \u003ca href=\\\"https://metrobundler.dev/\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferer\\\"\u003eMetro bundler\u003c/a\u003e가 Connect 패키지의 \u003ca href=\\\"https://nodejs.org/api/packages.html#exports\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferer\\\"\u003epackage exports\u003c/a\u003e를 인식하도록 설정해야 한다. 이 설정이 없으면 런타임 에러가 발생한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-javascript\\\"\u003e\u003ccode class=\\\"language-javascript code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// metro.config.js\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e getDefaultConfig \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003erequire\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e'expo/metro-config'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e config \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003egetDefaultConfig\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e__dirname\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// package exports 활성화 (필수!)\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003econfig\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token property-access\\\"\u003eresolver\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token property-access\\\"\u003eunstable_enablePackageExports\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token boolean\\\"\u003etrue\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003emodule\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token property-access\\\"\u003eexports\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e config\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003eConnect 패키지는 Node.js 스타일의 package exports를 사용하는데, React Native의 Metro bundler는 기본적으로 이를 지원하지 않기 때문이다.\u003c/p\u003e\\n\u003ch2 id=\\\"5-transport-및-클라이언트-설정\\\" class=\\\"heading\\\"\u003e5. Transport 및 클라이언트 설정\u003c/h2\u003e\\n\u003cp\u003eConnect 클라이언트를 설정한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-typescript\\\"\u003e\u003ccode class=\\\"language-typescript code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// api/transport.ts\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e createClient \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'@connectrpc/connect'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e createConnectTransport \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'@connectrpc/connect-web'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e AuthService \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'@/gen/myapp/v1/auth_pb'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e ProfileService \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'@/gen/myapp/v1/profile_pb'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e InterestService \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'@/gen/myapp/v1/interest_pb'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e createAuthInterceptor\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e createLoggingInterceptor \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'./interceptors'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e \u003cspan class=\\\"token constant\\\"\u003eAPI_URL\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e process\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eenv\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token constant\\\"\u003eEXPO_PUBLIC_SERVER_URL\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eif\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e!\u003c/span\u003e\u003cspan class=\\\"token constant\\\"\u003eAPI_URL\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003ethrow\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003enew\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e'EXPO_PUBLIC_SERVER_URL is not defined'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e transport \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003ecreateConnectTransport\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  baseUrl\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token constant\\\"\u003eAPI_URL\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  interceptors\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003ecreateLoggingInterceptor\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003ecreateAuthInterceptor\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e authClient \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003ecreateClient\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eAuthService\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e transport\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e profileClient \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003ecreateClient\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eProfileService\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e transport\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e interestClient \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003ecreateClient\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eInterestService\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e transport\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003ch2 id=\\\"6-인터셉터-구현\\\" class=\\\"heading\\\"\u003e6. 인터셉터 구현\u003c/h2\u003e\\n\u003cp\u003e인증 토큰 주입과 에러 핸들링을 위한 인터셉터를 구현한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-typescript\\\"\u003e\u003ccode class=\\\"language-typescript code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// api/interceptors.ts\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003etype\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e Interceptor \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'@connectrpc/connect'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e useAuthStore \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'@/stores/authStore'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e createAuthInterceptor \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e Interceptor \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e next \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003easync\u003c/span\u003e req \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e token \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e useAuthStore\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003egetState\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eaccessToken\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003eif\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003etoken\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    req\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eheader\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003eset\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e'Authorization'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token template-string\\\"\u003e\u003cspan class=\\\"token template-punctuation string\\\"\u003e`\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003eBearer \u003c/span\u003e\u003cspan class=\\\"token interpolation\\\"\u003e\u003cspan class=\\\"token interpolation-punctuation punctuation\\\"\u003e${\u003c/span\u003etoken\u003cspan class=\\\"token interpolation-punctuation punctuation\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"token template-punctuation string\\\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eawait\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003enext\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ereq\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e createLoggingInterceptor \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e Interceptor \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e next \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003easync\u003c/span\u003e req \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token builtin\\\"\u003econsole\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003elog\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token template-string\\\"\u003e\u003cspan class=\\\"token template-punctuation string\\\"\u003e`\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e[Connect] \u003c/span\u003e\u003cspan class=\\\"token interpolation\\\"\u003e\u003cspan class=\\\"token interpolation-punctuation punctuation\\\"\u003e${\u003c/span\u003ereq\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003emethod\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003ename\u003cspan class=\\\"token interpolation-punctuation punctuation\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"token template-punctuation string\\\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e req\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003emessage\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e response \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eawait\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003enext\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ereq\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token builtin\\\"\u003econsole\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003elog\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token template-string\\\"\u003e\u003cspan class=\\\"token template-punctuation string\\\"\u003e`\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e[Connect] \u003c/span\u003e\u003cspan class=\\\"token interpolation\\\"\u003e\u003cspan class=\\\"token interpolation-punctuation punctuation\\\"\u003e${\u003c/span\u003ereq\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003emethod\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003ename\u003cspan class=\\\"token interpolation-punctuation punctuation\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e response\u003c/span\u003e\u003cspan class=\\\"token template-punctuation string\\\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e response\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003emessage\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e response\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003eConnect의 인터셉터는 axios의 인터셉터와 비슷하지만 더 type-safe하다. 요청과 응답에 대한 모든 정보가 타입으로 보장된다.\u003c/p\u003e\\n\u003ch2 id=\\\"7-에러-핸들링\\\" class=\\\"heading\\\"\u003e7. 에러 핸들링\u003c/h2\u003e\\n\u003cp\u003eConnect RPC에서는 두 가지 에러 처리 방식이 있다.\u003c/p\u003e\\n\u003col\u003e\\n\u003cli\u003e\u003cstrong\u003eNetwork/Protocol 에러\u003c/strong\u003e - Connect의 기본 \u003ccode\u003eConnectError\u003c/code\u003e (네트워크 장애, 인증 실패 등)\u003c/li\u003e\\n\u003cli\u003e\u003cstrong\u003e비즈니스 로직 에러\u003c/strong\u003e - Protobuf로 정의된 \u003ccode\u003eError\u003c/code\u003e 메시지\u003c/li\u003e\\n\u003c/ol\u003e\\n\u003cp\u003e먼저 proto에 Error 메시지를 정의한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-protobuf\\\"\u003e\u003ccode class=\\\"language-protobuf code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// proto/myapp/v1/common.proto\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003emessage\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eError\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token positional-class-name class-name\\\"\u003eErrorCode\u003c/span\u003e code \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e message \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e2\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token map class-name\\\"\u003emap\u003cspan class=\\\"token punctuation\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e details \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e3\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eenum\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eErrorCode\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  ERROR_CODE_UNSPECIFIED \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e0\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  ERROR_CODE_PROFILE_NOT_FOUND \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  ERROR_CODE_AUTH_ERROR \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e2\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  ERROR_CODE_INVALID_TOKEN \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e3\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token comment\\\"\u003e// ...\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e모든 응답은 \u003ccode\u003eoneof result\u003c/code\u003e 패턴을 사용한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-protobuf\\\"\u003e\u003ccode class=\\\"language-protobuf code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003emessage\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eVerifySignupResponse\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003eoneof\u003c/span\u003e result \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token positional-class-name class-name\\\"\u003eVerifySignupSuccess\u003c/span\u003e success \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token positional-class-name class-name\\\"\u003eError\u003c/span\u003e error \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e2\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003emessage\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eVerifySignupSuccess\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e access_token \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e1\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e refresh_token \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token number\\\"\u003e2\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e이 패턴을 처리하기 위해 \u003ccode\u003eunwrap()\u003c/code\u003e 함수와 \u003ccode\u003eApplicationError\u003c/code\u003e 클래스를 만든다.\u003c/p\u003e\\n\u003cpre class=\\\"language-typescript\\\"\u003e\u003ccode class=\\\"language-typescript code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// api/connectError.ts\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e ConnectError \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'@connectrpc/connect'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e Error \u003cspan class=\\\"token keyword\\\"\u003eas\u003c/span\u003e ProtoError\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e ErrorCode \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'@/gen/myapp/v1/common_pb'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e/**\\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e * 비즈니스 로직 에러\\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e * Proto에 정의된 Error 메시지를 래핑함\\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e */\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eclass\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eApplicationError\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eextends\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eError\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  code\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e ErrorCode\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  details\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003ekey\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token function\\\"\u003econstructor\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ecode\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e ErrorCode\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e message\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e details\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003ekey\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003esuper\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003emessage\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003ethis\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003ecode \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e code\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003ethis\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003edetails \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e details\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    Object\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003esetPrototypeOf\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token keyword\\\"\u003ethis\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e ApplicationError\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eprototype\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003estatic\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003efromProto\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e ProtoError\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e ApplicationError \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003enew\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eApplicationError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003ecode\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e error\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003emessage\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e error\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003edetails\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e/**\\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e * oneof result에서 성공값을 추출하거나 에러를 throw\\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e */\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efunction\u003c/span\u003e \u003cspan class=\\\"token generic-function\\\"\u003e\u003cspan class=\\\"token function\\\"\u003eunwrap\u003c/span\u003e\u003cspan class=\\\"token generic class-name\\\"\u003e\u003cspan class=\\\"token operator\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\\\"token constant\\\"\u003eT\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eresponse\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  result\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token operator\\\"\u003e|\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003ecase\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'success'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e value\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token constant\\\"\u003eT\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token operator\\\"\u003e|\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003ecase\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'error'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e value\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e ProtoError \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token operator\\\"\u003e|\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003ecase\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eundefined\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e NonNullable\u003cspan class=\\\"token operator\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\\\"token constant\\\"\u003eT\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e\u003e\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003eif\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eresponse\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eresult\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003ecase \u003cspan class=\\\"token operator\\\"\u003e===\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'error'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003ethrow\u003c/span\u003e ApplicationError\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003efromProto\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eresponse\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eresult\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003evalue\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003eif\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eresponse\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eresult\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003ecase \u003cspan class=\\\"token operator\\\"\u003e===\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'success'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e response\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eresult\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003evalue \u003cspan class=\\\"token keyword\\\"\u003eas\u003c/span\u003e NonNullable\u003cspan class=\\\"token operator\\\"\u003e\u0026#x3C;\u003c/span\u003e\u003cspan class=\\\"token constant\\\"\u003eT\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e\u003e\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003ethrow\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003enew\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eApplicationError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eErrorCode\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token constant\\\"\u003eINTERNAL\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'Unknown response result'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e/**\\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e * ConnectError를 ApplicationError로 변환\\n\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e */\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e handleConnectError \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003eunknown\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e ApplicationError \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003eif\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror \u003cspan class=\\\"token keyword\\\"\u003einstanceof\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eApplicationError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e error\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003eif\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror \u003cspan class=\\\"token keyword\\\"\u003einstanceof\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eConnectError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token comment\\\"\u003e// 네트워크 에러 등을 SYSTEM_ERROR로 매핑\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003enew\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eApplicationError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eErrorCode\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token constant\\\"\u003eSYSTEM_ERROR\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e error\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003emessage\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003eif\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror \u003cspan class=\\\"token keyword\\\"\u003einstanceof\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003enew\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eApplicationError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      ErrorCode\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token constant\\\"\u003eINTERNAL\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      error\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003emessage \u003cspan class=\\\"token operator\\\"\u003e||\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'알 수 없는 오류가 발생했습니다'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003enew\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eApplicationError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eErrorCode\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token constant\\\"\u003eUNSPECIFIED\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'알 수 없는 오류가 발생했습니다'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003ch3 id=\\\"백엔드-구현\\\"\u003e백엔드 구현\u003c/h3\u003e\\n\u003cp\u003e백엔드는 비즈니스 로직 에러를 Protobuf \u003ccode\u003eError\u003c/code\u003e 메시지로 만든다. 이 방식을 사용하면 에러 코드가 proto enum으로 정의되어 백엔드-프론트엔드 간 타입 일치가 보장된다.\u003c/p\u003e\\n\u003cpre class=\\\"language-go\\\"\u003e\u003ccode class=\\\"language-go code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// internal/response/errors.go\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003efunc\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003eNewConnectError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ecode domain\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eErrorCode\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e err \u003cspan class=\\\"token builtin\\\"\u003eerror\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e*\u003c/span\u003econnect\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eError \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  connectErr \u003cspan class=\\\"token operator\\\"\u003e:=\u003c/span\u003e connect\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003eNewError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003etoConnectCode\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ecode\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e err\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token comment\\\"\u003e// Protobuf Error 메시지 생성\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  protoErr \u003cspan class=\\\"token operator\\\"\u003e:=\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e\u0026#x26;\u003c/span\u003eduologuev1\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eError\u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    Code\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e    domain\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003eToProtoErrorCode\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ecode\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    Message\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e err\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003eError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    Details\u003cspan class=\\\"token punctuation\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003emake\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token keyword\\\"\u003emap\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003e\u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e\u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token comment\\\"\u003e// Error를 Connect error detail로 추가\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003eif\u003c/span\u003e detail\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e detailErr \u003cspan class=\\\"token operator\\\"\u003e:=\u003c/span\u003e connect\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003eNewErrorDetail\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eprotoErr\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e detailErr \u003cspan class=\\\"token operator\\\"\u003e==\u003c/span\u003e \u003cspan class=\\\"token boolean\\\"\u003enil\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    connectErr\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003eAddDetail\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003edetail\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e connectErr\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003ch3 id=\\\"인터셉터에서-에러-코드별-처리\\\"\u003e인터셉터에서 에러 코드별 처리\u003c/h3\u003e\\n\u003cp\u003e인터셉터에서 특정 에러 코드에 대한 공통 처리를 할 수 있다.\u003c/p\u003e\\n\u003cpre class=\\\"language-typescript\\\"\u003e\u003ccode class=\\\"language-typescript code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// api/interceptors.ts\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e createAuthInterceptor \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e Interceptor \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e next \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003easync\u003c/span\u003e req \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e token \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e useAuthStore\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003egetState\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eaccessToken\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003eif\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003etoken\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    req\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eheader\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003eset\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e'Authorization'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token template-string\\\"\u003e\u003cspan class=\\\"token template-punctuation string\\\"\u003e`\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003eBearer \u003c/span\u003e\u003cspan class=\\\"token interpolation\\\"\u003e\u003cspan class=\\\"token interpolation-punctuation punctuation\\\"\u003e${\u003c/span\u003etoken\u003cspan class=\\\"token interpolation-punctuation punctuation\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"token template-punctuation string\\\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003etry\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eawait\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003enext\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ereq\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003ecatch\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003eif\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror \u003cspan class=\\\"token keyword\\\"\u003einstanceof\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eApplicationError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token comment\\\"\u003e// 프로필 없음 → 로그아웃 처리\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003eif\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003ecode \u003cspan class=\\\"token operator\\\"\u003e===\u003c/span\u003e ErrorCode\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token constant\\\"\u003ePROFILE_NOT_FOUND\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        useAuthStore\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003egetState\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003eclearAuth\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        router\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003ereplace\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e'/'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        \u003cspan class=\\\"token keyword\\\"\u003ethrow\u003c/span\u003e error\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token comment\\\"\u003e// 인증 에러 → 토큰 갱신 시도\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003eif\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        error\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003ecode \u003cspan class=\\\"token operator\\\"\u003e===\u003c/span\u003e ErrorCode\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token constant\\\"\u003eAUTH_ERROR\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e||\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        error\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003ecode \u003cspan class=\\\"token operator\\\"\u003e===\u003c/span\u003e ErrorCode\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token constant\\\"\u003eAUTH_REQUIRED\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e||\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        error\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003ecode \u003cspan class=\\\"token operator\\\"\u003e===\u003c/span\u003e ErrorCode\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token constant\\\"\u003eINVALID_TOKEN\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e newToken \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eawait\u003c/span\u003e tokenRefreshManager\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003erefresh\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        req\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eheader\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003eset\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e'Authorization'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token template-string\\\"\u003e\u003cspan class=\\\"token template-punctuation string\\\"\u003e`\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003eBearer \u003c/span\u003e\u003cspan class=\\\"token interpolation\\\"\u003e\u003cspan class=\\\"token interpolation-punctuation punctuation\\\"\u003e${\u003c/span\u003enewToken\u003cspan class=\\\"token interpolation-punctuation punctuation\\\"\u003e}\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"token template-punctuation string\\\"\u003e`\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eawait\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003enext\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003ereq\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e \u003cspan class=\\\"token comment\\\"\u003e// 재시도\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003ethrow\u003c/span\u003e error\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e이렇게 함으로써 이제 에러를 보다 편하게 다룰 수 있다.\u003c/p\u003e\\n\u003col\u003e\\n\u003cli\u003e\u003cstrong\u003e타입 안전한 에러 처리\u003c/strong\u003e - ErrorCode enum으로 가능한 에러를 컴파일 타임에 알 수 있음\u003c/li\u003e\\n\u003cli\u003e\u003cstrong\u003e중앙화된 에러 처리\u003c/strong\u003e - 인터셉터에서 공통 에러 로직 처리\u003c/li\u003e\\n\u003cli\u003e\u003cstrong\u003e명시적인 에러 흐름\u003c/strong\u003e - oneof를 통해 성공/실패가 proto 레벨에서 명확히 구분됨\u003c/li\u003e\\n\u003c/ol\u003e\\n\u003ch2 id=\\\"8-api-레이어-마이그레이션\\\" class=\\\"heading\\\"\u003e8. API 레이어 마이그레이션\u003c/h2\u003e\\n\u003cp\u003e이제 기존 axios 기반 API를 Connect로 교체한다.\u003c/p\u003e\\n\u003ch3 id=\\\"before-axios\\\"\u003eBefore (axios)\u003c/h3\u003e\\n\u003cpre class=\\\"language-typescript\\\"\u003e\u003ccode class=\\\"language-typescript code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// api/auth.ts (before)\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e apiClient \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'./client'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003einterface\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eVerifySignupRequest\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  email\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  code\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003einterface\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eTokenResponse\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  access_token\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  refresh_token\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e authApi \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  verifySignup\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003easync\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eemail\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e code\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003ePromise\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e\u0026#x3C;\u003c/span\u003eTokenResponse\u003cspan class=\\\"token operator\\\"\u003e\u003e\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e response \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eawait\u003c/span\u003e apiClient\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token generic-function\\\"\u003e\u003cspan class=\\\"token function\\\"\u003epost\u003c/span\u003e\u003cspan class=\\\"token generic class-name\\\"\u003e\u003cspan class=\\\"token operator\\\"\u003e\u0026#x3C;\u003c/span\u003eTokenResponse\u003cspan class=\\\"token operator\\\"\u003e\u003e\u003c/span\u003e\u003c/span\u003e\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token string\\\"\u003e'/auth/verify-signup'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      email\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      code\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e response\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003edata\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003ch3 id=\\\"after-connect\\\"\u003eAfter (Connect)\u003c/h3\u003e\\n\u003cpre class=\\\"language-typescript\\\"\u003e\u003ccode class=\\\"language-typescript code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// api/auth.ts (after)\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e create \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'@bufbuild/protobuf'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e VerifySignupRequestSchema \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'@/gen/myapp/v1/auth_pb'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e handleConnectError \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'./connectError'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e authClient \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'./transport'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003einterface\u003c/span\u003e \u003cspan class=\\\"token class-name\\\"\u003eTokenResponse\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  accessToken\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  refreshToken\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e authApi \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  verifySignup\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003easync\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eemail\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e code\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003estring\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003ePromise\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e\u0026#x3C;\u003c/span\u003eTokenResponse\u003cspan class=\\\"token operator\\\"\u003e\u003e\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003etry\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e request \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003ecreate\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eVerifySignupRequestSchema\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e email\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e code \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e response \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eawait\u003c/span\u003e authClient\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003everifySignup\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003erequest\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e result \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003eunwrap\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eresponse\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e \u003cspan class=\\\"token comment\\\"\u003e// oneof result 처리\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        accessToken\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e result\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eaccessToken\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        refreshToken\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e result\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003erefreshToken\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003ecatch\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003ethrow\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003ehandleConnectError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e변경된 점은 다음과 같다.\u003c/p\u003e\\n\u003col\u003e\\n\u003cli\u003e\u003cstrong\u003e타입을 수동으로 정의하지 않는다\u003c/strong\u003e - proto에서 자동 생성됨\u003c/li\u003e\\n\u003cli\u003e\u003cstrong\u003eURL 경로를 하드코딩하지 않는다\u003c/strong\u003e - 서비스 정의에 포함됨\u003c/li\u003e\\n\u003cli\u003e\u003cstrong\u003ecreate()로 요청 메시지를 생성한다\u003c/strong\u003e - 타입 안전성 보장\u003c/li\u003e\\n\u003c/ol\u003e\\n\u003ch3 id=\\\"profile-api-예시\\\"\u003eProfile API 예시\u003c/h3\u003e\\n\u003cpre class=\\\"language-typescript\\\"\u003e\u003ccode class=\\\"language-typescript code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// api/profile.ts\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e create \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'@bufbuild/protobuf'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e GetMyProfileRequestSchema\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e UpdateMyProfileRequestSchema \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'@/gen/myapp/v1/profile_pb'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e handleConnectError \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'./connectError'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eimport\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e profileClient \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003efrom\u003c/span\u003e \u003cspan class=\\\"token string\\\"\u003e'./transport'\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e profileApi \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  getMe\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003easync\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003ePromise\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e\u0026#x3C;\u003c/span\u003eProfileMe\u003cspan class=\\\"token operator\\\"\u003e\u003e\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003etry\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e request \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003ecreate\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eGetMyProfileRequestSchema\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e response \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eawait\u003c/span\u003e profileClient\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003egetMyProfile\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003erequest\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e result \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003eunwrap\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eresponse\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e \u003cspan class=\\\"token comment\\\"\u003e// oneof result 처리\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003emapProfile\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eresult\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eprofile\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003ecatch\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003ethrow\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003ehandleConnectError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  updateMe\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003easync\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003edata\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e UpdateProfileData\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token builtin\\\"\u003ePromise\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e\u0026#x3C;\u003c/span\u003eProfileMe\u003cspan class=\\\"token operator\\\"\u003e\u003e\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token keyword\\\"\u003etry\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e request \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003ecreate\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eUpdateMyProfileRequestSchema\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        nickname\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e data\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003enickname\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        gender\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e data\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003egender\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        region\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e data\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eregion\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        shortBio\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e data\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eshortBio\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        profileImageUrl\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e data\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eprofileImageUrl\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e        interestIds\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e data\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003einterestIds\u003cspan class=\\\"token operator\\\"\u003e?.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003emap\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eid \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003eBigInt\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eid\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e??\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e[\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e]\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e response \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eawait\u003c/span\u003e profileClient\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003eupdateMyProfile\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003erequest\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e result \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003eunwrap\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eresponse\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e \u003cspan class=\\\"token comment\\\"\u003e// oneof result 처리\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003emapProfile\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eresult\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eprofile\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003ecatch\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token keyword\\\"\u003ethrow\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003ehandleConnectError\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eerror\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003ch2 id=\\\"9-react-query-훅은-그대로\\\" class=\\\"heading\\\"\u003e9. React Query 훅은 그대로\u003c/h2\u003e\\n\u003cp\u003e\u003ca href=\\\"https://tanstack.com/query/latest\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferer\\\"\u003eReact Query\u003c/a\u003e 훅은 API 함수만 호출하므로 수정할 필요가 없다.\u003c/p\u003e\\n\u003cpre class=\\\"language-typescript\\\"\u003e\u003ccode class=\\\"language-typescript code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// queries/useMutationAuth.ts\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003eexport\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e \u003cspan class=\\\"token function-variable function\\\"\u003euseVerifySignup\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token keyword\\\"\u003ereturn\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003euseMutation\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token function-variable function\\\"\u003emutationFn\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e email\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e code \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e VerifySignupParams\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e authApi\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003everifySignup\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eemail\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e code\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token function-variable function\\\"\u003eonSuccess\u003c/span\u003e\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e data \u003cspan class=\\\"token operator\\\"\u003e=\u003e\u003c/span\u003e \u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e      \u003cspan class=\\\"token function\\\"\u003esetTokens\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003edata\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003eaccessToken\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e data\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003erefreshToken\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e    \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003eAPI 레이어만 교체했으므로 컴포넌트 코드는 전혀 수정하지 않아도 된다.\u003c/p\u003e\\n\u003ch2 id=\\\"10-axios-제거\\\" class=\\\"heading\\\"\u003e10. axios 제거\u003c/h2\u003e\\n\u003cp\u003e마이그레이션이 완료되면 axios를 제거한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-bash\\\"\u003e\u003ccode class=\\\"language-bash code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token function\\\"\u003eyarn\u003c/span\u003e remove axios\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003e기존에 axios를 사용하던 파일들도 삭제한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-bash\\\"\u003e\u003ccode class=\\\"language-bash code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token function\\\"\u003erm\u003c/span\u003e api/client.ts  \u003cspan class=\\\"token comment\\\"\u003e# axios 클라이언트\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003ch2 id=\\\"결과\\\" class=\\\"heading\\\"\u003e결과\u003c/h2\u003e\\n\u003ch3 id=\\\"타입-안전성-확보\\\"\u003e타입 안전성 확보\u003c/h3\u003e\\n\u003cp\u003e이제 백엔드가 API를 변경하면 프론트엔드가 \u003cstrong\u003e컴파일 타임에\u003c/strong\u003e 에러가 발생한다.\u003c/p\u003e\\n\u003cpre class=\\\"language-typescript\\\"\u003e\u003ccode class=\\\"language-typescript code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e// proto에서 nickname 필드가 제거되면\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e profile \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token keyword\\\"\u003eawait\u003c/span\u003e profileApi\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003egetMe\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token builtin\\\"\u003econsole\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003e\u003cspan class=\\\"token function\\\"\u003elog\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003eprofile\u003cspan class=\\\"token punctuation\\\"\u003e.\u003c/span\u003enickname\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e \u003cspan class=\\\"token comment\\\"\u003e// ❌ TypeScript 에러: 'nickname' does not exist\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003ch3 id=\\\"개발-경험-개선\\\"\u003e개발 경험 개선\u003c/h3\u003e\\n\u003col\u003e\\n\u003cli\u003e\u003cstrong\u003e자동 완성이 정확하다\u003c/strong\u003e - proto에 정의된 필드만 자동 완성됨\u003c/li\u003e\\n\u003cli\u003e\u003cstrong\u003e리팩토링이 안전하다\u003c/strong\u003e - 필드명을 바꾸면 사용하는 모든 곳에서 에러 발생\u003c/li\u003e\\n\u003cli\u003e\u003cstrong\u003e문서가 필요 없다\u003c/strong\u003e - proto 파일이 곧 API 명세서\u003c/li\u003e\\n\u003c/ol\u003e\\n\u003ch3 id=\\\"유지보수-비용-감소\\\"\u003e유지보수 비용 감소\u003c/h3\u003e\\n\u003cul\u003e\\n\u003cli\u003e타입 정의를 수동으로 관리할 필요 없음\u003c/li\u003e\\n\u003cli\u003esnake_case ↔ camelCase 변환 코드 불필요\u003c/li\u003e\\n\u003cli\u003eAPI 변경 시 영향받는 코드를 TypeScript가 알려줌\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003ch2 id=\\\"binary-vs-json\\\" class=\\\"heading\\\"\u003eBinary vs JSON\u003c/h2\u003e\\n\u003cp\u003eConnect RPC는 binary(Protobuf)와 JSON 두 가지 포맷을 지원한다. \u003ccode\u003ecreateConnectTransport\u003c/code\u003e는 기본적으로 binary 포맷을 사용하므로, 별도 설정 없이도 binary의 이점을 누릴 수 있다.\u003c/p\u003e\\n\u003cul\u003e\\n\u003cli\u003e\u003cstrong\u003eBinary (기본값)\u003c/strong\u003e - 더 작은 페이로드, 더 빠른 직렬화/역직렬화\u003c/li\u003e\\n\u003cli\u003e\u003cstrong\u003eJSON\u003c/strong\u003e - 디버깅이 쉬움 (네트워크 탭에서 내용 확인 가능)\u003c/li\u003e\\n\u003c/ul\u003e\\n\u003cp\u003eProto 스키마의 타입 안전성을 유지하면서 실제 통신 데이터 포맷은 선택할 수 있다는 것이 Connect RPC의 큰 장점이다. 개발 환경에서 디버깅이 필요하다면 JSON으로, 프로덕션에서는 Binary로 전환하는 것도 가능하다.\u003c/p\u003e\\n\u003cpre class=\\\"language-typescript\\\"\u003e\u003ccode class=\\\"language-typescript code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token keyword\\\"\u003econst\u003c/span\u003e transport \u003cspan class=\\\"token operator\\\"\u003e=\u003c/span\u003e \u003cspan class=\\\"token function\\\"\u003ecreateConnectTransport\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e(\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e{\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  baseUrl\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token constant\\\"\u003eAPI_URL\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  useBinaryFormat\u003cspan class=\\\"token operator\\\"\u003e:\u003c/span\u003e \u003cspan class=\\\"token boolean\\\"\u003efalse\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e,\u003c/span\u003e \u003cspan class=\\\"token comment\\\"\u003e// JSON 사용 (디버깅 시 편리)\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e  \u003cspan class=\\\"token comment\\\"\u003e// useBinaryFormat을 생략하면 기본값인 true(binary)가 적용됨\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token punctuation\\\"\u003e}\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e)\u003c/span\u003e\u003cspan class=\\\"token punctuation\\\"\u003e;\u003c/span\u003e\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003ch2 id=\\\"주의사항\\\" class=\\\"heading\\\"\u003e주의사항\u003c/h2\u003e\\n\u003ch3 id=\\\"1-metro-설정-필수\\\"\u003e1. Metro 설정 필수\u003c/h3\u003e\\n\u003cp\u003e\u003ccode\u003eunstable_enablePackageExports\u003c/code\u003e를 활성화하지 않으면 런타임 에러가 발생한다. 이 설정을 빠뜨리면 앱이 제대로 실행되지 않는다.\u003c/p\u003e\\n\u003ch3 id=\\\"2-streaming은-미지원\\\"\u003e2. Streaming은 미지원\u003c/h3\u003e\\n\u003cp\u003eConnect RPC는 \u003ca href=\\\"https://grpc.io/docs/what-is-grpc/core-concepts/#unary-rpc\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferer\\\"\u003eUnary RPC\u003c/a\u003e만 지원한다. \u003ca href=\\\"https://grpc.io/docs/what-is-grpc/core-concepts/#server-streaming-rpc\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferer\\\"\u003eServer Streaming\u003c/a\u003e이나 \u003ca href=\\\"https://grpc.io/docs/what-is-grpc/core-concepts/#bidirectional-streaming-rpc\\\" target=\\\"_blank\\\" rel=\\\"noopener noreferer\\\"\u003eBidirectional Streaming\u003c/a\u003e은 React Native에서 작동하지 않는다.\u003c/p\u003e\\n\u003ch3 id=\\\"3-코드-생성-타이밍\\\"\u003e3. 코드 생성 타이밍\u003c/h3\u003e\\n\u003cp\u003eproto 파일이 변경되면 \u003ccode\u003eyarn generate\u003c/code\u003e를 다시 실행해야 한다. submodule을 업데이트할 때마다 실행하는 것을 잊지 말자.\u003c/p\u003e\\n\u003cpre class=\\\"language-bash\\\"\u003e\u003ccode class=\\\"language-bash code-highlight\\\"\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token comment\\\"\u003e# proto submodule 업데이트 후\u003c/span\u003e\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token function\\\"\u003egit\u003c/span\u003e submodule update \u003cspan class=\\\"token parameter variable\\\"\u003e--remote\u003c/span\u003e proto\\n\u003c/span\u003e\u003cspan class=\\\"code-line\\\"\u003e\u003cspan class=\\\"token function\\\"\u003eyarn\u003c/span\u003e generate\\n\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\\n\u003cp\u003eproto 파일은 Protobuf의 네이밍 규칙에 따라 snake_case를 사용하지만, Connect는 코드 생성 시 자동으로 TypeScript의 camelCase로 변환해준다.\u003c/p\u003e\\n\u003ch2 id=\\\"마무리\\\" class=\\\"heading\\\"\u003e마무리\u003c/h2\u003e\\n\u003cp\u003eREST API에서 Connect RPC로 마이그레이션하면서 가장 만족스러운 점은 \u003cstrong\u003e타입 안전성\u003c/strong\u003e이다. 백엔드가 API를 변경하면 프론트엔드가 런타임이 아닌 컴파일 타임에 깨지므로, 배포 전에 문제를 발견할 수 있다.\u003c/p\u003e\\n\u003cp\u003e수동으로 타입을 정의하던 시간을 아낄 수 있고, proto 파일만 보면 API 명세를 정확히 알 수 있어 문서를 별도로 관리할 필요도 없어졌다.\u003c/p\u003e\\n\u003cp\u003e백엔드와 프론트엔드가 상호완결성을 가지는 서비스 프로덕트라면 gRPC 도입을 고려 해보는 것도 나쁘지 않은 것 같다.\u003c/p\u003e\"}]\n"])</script><script>self.__next_f.push([1,"8:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],null,null,null,null,null,null,null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,null,null,null,null]\n"])</script><script>self.__next_f.push([1,"5:[[[\"$\",\"meta\",null,{\"charSet\":\"utf-8\"}],[\"$\",\"title\",null,{\"children\":\"React Native에서 REST API를 Connect RPC로 마이그레이션하기 - Bran's codeverse\"}],[\"$\",\"meta\",null,{\"name\":\"description\",\"content\":\"axios를 버리고 타입 안전한 gRPC 세상으로\"}],null,null,null,null,null,null,null,null,[\"$\",\"meta\",null,{\"name\":\"viewport\",\"content\":\"width=device-width, initial-scale=1\"}],null,null,null,null,null,null,null,null,null,null,[]],[null,null,null,null],null,null,[null,null,null,null,null],null,[null,[\"$\",\"meta\",null,{\"property\":\"og:title\",\"content\":\"React Native에서 REST API를 Connect RPC로 마이그레이션하기 - Bran's codeverse\"}],[\"$\",\"meta\",null,{\"property\":\"og:description\",\"content\":\"axios를 버리고 타입 안전한 gRPC 세상으로\"}],null,[\"$\",\"meta\",null,{\"property\":\"og:site_name\",\"content\":\"Bran's codeverse\"}],null,null,null,[[[\"$\",\"meta\",null,{\"property\":\"og:image\",\"content\":\"http://localhost:3000/assets/images/posts/thumbnails/react-native-connect-rpc-migration.png\"}]]],null,null,null,null,null,null,[[\"$\",\"meta\",null,{\"property\":\"og:type\",\"content\":\"article\"}],null,null,null,null,null,null]],[[\"$\",\"meta\",null,{\"name\":\"twitter:card\",\"content\":\"summary_large_image\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:site\",\"content\":\"@codeverse\"}],null,null,null,[\"$\",\"meta\",null,{\"name\":\"twitter:title\",\"content\":\"React Native에서 REST API를 Connect RPC로 마이그레이션하기 - Bran's codeverse\"}],[\"$\",\"meta\",null,{\"name\":\"twitter:description\",\"content\":\"axios를 버리고 타입 안전한 gRPC 세상으로\"}],[[[\"$\",\"meta\",null,{\"name\":\"twitter:image\",\"content\":\"http://localhost:3000/assets/images/posts/thumbnails/react-native-connect-rpc-migration.png\"}]]],null,null],null,[null,[[\"$\",\"link\",null,{\"rel\":\"icon\",\"href\":\"/icon.svg?43070ac23468c58b\",\"type\":\"image/svg+xml\",\"sizes\":\"32x32\"}]],[],null]]\n"])</script></body></html>